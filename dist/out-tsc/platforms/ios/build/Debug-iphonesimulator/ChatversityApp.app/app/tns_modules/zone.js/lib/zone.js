/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Zone = (function (global) {
    var performance = global['performance'];
    function mark(name) {
        performance && performance['mark'] && performance['mark'](name);
    }
    function performanceMeasure(name, label) {
        performance && performance['measure'] && performance['measure'](name, label);
    }
    mark('Zone');
    var checkDuplicate = global[('__zone_symbol__forceDuplicateZoneCheck')] === true;
    if (global['Zone']) {
        // if global['Zone'] already exists (maybe zone.js was already loaded or
        // some other lib also registered a global object named Zone), we may need
        // to throw an error, but sometimes user may not want this error.
        // For example,
        // we have two web pages, page1 includes zone.js, page2 doesn't.
        // and the 1st time user load page1 and page2, everything work fine,
        // but when user load page2 again, error occurs because global['Zone'] already exists.
        // so we add a flag to let user choose whether to throw this error or not.
        // By default, if existing Zone is from zone.js, we will not throw the error.
        if (checkDuplicate || typeof global['Zone'].__symbol__ !== 'function') {
            throw new Error('Zone already loaded.');
        }
        else {
            return global['Zone'];
        }
    }
    var Zone = /** @class */ (function () {
        function Zone(parent, zoneSpec) {
            this._parent = parent;
            this._name = zoneSpec ? zoneSpec.name || 'unnamed' : '<root>';
            this._properties = zoneSpec && zoneSpec.properties || {};
            this._zoneDelegate =
                new ZoneDelegate(this, this._parent && this._parent._zoneDelegate, zoneSpec);
        }
        Zone.assertZonePatched = function () {
            if (global['Promise'] !== patches['ZoneAwarePromise']) {
                throw new Error('Zone.js has detected that ZoneAwarePromise `(window|global).Promise` ' +
                    'has been overwritten.\n' +
                    'Most likely cause is that a Promise polyfill has been loaded ' +
                    'after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. ' +
                    'If you must load one, do so before loading zone.js.)');
            }
        };
        Object.defineProperty(Zone, "root", {
            get: function () {
                var zone = Zone.current;
                while (zone.parent) {
                    zone = zone.parent;
                }
                return zone;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Zone, "current", {
            get: function () {
                return _currentZoneFrame.zone;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Zone, "currentTask", {
            get: function () {
                return _currentTask;
            },
            enumerable: true,
            configurable: true
        });
        Zone.__load_patch = function (name, fn) {
            if (patches.hasOwnProperty(name)) {
                if (checkDuplicate) {
                    throw Error('Already loaded patch: ' + name);
                }
            }
            else if (!global['__Zone_disable_' + name]) {
                var perfName = 'Zone:' + name;
                mark(perfName);
                patches[name] = fn(global, Zone, _api);
                performanceMeasure(perfName, perfName);
            }
        };
        Object.defineProperty(Zone.prototype, "parent", {
            get: function () {
                return this._parent;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Zone.prototype, "name", {
            get: function () {
                return this._name;
            },
            enumerable: true,
            configurable: true
        });
        Zone.prototype.get = function (key) {
            var zone = this.getZoneWith(key);
            if (zone)
                return zone._properties[key];
        };
        Zone.prototype.getZoneWith = function (key) {
            var current = this;
            while (current) {
                if (current._properties.hasOwnProperty(key)) {
                    return current;
                }
                current = current._parent;
            }
            return null;
        };
        Zone.prototype.fork = function (zoneSpec) {
            if (!zoneSpec)
                throw new Error('ZoneSpec required!');
            return this._zoneDelegate.fork(this, zoneSpec);
        };
        Zone.prototype.wrap = function (callback, source) {
            if (typeof callback !== 'function') {
                throw new Error('Expecting function got: ' + callback);
            }
            var _callback = this._zoneDelegate.intercept(this, callback, source);
            var zone = this;
            return function () {
                return zone.runGuarded(_callback, this, arguments, source);
            };
        };
        Zone.prototype.run = function (callback, applyThis, applyArgs, source) {
            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };
            try {
                return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);
            }
            finally {
                _currentZoneFrame = _currentZoneFrame.parent;
            }
        };
        Zone.prototype.runGuarded = function (callback, applyThis, applyArgs, source) {
            if (applyThis === void 0) { applyThis = null; }
            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };
            try {
                try {
                    return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);
                }
                catch (error) {
                    if (this._zoneDelegate.handleError(this, error)) {
                        throw error;
                    }
                }
            }
            finally {
                _currentZoneFrame = _currentZoneFrame.parent;
            }
        };
        Zone.prototype.runTask = function (task, applyThis, applyArgs) {
            if (task.zone != this) {
                throw new Error('A task can only be run in the zone of creation! (Creation: ' +
                    (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');
            }
            // https://github.com/angular/zone.js/issues/778, sometimes eventTask
            // will run in notScheduled(canceled) state, we should not try to
            // run such kind of task but just return
            if (task.state === notScheduled && (task.type === eventTask || task.type === macroTask)) {
                return;
            }
            var reEntryGuard = task.state != running;
            reEntryGuard && task._transitionTo(running, scheduled);
            task.runCount++;
            var previousTask = _currentTask;
            _currentTask = task;
            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };
            try {
                if (task.type == macroTask && task.data && !task.data.isPeriodic) {
                    task.cancelFn = undefined;
                }
                try {
                    return this._zoneDelegate.invokeTask(this, task, applyThis, applyArgs);
                }
                catch (error) {
                    if (this._zoneDelegate.handleError(this, error)) {
                        throw error;
                    }
                }
            }
            finally {
                // if the task's state is notScheduled or unknown, then it has already been cancelled
                // we should not reset the state to scheduled
                if (task.state !== notScheduled && task.state !== unknown) {
                    if (task.type == eventTask || (task.data && task.data.isPeriodic)) {
                        reEntryGuard && task._transitionTo(scheduled, running);
                    }
                    else {
                        task.runCount = 0;
                        this._updateTaskCount(task, -1);
                        reEntryGuard &&
                            task._transitionTo(notScheduled, running, notScheduled);
                    }
                }
                _currentZoneFrame = _currentZoneFrame.parent;
                _currentTask = previousTask;
            }
        };
        Zone.prototype.scheduleTask = function (task) {
            if (task.zone && task.zone !== this) {
                // check if the task was rescheduled, the newZone
                // should not be the children of the original zone
                var newZone = this;
                while (newZone) {
                    if (newZone === task.zone) {
                        throw Error("can not reschedule task to " + this.name + " which is descendants of the original zone " + task.zone.name);
                    }
                    newZone = newZone.parent;
                }
            }
            task._transitionTo(scheduling, notScheduled);
            var zoneDelegates = [];
            task._zoneDelegates = zoneDelegates;
            task._zone = this;
            try {
                task = this._zoneDelegate.scheduleTask(this, task);
            }
            catch (err) {
                // should set task's state to unknown when scheduleTask throw error
                // because the err may from reschedule, so the fromState maybe notScheduled
                task._transitionTo(unknown, scheduling, notScheduled);
                // TODO: @JiaLiPassion, should we check the result from handleError?
                this._zoneDelegate.handleError(this, err);
                throw err;
            }
            if (task._zoneDelegates === zoneDelegates) {
                // we have to check because internally the delegate can reschedule the task.
                this._updateTaskCount(task, 1);
            }
            if (task.state == scheduling) {
                task._transitionTo(scheduled, scheduling);
            }
            return task;
        };
        Zone.prototype.scheduleMicroTask = function (source, callback, data, customSchedule) {
            return this.scheduleTask(new ZoneTask(microTask, source, callback, data, customSchedule, undefined));
        };
        Zone.prototype.scheduleMacroTask = function (source, callback, data, customSchedule, customCancel) {
            return this.scheduleTask(new ZoneTask(macroTask, source, callback, data, customSchedule, customCancel));
        };
        Zone.prototype.scheduleEventTask = function (source, callback, data, customSchedule, customCancel) {
            return this.scheduleTask(new ZoneTask(eventTask, source, callback, data, customSchedule, customCancel));
        };
        Zone.prototype.cancelTask = function (task) {
            if (task.zone != this)
                throw new Error('A task can only be cancelled in the zone of creation! (Creation: ' +
                    (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');
            task._transitionTo(canceling, scheduled, running);
            try {
                this._zoneDelegate.cancelTask(this, task);
            }
            catch (err) {
                // if error occurs when cancelTask, transit the state to unknown
                task._transitionTo(unknown, canceling);
                this._zoneDelegate.handleError(this, err);
                throw err;
            }
            this._updateTaskCount(task, -1);
            task._transitionTo(notScheduled, canceling);
            task.runCount = 0;
            return task;
        };
        Zone.prototype._updateTaskCount = function (task, count) {
            var zoneDelegates = task._zoneDelegates;
            if (count == -1) {
                task._zoneDelegates = null;
            }
            for (var i = 0; i < zoneDelegates.length; i++) {
                zoneDelegates[i]._updateTaskCount(task.type, count);
            }
        };
        Zone.__symbol__ = __symbol__;
        return Zone;
    }());
    var DELEGATE_ZS = {
        name: '',
        onHasTask: function (delegate, _, target, hasTaskState) { return delegate.hasTask(target, hasTaskState); },
        onScheduleTask: function (delegate, _, target, task) {
            return delegate.scheduleTask(target, task);
        },
        onInvokeTask: function (delegate, _, target, task, applyThis, applyArgs) {
            return delegate.invokeTask(target, task, applyThis, applyArgs);
        },
        onCancelTask: function (delegate, _, target, task) { return delegate.cancelTask(target, task); }
    };
    var ZoneDelegate = /** @class */ (function () {
        function ZoneDelegate(zone, parentDelegate, zoneSpec) {
            this._taskCounts = { 'microTask': 0, 'macroTask': 0, 'eventTask': 0 };
            this.zone = zone;
            this._parentDelegate = parentDelegate;
            this._forkZS = zoneSpec && (zoneSpec && zoneSpec.onFork ? zoneSpec : parentDelegate._forkZS);
            this._forkDlgt = zoneSpec && (zoneSpec.onFork ? parentDelegate : parentDelegate._forkDlgt);
            this._forkCurrZone = zoneSpec && (zoneSpec.onFork ? this.zone : parentDelegate.zone);
            this._interceptZS =
                zoneSpec && (zoneSpec.onIntercept ? zoneSpec : parentDelegate._interceptZS);
            this._interceptDlgt =
                zoneSpec && (zoneSpec.onIntercept ? parentDelegate : parentDelegate._interceptDlgt);
            this._interceptCurrZone =
                zoneSpec && (zoneSpec.onIntercept ? this.zone : parentDelegate.zone);
            this._invokeZS = zoneSpec && (zoneSpec.onInvoke ? zoneSpec : parentDelegate._invokeZS);
            this._invokeDlgt =
                zoneSpec && (zoneSpec.onInvoke ? parentDelegate : parentDelegate._invokeDlgt);
            this._invokeCurrZone = zoneSpec && (zoneSpec.onInvoke ? this.zone : parentDelegate.zone);
            this._handleErrorZS =
                zoneSpec && (zoneSpec.onHandleError ? zoneSpec : parentDelegate._handleErrorZS);
            this._handleErrorDlgt =
                zoneSpec && (zoneSpec.onHandleError ? parentDelegate : parentDelegate._handleErrorDlgt);
            this._handleErrorCurrZone =
                zoneSpec && (zoneSpec.onHandleError ? this.zone : parentDelegate.zone);
            this._scheduleTaskZS =
                zoneSpec && (zoneSpec.onScheduleTask ? zoneSpec : parentDelegate._scheduleTaskZS);
            this._scheduleTaskDlgt = zoneSpec &&
                (zoneSpec.onScheduleTask ? parentDelegate : parentDelegate._scheduleTaskDlgt);
            this._scheduleTaskCurrZone =
                zoneSpec && (zoneSpec.onScheduleTask ? this.zone : parentDelegate.zone);
            this._invokeTaskZS =
                zoneSpec && (zoneSpec.onInvokeTask ? zoneSpec : parentDelegate._invokeTaskZS);
            this._invokeTaskDlgt =
                zoneSpec && (zoneSpec.onInvokeTask ? parentDelegate : parentDelegate._invokeTaskDlgt);
            this._invokeTaskCurrZone =
                zoneSpec && (zoneSpec.onInvokeTask ? this.zone : parentDelegate.zone);
            this._cancelTaskZS =
                zoneSpec && (zoneSpec.onCancelTask ? zoneSpec : parentDelegate._cancelTaskZS);
            this._cancelTaskDlgt =
                zoneSpec && (zoneSpec.onCancelTask ? parentDelegate : parentDelegate._cancelTaskDlgt);
            this._cancelTaskCurrZone =
                zoneSpec && (zoneSpec.onCancelTask ? this.zone : parentDelegate.zone);
            this._hasTaskZS = null;
            this._hasTaskDlgt = null;
            this._hasTaskDlgtOwner = null;
            this._hasTaskCurrZone = null;
            var zoneSpecHasTask = zoneSpec && zoneSpec.onHasTask;
            var parentHasTask = parentDelegate && parentDelegate._hasTaskZS;
            if (zoneSpecHasTask || parentHasTask) {
                // If we need to report hasTask, than this ZS needs to do ref counting on tasks. In such
                // a case all task related interceptors must go through this ZD. We can't short circuit it.
                this._hasTaskZS = zoneSpecHasTask ? zoneSpec : DELEGATE_ZS;
                this._hasTaskDlgt = parentDelegate;
                this._hasTaskDlgtOwner = this;
                this._hasTaskCurrZone = zone;
                if (!zoneSpec.onScheduleTask) {
                    this._scheduleTaskZS = DELEGATE_ZS;
                    this._scheduleTaskDlgt = parentDelegate;
                    this._scheduleTaskCurrZone = this.zone;
                }
                if (!zoneSpec.onInvokeTask) {
                    this._invokeTaskZS = DELEGATE_ZS;
                    this._invokeTaskDlgt = parentDelegate;
                    this._invokeTaskCurrZone = this.zone;
                }
                if (!zoneSpec.onCancelTask) {
                    this._cancelTaskZS = DELEGATE_ZS;
                    this._cancelTaskDlgt = parentDelegate;
                    this._cancelTaskCurrZone = this.zone;
                }
            }
        }
        ZoneDelegate.prototype.fork = function (targetZone, zoneSpec) {
            return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, targetZone, zoneSpec) :
                new Zone(targetZone, zoneSpec);
        };
        ZoneDelegate.prototype.intercept = function (targetZone, callback, source) {
            return this._interceptZS ?
                this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, targetZone, callback, source) :
                callback;
        };
        ZoneDelegate.prototype.invoke = function (targetZone, callback, applyThis, applyArgs, source) {
            return this._invokeZS ? this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, targetZone, callback, applyThis, applyArgs, source) :
                callback.apply(applyThis, applyArgs);
        };
        ZoneDelegate.prototype.handleError = function (targetZone, error) {
            return this._handleErrorZS ?
                this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, targetZone, error) :
                true;
        };
        ZoneDelegate.prototype.scheduleTask = function (targetZone, task) {
            var returnTask = task;
            if (this._scheduleTaskZS) {
                if (this._hasTaskZS) {
                    returnTask._zoneDelegates.push(this._hasTaskDlgtOwner);
                }
                returnTask = this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, targetZone, task);
                if (!returnTask)
                    returnTask = task;
            }
            else {
                if (task.scheduleFn) {
                    task.scheduleFn(task);
                }
                else if (task.type == microTask) {
                    scheduleMicroTask(task);
                }
                else {
                    throw new Error('Task is missing scheduleFn.');
                }
            }
            return returnTask;
        };
        ZoneDelegate.prototype.invokeTask = function (targetZone, task, applyThis, applyArgs) {
            return this._invokeTaskZS ? this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, targetZone, task, applyThis, applyArgs) :
                task.callback.apply(applyThis, applyArgs);
        };
        ZoneDelegate.prototype.cancelTask = function (targetZone, task) {
            var value;
            if (this._cancelTaskZS) {
                value = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, targetZone, task);
            }
            else {
                if (!task.cancelFn) {
                    throw Error('Task is not cancelable');
                }
                value = task.cancelFn(task);
            }
            return value;
        };
        ZoneDelegate.prototype.hasTask = function (targetZone, isEmpty) {
            // hasTask should not throw error so other ZoneDelegate
            // can still trigger hasTask callback
            try {
                this._hasTaskZS &&
                    this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, targetZone, isEmpty);
            }
            catch (err) {
                this.handleError(targetZone, err);
            }
        };
        ZoneDelegate.prototype._updateTaskCount = function (type, count) {
            var counts = this._taskCounts;
            var prev = counts[type];
            var next = counts[type] = prev + count;
            if (next < 0) {
                throw new Error('More tasks executed then were scheduled.');
            }
            if (prev == 0 || next == 0) {
                var isEmpty = {
                    microTask: counts['microTask'] > 0,
                    macroTask: counts['macroTask'] > 0,
                    eventTask: counts['eventTask'] > 0,
                    change: type
                };
                this.hasTask(this.zone, isEmpty);
            }
        };
        return ZoneDelegate;
    }());
    var ZoneTask = /** @class */ (function () {
        function ZoneTask(type, source, callback, options, scheduleFn, cancelFn) {
            this._zone = null;
            this.runCount = 0;
            this._zoneDelegates = null;
            this._state = 'notScheduled';
            this.type = type;
            this.source = source;
            this.data = options;
            this.scheduleFn = scheduleFn;
            this.cancelFn = cancelFn;
            this.callback = callback;
            var self = this;
            // TODO: @JiaLiPassion options should have interface
            if (type === eventTask && options && options.useG) {
                this.invoke = ZoneTask.invokeTask;
            }
            else {
                this.invoke = function () {
                    return ZoneTask.invokeTask.call(global, self, this, arguments);
                };
            }
        }
        ZoneTask.invokeTask = function (task, target, args) {
            if (!task) {
                task = this;
            }
            _numberOfNestedTaskFrames++;
            try {
                task.runCount++;
                return task.zone.runTask(task, target, args);
            }
            finally {
                if (_numberOfNestedTaskFrames == 1) {
                    drainMicroTaskQueue();
                }
                _numberOfNestedTaskFrames--;
            }
        };
        Object.defineProperty(ZoneTask.prototype, "zone", {
            get: function () {
                return this._zone;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ZoneTask.prototype, "state", {
            get: function () {
                return this._state;
            },
            enumerable: true,
            configurable: true
        });
        ZoneTask.prototype.cancelScheduleRequest = function () {
            this._transitionTo(notScheduled, scheduling);
        };
        ZoneTask.prototype._transitionTo = function (toState, fromState1, fromState2) {
            if (this._state === fromState1 || this._state === fromState2) {
                this._state = toState;
                if (toState == notScheduled) {
                    this._zoneDelegates = null;
                }
            }
            else {
                throw new Error(this.type + " '" + this.source + "': can not transition to '" + toState + "', expecting state '" + fromState1 + "'" + (fromState2 ? ' or \'' + fromState2 + '\'' : '') + ", was '" + this._state + "'.");
            }
        };
        ZoneTask.prototype.toString = function () {
            if (this.data && typeof this.data.handleId !== 'undefined') {
                return this.data.handleId.toString();
            }
            else {
                return Object.prototype.toString.call(this);
            }
        };
        // add toJSON method to prevent cyclic error when
        // call JSON.stringify(zoneTask)
        ZoneTask.prototype.toJSON = function () {
            return {
                type: this.type,
                state: this.state,
                source: this.source,
                zone: this.zone.name,
                runCount: this.runCount
            };
        };
        return ZoneTask;
    }());
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    ///  MICROTASK QUEUE
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    var symbolSetTimeout = __symbol__('setTimeout');
    var symbolPromise = __symbol__('Promise');
    var symbolThen = __symbol__('then');
    var _microTaskQueue = [];
    var _isDrainingMicrotaskQueue = false;
    var nativeMicroTaskQueuePromise;
    function scheduleMicroTask(task) {
        // if we are not running in any task, and there has not been anything scheduled
        // we must bootstrap the initial task creation by manually scheduling the drain
        if (_numberOfNestedTaskFrames === 0 && _microTaskQueue.length === 0) {
            // We are not running in Task, so we need to kickstart the microtask queue.
            if (!nativeMicroTaskQueuePromise) {
                if (global[symbolPromise]) {
                    nativeMicroTaskQueuePromise = global[symbolPromise].resolve(0);
                }
            }
            if (nativeMicroTaskQueuePromise) {
                var nativeThen = nativeMicroTaskQueuePromise[symbolThen];
                if (!nativeThen) {
                    // native Promise is not patchable, we need to use `then` directly
                    // issue 1078
                    nativeThen = nativeMicroTaskQueuePromise['then'];
                }
                nativeThen.call(nativeMicroTaskQueuePromise, drainMicroTaskQueue);
            }
            else {
                global[symbolSetTimeout](drainMicroTaskQueue, 0);
            }
        }
        task && _microTaskQueue.push(task);
    }
    function drainMicroTaskQueue() {
        if (!_isDrainingMicrotaskQueue) {
            _isDrainingMicrotaskQueue = true;
            while (_microTaskQueue.length) {
                var queue = _microTaskQueue;
                _microTaskQueue = [];
                for (var i = 0; i < queue.length; i++) {
                    var task = queue[i];
                    try {
                        task.zone.runTask(task, null, null);
                    }
                    catch (error) {
                        _api.onUnhandledError(error);
                    }
                }
            }
            _api.microtaskDrainDone();
            _isDrainingMicrotaskQueue = false;
        }
    }
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    ///  BOOTSTRAP
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    var NO_ZONE = { name: 'NO ZONE' };
    var notScheduled = 'notScheduled', scheduling = 'scheduling', scheduled = 'scheduled', running = 'running', canceling = 'canceling', unknown = 'unknown';
    var microTask = 'microTask', macroTask = 'macroTask', eventTask = 'eventTask';
    var patches = {};
    var _api = {
        symbol: __symbol__,
        currentZoneFrame: function () { return _currentZoneFrame; },
        onUnhandledError: noop,
        microtaskDrainDone: noop,
        scheduleMicroTask: scheduleMicroTask,
        showUncaughtError: function () { return !Zone[__symbol__('ignoreConsoleErrorUncaughtError')]; },
        patchEventTarget: function () { return []; },
        patchOnProperties: noop,
        patchMethod: function () { return noop; },
        bindArguments: function () { return []; },
        patchThen: function () { return noop; },
        setNativePromise: function (NativePromise) {
            // sometimes NativePromise.resolve static function
            // is not ready yet, (such as core-js/es6.promise)
            // so we need to check here.
            if (NativePromise && typeof NativePromise.resolve === 'function') {
                nativeMicroTaskQueuePromise = NativePromise.resolve(0);
            }
        },
    };
    var _currentZoneFrame = { parent: null, zone: new Zone(null, null) };
    var _currentTask = null;
    var _numberOfNestedTaskFrames = 0;
    function noop() { }
    function __symbol__(name) {
        return '__zone_symbol__' + name;
    }
    performanceMeasure('Zone', 'Zone');
    return global['Zone'] = Zone;
})(typeof window !== 'undefined' && window || typeof self !== 'undefined' && self || global);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiem9uZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3BsYXRmb3Jtcy9pb3MvYnVpbGQvRGVidWctaXBob25lc2ltdWxhdG9yL0NoYXR2ZXJzaXR5QXBwLmFwcC9hcHAvdG5zX21vZHVsZXMvem9uZS5qcy9saWIvem9uZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0dBTUc7QUFxbkJILElBQU0sSUFBSSxHQUFhLENBQUMsVUFBUyxNQUFXO0lBQzFDLElBQU0sV0FBVyxHQUNiLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUMxQixTQUFTLElBQUksQ0FBQyxJQUFZO1FBQ3hCLFdBQVcsSUFBSSxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xFLENBQUM7SUFDRCxTQUFTLGtCQUFrQixDQUFDLElBQVksRUFBRSxLQUFhO1FBQ3JELFdBQVcsSUFBSSxXQUFXLENBQUMsU0FBUyxDQUFDLElBQUksV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMvRSxDQUFDO0lBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2IsSUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFDLENBQUMsd0NBQXdDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQztJQUNuRixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtRQUNsQix3RUFBd0U7UUFDeEUsMEVBQTBFO1FBQzFFLGlFQUFpRTtRQUNqRSxlQUFlO1FBQ2YsZ0VBQWdFO1FBQ2hFLG9FQUFvRTtRQUNwRSxzRkFBc0Y7UUFDdEYsMEVBQTBFO1FBQzFFLDZFQUE2RTtRQUM3RSxJQUFJLGNBQWMsSUFBSSxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxVQUFVLEtBQUssVUFBVSxFQUFFO1lBQ3JFLE1BQU0sSUFB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YUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUN4RDtRQUNILENBQUM7S0FDRixDQUFDO0lBQ0YsSUFBSSxpQkFBaUIsR0FBZSxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBQyxDQUFDO0lBQy9FLElBQUksWUFBWSxHQUFjLElBQUksQ0FBQztJQUNuQyxJQUFJLHlCQUF5QixHQUFHLENBQUMsQ0FBQztJQUVsQyxTQUFTLElBQUksS0FBSSxDQUFDO0lBRWxCLFNBQVMsVUFBVSxDQUFDLElBQVk7UUFDOUIsT0FBTyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7SUFDbEMsQ0FBQztJQUVELGtCQUFrQixDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztJQUNuQyxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDL0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxNQUFNLEtBQUssV0FBVyxJQUFJLE1BQU0sSUFBSSxPQUFPLElBQUksS0FBSyxXQUFXLElBQUksSUFBSSxJQUFJLE1BQU0sQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuXG4vKipcbiAqIFN1cHByZXNzIGNsb3N1cmUgY29tcGlsZXIgZXJyb3JzIGFib3V0IHVua25vd24gJ2dsb2JhbCcgdmFyaWFibGVcbiAqIEBmaWxlb3ZlcnZpZXdcbiAqIEBzdXBwcmVzcyB7dW5kZWZpbmVkVmFyc31cbiAqL1xuXG4vKipcbiAqIFpvbmUgaXMgYSBtZWNoYW5pc20gZm9yIGludGVyY2VwdGluZyBhbmQga2VlcGluZyB0cmFjayBvZiBhc3luY2hyb25vdXMgd29yay5cbiAqXG4gKiBBIFpvbmUgaXMgYSBnbG9iYWwgb2JqZWN0IHdoaWNoIGlzIGNvbmZpZ3VyZWQgd2l0aCBydWxlcyBhYm91dCBob3cgdG8gaW50ZXJjZXB0IGFuZCBrZWVwIHRyYWNrXG4gKiBvZiB0aGUgYXN5bmNocm9ub3VzIGNhbGxiYWNrcy4gWm9uZSBoYXMgdGhlc2UgcmVzcG9uc2liaWxpdGllczpcbiAqXG4gKiAxLiBJbnRlcmNlcHQgYXN5bmNocm9ub3VzIHRhc2sgc2NoZWR1bGluZ1xuICogMi4gV3JhcCBjYWxsYmFja3MgZm9yIGVycm9yLWhhbmRsaW5nIGFuZCB6b25lIHRyYWNraW5nIGFjcm9zcyBhc3luYyBvcGVyYXRpb25zLlxuICogMy4gUHJvdmlkZSBhIHdheSB0byBhdHRhY2ggZGF0YSB0byB6b25lc1xuICogNC4gUHJvdmlkZSBhIGNvbnRleHQgc3BlY2lmaWMgbGFzdCBmcmFtZSBlcnJvciBoYW5kbGluZ1xuICogNS4gKEludGVyY2VwdCBibG9ja2luZyBtZXRob2RzKVxuICpcbiAqIEEgem9uZSBieSBpdHNlbGYgZG9lcyBub3QgZG8gYW55dGhpbmcsIGluc3RlYWQgaXQgcmVsaWVzIG9uIHNvbWUgb3RoZXIgY29kZSB0byByb3V0ZSBleGlzdGluZ1xuICogcGxhdGZvcm0gQVBJIHRocm91Z2ggaXQuIChUaGUgem9uZSBsaWJyYXJ5IHNoaXBzIHdpdGggY29kZSB3aGljaCBtb25rZXkgcGF0Y2hlcyBhbGwgb2YgdGhlXG4gKiBicm93c2VycydzIGFzeW5jaHJvbm91cyBBUEkgYW5kIHJlZGlyZWN0cyB0aGVtIHRocm91Z2ggdGhlIHpvbmUgZm9yIGludGVyY2VwdGlvbi4pXG4gKlxuICogSW4gaXRzIHNpbXBsZXN0IGZvcm0gYSB6b25lIGFsbG93cyBvbmUgdG8gaW50ZXJjZXB0IHRoZSBzY2hlZHVsaW5nIGFuZCBjYWxsaW5nIG9mIGFzeW5jaHJvbm91c1xuICogb3BlcmF0aW9ucywgYW5kIGV4ZWN1dGUgYWRkaXRpb25hbCBjb2RlIGJlZm9yZSBhcyB3ZWxsIGFzIGFmdGVyIHRoZSBhc3luY2hyb25vdXMgdGFzay4gVGhlIHJ1bGVzXG4gKiBvZiBpbnRlcmNlcHRpb24gYXJlIGNvbmZpZ3VyZWQgdXNpbmcgW1pvbmVDb25maWddLiBUaGVyZSBjYW4gYmUgbWFueSBkaWZmZXJlbnQgem9uZSBpbnN0YW5jZXMgaW5cbiAqIGEgc3lzdGVtLCBidXQgb25seSBvbmUgem9uZSBpcyBhY3RpdmUgYXQgYW55IGdpdmVuIHRpbWUgd2hpY2ggY2FuIGJlIHJldHJpZXZlZCB1c2luZ1xuICogW1pvbmUjY3VycmVudF0uXG4gKlxuICpcbiAqXG4gKiAjIyBDYWxsYmFjayBXcmFwcGluZ1xuICpcbiAqIEFuIGltcG9ydGFudCBhc3BlY3Qgb2YgdGhlIHpvbmVzIGlzIHRoYXQgdGhleSBzaG91bGQgcGVyc2lzdCBhY3Jvc3MgYXN5bmNocm9ub3VzIG9wZXJhdGlvbnMuIFRvXG4gKiBhY2hpZXZlIHRoaXMsIHdoZW4gYSBmdXR1cmUgd29yayBpcyBzY2hlZHVsZWQgdGhyb3VnaCBhc3luYyBBUEksIGl0IGlzIG5lY2Vzc2FyeSB0byBjYXB0dXJlLCBhbmRcbiAqIHN1YnNlcXVlbnRseSByZXN0b3JlIHRoZSBjdXJyZW50IHpvbmUuIEZvciBleGFtcGxlIGlmIGEgY29kZSBpcyBydW5uaW5nIGluIHpvbmUgYGJgIGFuZCBpdFxuICogaW52b2tlcyBgc2V0VGltZW91dGAgdG8gc2NoZWR1bGVUYXNrIHdvcmsgbGF0ZXIsIHRoZSBgc2V0VGltZW91dGAgbWV0aG9kIG5lZWRzIHRvIDEpIGNhcHR1cmUgdGhlXG4gKiBjdXJyZW50IHpvbmUgYW5kIDIpIHdyYXAgdGhlIGB3cmFwQ2FsbGJhY2tgIGluIGNvZGUgd2hpY2ggd2lsbCByZXN0b3JlIHRoZSBjdXJyZW50IHpvbmUgYGJgIG9uY2VcbiAqIHRoZSB3cmFwQ2FsbGJhY2sgZXhlY3V0ZXMuIEluIHRoaXMgd2F5IHRoZSBydWxlcyB3aGljaCBnb3Zlcm4gdGhlIGN1cnJlbnQgY29kZSBhcmUgcHJlc2VydmVkIGluXG4gKiBhbGwgZnV0dXJlIGFzeW5jaHJvbm91cyB0YXNrcy4gVGhlcmUgY291bGQgYmUgYSBkaWZmZXJlbnQgem9uZSBgY2Agd2hpY2ggaGFzIGRpZmZlcmVudCBydWxlcyBhbmRcbiAqIGlzIGFzc29jaWF0ZWQgd2l0aCBkaWZmZXJlbnQgYXN5bmNocm9ub3VzIHRhc2tzLiBBcyB0aGVzZSB0YXNrcyBhcmUgcHJvY2Vzc2VkLCBlYWNoIGFzeW5jaHJvbm91c1xuICogd3JhcENhbGxiYWNrIGNvcnJlY3RseSByZXN0b3JlcyB0aGUgY29ycmVjdCB6b25lLCBhcyB3ZWxsIGFzIHByZXNlcnZlcyB0aGUgem9uZSBmb3IgZnV0dXJlXG4gKiBhc3luY2hyb25vdXMgY2FsbGJhY2tzLlxuICpcbiAqIEV4YW1wbGU6IFN1cHBvc2UgYSBicm93c2VyIHBhZ2UgY29uc2lzdCBvZiBhcHBsaWNhdGlvbiBjb2RlIGFzIHdlbGwgYXMgdGhpcmQtcGFydHlcbiAqIGFkdmVydGlzZW1lbnQgY29kZS4gKFRoZXNlIHR3byBjb2RlIGJhc2VzIGFyZSBpbmRlcGVuZGVudCwgZGV2ZWxvcGVkIGJ5IGRpZmZlcmVudCBtdXR1YWxseVxuICogdW5hd2FyZSBkZXZlbG9wZXJzLikgVGhlIGFwcGxpY2F0aW9uIGNvZGUgbWF5IGJlIGludGVyZXN0ZWQgaW4gZG9pbmcgZ2xvYmFsIGVycm9yIGhhbmRsaW5nIGFuZFxuICogc28gaXQgY29uZmlndXJlcyB0aGUgYGFwcGAgem9uZSB0byBzZW5kIGFsbCBvZiB0aGUgZXJyb3JzIHRvIHRoZSBzZXJ2ZXIgZm9yIGFuYWx5c2lzLCBhbmQgdGhlblxuICogZXhlY3V0ZXMgdGhlIGFwcGxpY2F0aW9uIGluIHRoZSBgYXBwYCB6b25lLiBUaGUgYWR2ZXJ0aXNpbmcgY29kZSBpcyBpbnRlcmVzdGVkIGluIHRoZSBzYW1lXG4gKiBlcnJvciBwcm9jZXNzaW5nIGJ1dCBpdCBuZWVkcyB0byBzZW5kIHRoZSBlcnJvcnMgdG8gYSBkaWZmZXJlbnQgdGhpcmQtcGFydHkuIFNvIGl0IGNyZWF0ZXMgdGhlXG4gKiBgYWRzYCB6b25lIHdpdGggYSBkaWZmZXJlbnQgZXJyb3IgaGFuZGxlci4gTm93IGJvdGggYWR2ZXJ0aXNpbmcgYXMgd2VsbCBhcyBhcHBsaWNhdGlvbiBjb2RlXG4gKiBjcmVhdGUgbWFueSBhc3luY2hyb25vdXMgb3BlcmF0aW9ucywgYnV0IHRoZSBbWm9uZV0gd2lsbCBlbnN1cmUgdGhhdCBhbGwgb2YgdGhlIGFzeW5jaHJvbm91c1xuICogb3BlcmF0aW9ucyBjcmVhdGVkIGZyb20gdGhlIGFwcGxpY2F0aW9uIGNvZGUgd2lsbCBleGVjdXRlIGluIGBhcHBgIHpvbmUgd2l0aCBpdHMgZXJyb3JcbiAqIGhhbmRsZXIgYW5kIGFsbCBvZiB0aGUgYWR2ZXJ0aXNlbWVudCBjb2RlIHdpbGwgZXhlY3V0ZSBpbiB0aGUgYGFkc2Agem9uZSB3aXRoIGl0cyBlcnJvciBoYW5kbGVyLlxuICogVGhpcyB3aWxsIG5vdCBvbmx5IHdvcmsgZm9yIHRoZSBhc3luYyBvcGVyYXRpb25zIGNyZWF0ZWQgZGlyZWN0bHksIGJ1dCBhbHNvIGZvciBhbGwgc3Vic2VxdWVudFxuICogYXN5bmNocm9ub3VzIG9wZXJhdGlvbnMuXG4gKlxuICogSWYgeW91IHRoaW5rIG9mIGNoYWluIG9mIGFzeW5jaHJvbm91cyBvcGVyYXRpb25zIGFzIGEgdGhyZWFkIG9mIGV4ZWN1dGlvbiAoYml0IG9mIGEgc3RyZXRjaClcbiAqIHRoZW4gW1pvbmUjY3VycmVudF0gd2lsbCBhY3QgYXMgYSB0aHJlYWQgbG9jYWwgdmFyaWFibGUuXG4gKlxuICpcbiAqXG4gKiAjIyBBc3luY2hyb25vdXMgb3BlcmF0aW9uIHNjaGVkdWxpbmdcbiAqXG4gKiBJbiBhZGRpdGlvbiB0byB3cmFwcGluZyB0aGUgY2FsbGJhY2tzIHRvIHJlc3RvcmUgdGhlIHpvbmUsIGFsbCBvcGVyYXRpb25zIHdoaWNoIGNhdXNlIGFcbiAqIHNjaGVkdWxpbmcgb2Ygd29yayBmb3IgbGF0ZXIgYXJlIHJvdXRlZCB0aHJvdWdoIHRoZSBjdXJyZW50IHpvbmUgd2hpY2ggaXMgYWxsb3dlZCB0byBpbnRlcmNlcHRcbiAqIHRoZW0gYnkgYWRkaW5nIHdvcmsgYmVmb3JlIG9yIGFmdGVyIHRoZSB3cmFwQ2FsbGJhY2sgYXMgd2VsbCBhcyB1c2luZyBkaWZmZXJlbnQgbWVhbnMgb2ZcbiAqIGFjaGlldmluZyB0aGUgcmVxdWVzdC4gKFVzZWZ1bCBmb3IgdW5pdCB0ZXN0aW5nLCBvciB0cmFja2luZyBvZiByZXF1ZXN0cykuIEluIHNvbWUgaW5zdGFuY2VzXG4gKiBzdWNoIGFzIGBzZXRUaW1lb3V0YCB0aGUgd3JhcHBpbmcgb2YgdGhlIHdyYXBDYWxsYmFjayBhbmQgc2NoZWR1bGluZyBpcyBkb25lIGluIHRoZSBzYW1lXG4gKiB3cmFwQ2FsbGJhY2ssIGJ1dCB0aGVyZSBhcmUgb3RoZXIgZXhhbXBsZXMgc3VjaCBhcyBgUHJvbWlzZXNgIHdoZXJlIHRoZSBgdGhlbmAgd3JhcENhbGxiYWNrIGlzXG4gKiB3cmFwcGVkLCBidXQgdGhlIGV4ZWN1dGlvbiBvZiBgdGhlbmAgaXMgdHJpZ2dlcmVkIGJ5IGBQcm9taXNlYCBzY2hlZHVsaW5nIGByZXNvbHZlYCB3b3JrLlxuICpcbiAqIEZ1bmRhbWVudGFsbHkgdGhlcmUgYXJlIHRocmVlIGtpbmRzIG9mIHRhc2tzIHdoaWNoIGNhbiBiZSBzY2hlZHVsZWQ6XG4gKlxuICogMS4gW01pY3JvVGFza10gdXNlZCBmb3IgZG9pbmcgd29yayByaWdodCBhZnRlciB0aGUgY3VycmVudCB0YXNrLiBUaGlzIGlzIG5vbi1jYW5jZWxhYmxlIHdoaWNoIGlzXG4gKiAgICBndWFyYW50ZWVkIHRvIHJ1biBleGFjdGx5IG9uY2UgYW5kIGltbWVkaWF0ZWx5LlxuICogMi4gW01hY3JvVGFza10gdXNlZCBmb3IgZG9pbmcgd29yayBsYXRlci4gU3VjaCBhcyBgc2V0VGltZW91dGAuIFRoaXMgaXMgdHlwaWNhbGx5IGNhbmNlbGFibGVcbiAqICAgIHdoaWNoIGlzIGd1YXJhbnRlZWQgdG8gZXhlY3V0ZSBhdCBsZWFzdCBvbmNlIGFmdGVyIHNvbWUgd2VsbCB1bmRlcnN0b29kIGRlbGF5LlxuICogMy4gW0V2ZW50VGFza10gdXNlZCBmb3IgbGlzdGVuaW5nIG9uIHNvbWUgZnV0dXJlIGV2ZW50LiBUaGlzIG1heSBleGVjdXRlIHplcm8gb3IgbW9yZSB0aW1lcywgd2l0aFxuICogICAgYW4gdW5rbm93biBkZWxheS5cbiAqXG4gKiBFYWNoIGFzeW5jaHJvbm91cyBBUEkgaXMgbW9kZWxlZCBhbmQgcm91dGVkIHRocm91Z2ggb25lIG9mIHRoZXNlIEFQSXMuXG4gKlxuICpcbiAqICMjIyBbTWljcm9UYXNrXVxuICpcbiAqIFtNaWNyb1Rhc2tdcyByZXByZXNlbnQgd29yayB3aGljaCB3aWxsIGJlIGRvbmUgaW4gY3VycmVudCBWTSB0dXJuIGFzIHNvb24gYXMgcG9zc2libGUsIGJlZm9yZSBWTVxuICogeWllbGRpbmcuXG4gKlxuICpcbiAqICMjIyBbVGltZXJUYXNrXVxuICpcbiAqIFtUaW1lclRhc2tdcyByZXByZXNlbnQgd29yayB3aGljaCB3aWxsIGJlIGRvbmUgYWZ0ZXIgc29tZSBkZWxheS4gKFNvbWV0aW1lcyB0aGUgZGVsYXkgaXNcbiAqIGFwcHJveGltYXRlIHN1Y2ggYXMgb24gbmV4dCBhdmFpbGFibGUgYW5pbWF0aW9uIGZyYW1lKS4gVHlwaWNhbGx5IHRoZXNlIG1ldGhvZHMgaW5jbHVkZTpcbiAqIGBzZXRUaW1lb3V0YCwgYHNldEltbWVkaWF0ZWAsIGBzZXRJbnRlcnZhbGAsIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgLCBhbmQgYWxsIGJyb3dzZXIgc3BlY2lmaWNcbiAqIHZhcmlhbnRzLlxuICpcbiAqXG4gKiAjIyMgW0V2ZW50VGFza11cbiAqXG4gKiBbRXZlbnRUYXNrXXMgcmVwcmVzZW50IGEgcmVxdWVzdCB0byBjcmVhdGUgYSBsaXN0ZW5lciBvbiBhbiBldmVudC4gVW5saWtlIHRoZSBvdGhlciB0YXNrXG4gKiBldmVudHMgdGhleSBtYXkgbmV2ZXIgYmUgZXhlY3V0ZWQsIGJ1dCB0eXBpY2FsbHkgZXhlY3V0ZSBtb3JlIHRoYW4gb25jZS4gVGhlcmUgaXMgbm8gcXVldWUgb2ZcbiAqIGV2ZW50cywgcmF0aGVyIHRoZWlyIGNhbGxiYWNrcyBhcmUgdW5wcmVkaWN0YWJsZSBib3RoIGluIG9yZGVyIGFuZCB0aW1lLlxuICpcbiAqXG4gKiAjIyBHbG9iYWwgRXJyb3IgSGFuZGxpbmdcbiAqXG4gKlxuICogIyMgQ29tcG9zYWJpbGl0eVxuICpcbiAqIFpvbmVzIGNhbiBiZSBjb21wb3NlZCB0b2dldGhlciB0aHJvdWdoIFtab25lLmZvcmsoKV0uIEEgY2hpbGQgem9uZSBtYXkgY3JlYXRlIGl0cyBvd24gc2V0IG9mXG4gKiBydWxlcy4gQSBjaGlsZCB6b25lIGlzIGV4cGVjdGVkIHRvIGVpdGhlcjpcbiAqXG4gKiAxLiBEZWxlZ2F0ZSB0aGUgaW50ZXJjZXB0aW9uIHRvIGEgcGFyZW50IHpvbmUsIGFuZCBvcHRpb25hbGx5IGFkZCBiZWZvcmUgYW5kIGFmdGVyIHdyYXBDYWxsYmFja1xuICogICAgaG9va3MuXG4gKiAyLiBQcm9jZXNzIHRoZSByZXF1ZXN0IGl0c2VsZiB3aXRob3V0IGRlbGVnYXRpb24uXG4gKlxuICogQ29tcG9zYWJpbGl0eSBhbGxvd3Mgem9uZXMgdG8ga2VlcCB0aGVpciBjb25jZXJucyBjbGVhbi4gRm9yIGV4YW1wbGUgYSB0b3AgbW9zdCB6b25lIG1heSBjaG9vc2VcbiAqIHRvIGhhbmRsZSBlcnJvciBoYW5kbGluZywgd2hpbGUgY2hpbGQgem9uZXMgbWF5IGNob29zZSB0byBkbyB1c2VyIGFjdGlvbiB0cmFja2luZy5cbiAqXG4gKlxuICogIyMgUm9vdCBab25lXG4gKlxuICogQXQgdGhlIHN0YXJ0IHRoZSBicm93c2VyIHdpbGwgcnVuIGluIGEgc3BlY2lhbCByb290IHpvbmUsIHdoaWNoIGlzIGNvbmZpZ3VyZWQgdG8gYmVoYXZlIGV4YWN0bHlcbiAqIGxpa2UgdGhlIHBsYXRmb3JtLCBtYWtpbmcgYW55IGV4aXN0aW5nIGNvZGUgd2hpY2ggaXMgbm90IHpvbmUtYXdhcmUgYmVoYXZlIGFzIGV4cGVjdGVkLiBBbGxcbiAqIHpvbmVzIGFyZSBjaGlsZHJlbiBvZiB0aGUgcm9vdCB6b25lLlxuICpcbiAqL1xuaW50ZXJmYWNlIFpvbmUge1xuICAvKipcbiAgICpcbiAgICogQHJldHVybnMge1pvbmV9IFRoZSBwYXJlbnQgWm9uZS5cbiAgICovXG4gIHBhcmVudDogWm9uZXxudWxsO1xuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIFpvbmUgbmFtZSAodXNlZnVsIGZvciBkZWJ1Z2dpbmcpXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIGBrZXlgLlxuICAgKlxuICAgKiBJZiB0aGUgY3VycmVudCB6b25lIGRvZXMgbm90IGhhdmUgYSBrZXksIHRoZSByZXF1ZXN0IGlzIGRlbGVnYXRlZCB0byB0aGUgcGFyZW50IHpvbmUuIFVzZVxuICAgKiBbWm9uZVNwZWMucHJvcGVydGllc10gdG8gY29uZmlndXJlIHRoZSBzZXQgb2YgcHJvcGVydGllcyBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgem9uZS5cbiAgICpcbiAgICogQHBhcmFtIGtleSBUaGUga2V5IHRvIHJldHJpZXZlLlxuICAgKiBAcmV0dXJucyB7YW55fSBUaGUgdmFsdWUgZm9yIHRoZSBrZXksIG9yIGB1bmRlZmluZWRgIGlmIG5vdCBmb3VuZC5cbiAgICovXG4gIGdldChrZXk6IHN0cmluZyk6IGFueTtcbiAgLyoqXG4gICAqIFJldHVybnMgYSBab25lIHdoaWNoIGRlZmluZXMgYSBga2V5YC5cbiAgICpcbiAgICogUmVjdXJzaXZlbHkgc2VhcmNoIHRoZSBwYXJlbnQgWm9uZSB1bnRpbCBhIFpvbmUgd2hpY2ggaGFzIGEgcHJvcGVydHkgYGtleWAgaXMgZm91bmQuXG4gICAqXG4gICAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byB1c2UgZm9yIGlkZW50aWZpY2F0aW9uIG9mIHRoZSByZXR1cm5lZCB6b25lLlxuICAgKiBAcmV0dXJucyB7Wm9uZX0gVGhlIFpvbmUgd2hpY2ggZGVmaW5lcyB0aGUgYGtleWAsIGBudWxsYCBpZiBub3QgZm91bmQuXG4gICAqL1xuICBnZXRab25lV2l0aChrZXk6IHN0cmluZyk6IFpvbmV8bnVsbDtcbiAgLyoqXG4gICAqIFVzZWQgdG8gY3JlYXRlIGEgY2hpbGQgem9uZS5cbiAgICpcbiAgICogQHBhcmFtIHpvbmVTcGVjIEEgc2V0IG9mIHJ1bGVzIHdoaWNoIHRoZSBjaGlsZCB6b25lIHNob3VsZCBmb2xsb3cuXG4gICAqIEByZXR1cm5zIHtab25lfSBBIG5ldyBjaGlsZCB6b25lLlxuICAgKi9cbiAgZm9yayh6b25lU3BlYzogWm9uZVNwZWMpOiBab25lO1xuICAvKipcbiAgICogV3JhcHMgYSBjYWxsYmFjayBmdW5jdGlvbiBpbiBhIG5ldyBmdW5jdGlvbiB3aGljaCB3aWxsIHByb3Blcmx5IHJlc3RvcmUgdGhlIGN1cnJlbnQgem9uZSB1cG9uXG4gICAqIGludm9jYXRpb24uXG4gICAqXG4gICAqIFRoZSB3cmFwcGVkIGZ1bmN0aW9uIHdpbGwgcHJvcGVybHkgZm9yd2FyZCBgdGhpc2AgYXMgd2VsbCBhcyBgYXJndW1lbnRzYCB0byB0aGUgYGNhbGxiYWNrYC5cbiAgICpcbiAgICogQmVmb3JlIHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkIHRoZSB6b25lIGNhbiBpbnRlcmNlcHQgdGhlIGBjYWxsYmFja2AgYnkgZGVjbGFyaW5nXG4gICAqIFtab25lU3BlYy5vbkludGVyY2VwdF0uXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSB3cmFwcGVkIGluIHRoZSB6b25lLlxuICAgKiBAcGFyYW0gc291cmNlIEEgdW5pcXVlIGRlYnVnIGxvY2F0aW9uIG9mIHRoZSBBUEkgYmVpbmcgd3JhcHBlZC5cbiAgICogQHJldHVybnMge2Z1bmN0aW9uKCk6ICp9IEEgZnVuY3Rpb24gd2hpY2ggd2lsbCBpbnZva2UgdGhlIGBjYWxsYmFja2AgdGhyb3VnaCBbWm9uZS5ydW5HdWFyZGVkXS5cbiAgICovXG4gIHdyYXA8RiBleHRlbmRzIEZ1bmN0aW9uPihjYWxsYmFjazogRiwgc291cmNlOiBzdHJpbmcpOiBGO1xuICAvKipcbiAgICogSW52b2tlcyBhIGZ1bmN0aW9uIGluIGEgZ2l2ZW4gem9uZS5cbiAgICpcbiAgICogVGhlIGludm9jYXRpb24gb2YgYGNhbGxiYWNrYCBjYW4gYmUgaW50ZXJjZXB0ZWQgYnkgZGVjbGFyaW5nIFtab25lU3BlYy5vbkludm9rZV0uXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuICAgKiBAcGFyYW0gYXBwbHlUaGlzXG4gICAqIEBwYXJhbSBhcHBseUFyZ3NcbiAgICogQHBhcmFtIHNvdXJjZSBBIHVuaXF1ZSBkZWJ1ZyBsb2NhdGlvbiBvZiB0aGUgQVBJIGJlaW5nIGludm9rZWQuXG4gICAqIEByZXR1cm5zIHthbnl9IFZhbHVlIGZyb20gdGhlIGBjYWxsYmFja2AgZnVuY3Rpb24uXG4gICAqL1xuICBydW48VD4oY2FsbGJhY2s6IEZ1bmN0aW9uLCBhcHBseVRoaXM/OiBhbnksIGFwcGx5QXJncz86IGFueVtdLCBzb3VyY2U/OiBzdHJpbmcpOiBUO1xuICAvKipcbiAgICogSW52b2tlcyBhIGZ1bmN0aW9uIGluIGEgZ2l2ZW4gem9uZSBhbmQgY2F0Y2hlcyBhbnkgZXhjZXB0aW9ucy5cbiAgICpcbiAgICogQW55IGV4Y2VwdGlvbnMgdGhyb3duIHdpbGwgYmUgZm9yd2FyZGVkIHRvIFtab25lLkhhbmRsZUVycm9yXS5cbiAgICpcbiAgICogVGhlIGludm9jYXRpb24gb2YgYGNhbGxiYWNrYCBjYW4gYmUgaW50ZXJjZXB0ZWQgYnkgZGVjbGFyaW5nIFtab25lU3BlYy5vbkludm9rZV0uIFRoZVxuICAgKiBoYW5kbGluZyBvZiBleGNlcHRpb25zIGNhbiBiZSBpbnRlcmNlcHRlZCBieSBkZWNsYXJpbmcgW1pvbmVTcGVjLmhhbmRsZUVycm9yXS5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4gICAqIEBwYXJhbSBhcHBseVRoaXNcbiAgICogQHBhcmFtIGFwcGx5QXJnc1xuICAgKiBAcGFyYW0gc291cmNlIEEgdW5pcXVlIGRlYnVnIGxvY2F0aW9uIG9mIHRoZSBBUEkgYmVpbmcgaW52b2tlZC5cbiAgICogQHJldHVybnMge2FueX0gVmFsdWUgZnJvbSB0aGUgYGNhbGxiYWNrYCBmdW5jdGlvbi5cbiAgICovXG4gIHJ1bkd1YXJkZWQ8VD4oY2FsbGJhY2s6IEZ1bmN0aW9uLCBhcHBseVRoaXM/OiBhbnksIGFwcGx5QXJncz86IGFueVtdLCBzb3VyY2U/OiBzdHJpbmcpOiBUO1xuICAvKipcbiAgICogRXhlY3V0ZSB0aGUgVGFzayBieSByZXN0b3JpbmcgdGhlIFtab25lLmN1cnJlbnRUYXNrXSBpbiB0aGUgVGFzaydzIHpvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB0YXNrIHRvIHJ1blxuICAgKiBAcGFyYW0gYXBwbHlUaGlzXG4gICAqIEBwYXJhbSBhcHBseUFyZ3NcbiAgICogQHJldHVybnMgeyp9XG4gICAqL1xuICBydW5UYXNrKHRhc2s6IFRhc2ssIGFwcGx5VGhpcz86IGFueSwgYXBwbHlBcmdzPzogYW55KTogYW55O1xuXG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhIE1pY3JvVGFzay5cbiAgICpcbiAgICogQHBhcmFtIHNvdXJjZVxuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICogQHBhcmFtIGRhdGFcbiAgICogQHBhcmFtIGN1c3RvbVNjaGVkdWxlXG4gICAqL1xuICBzY2hlZHVsZU1pY3JvVGFzayhcbiAgICAgIHNvdXJjZTogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24sIGRhdGE/OiBUYXNrRGF0YSxcbiAgICAgIGN1c3RvbVNjaGVkdWxlPzogKHRhc2s6IFRhc2spID0+IHZvaWQpOiBNaWNyb1Rhc2s7XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlIGEgTWFjcm9UYXNrLlxuICAgKlxuICAgKiBAcGFyYW0gc291cmNlXG4gICAqIEBwYXJhbSBjYWxsYmFja1xuICAgKiBAcGFyYW0gZGF0YVxuICAgKiBAcGFyYW0gY3VzdG9tU2NoZWR1bGVcbiAgICogQHBhcmFtIGN1c3RvbUNhbmNlbFxuICAgKi9cbiAgc2NoZWR1bGVNYWNyb1Rhc2soXG4gICAgICBzb3VyY2U6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uLCBkYXRhPzogVGFza0RhdGEsIGN1c3RvbVNjaGVkdWxlPzogKHRhc2s6IFRhc2spID0+IHZvaWQsXG4gICAgICBjdXN0b21DYW5jZWw/OiAodGFzazogVGFzaykgPT4gdm9pZCk6IE1hY3JvVGFzaztcblxuICAvKipcbiAgICogU2NoZWR1bGUgYW4gRXZlbnRUYXNrLlxuICAgKlxuICAgKiBAcGFyYW0gc291cmNlXG4gICAqIEBwYXJhbSBjYWxsYmFja1xuICAgKiBAcGFyYW0gZGF0YVxuICAgKiBAcGFyYW0gY3VzdG9tU2NoZWR1bGVcbiAgICogQHBhcmFtIGN1c3RvbUNhbmNlbFxuICAgKi9cbiAgc2NoZWR1bGVFdmVudFRhc2soXG4gICAgICBzb3VyY2U6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uLCBkYXRhPzogVGFza0RhdGEsIGN1c3RvbVNjaGVkdWxlPzogKHRhc2s6IFRhc2spID0+IHZvaWQsXG4gICAgICBjdXN0b21DYW5jZWw/OiAodGFzazogVGFzaykgPT4gdm9pZCk6IEV2ZW50VGFzaztcblxuICAvKipcbiAgICogU2NoZWR1bGUgYW4gZXhpc3RpbmcgVGFzay5cbiAgICpcbiAgICogVXNlZnVsIGZvciByZXNjaGVkdWxpbmcgYSB0YXNrIHdoaWNoIHdhcyBhbHJlYWR5IGNhbmNlbGVkLlxuICAgKlxuICAgKiBAcGFyYW0gdGFza1xuICAgKi9cbiAgc2NoZWR1bGVUYXNrPFQgZXh0ZW5kcyBUYXNrPih0YXNrOiBUKTogVDtcblxuICAvKipcbiAgICogQWxsb3dzIHRoZSB6b25lIHRvIGludGVyY2VwdCBjYW5jZWxpbmcgb2Ygc2NoZWR1bGVkIFRhc2suXG4gICAqXG4gICAqIFRoZSBpbnRlcmNlcHRpb24gaXMgY29uZmlndXJlZCB1c2luZyBbWm9uZVNwZWMub25DYW5jZWxUYXNrXS4gVGhlIGRlZmF1bHQgY2FuY2VsZXIgaW52b2tlc1xuICAgKiB0aGUgW1Rhc2suY2FuY2VsRm5dLlxuICAgKlxuICAgKiBAcGFyYW0gdGFza1xuICAgKiBAcmV0dXJucyB7YW55fVxuICAgKi9cbiAgY2FuY2VsVGFzayh0YXNrOiBUYXNrKTogYW55O1xufVxuXG5pbnRlcmZhY2UgWm9uZVR5cGUge1xuICAvKipcbiAgICogQHJldHVybnMge1pvbmV9IFJldHVybnMgdGhlIGN1cnJlbnQgW1pvbmVdLiBUaGUgb25seSB3YXkgdG8gY2hhbmdlXG4gICAqIHRoZSBjdXJyZW50IHpvbmUgaXMgYnkgaW52b2tpbmcgYSBydW4oKSBtZXRob2QsIHdoaWNoIHdpbGwgdXBkYXRlIHRoZSBjdXJyZW50IHpvbmUgZm9yIHRoZVxuICAgKiBkdXJhdGlvbiBvZiB0aGUgcnVuIG1ldGhvZCBjYWxsYmFjay5cbiAgICovXG4gIGN1cnJlbnQ6IFpvbmU7XG4gIC8qKlxuICAgKiBAcmV0dXJucyB7VGFza30gVGhlIHRhc2sgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IGV4ZWN1dGlvbi5cbiAgICovXG4gIGN1cnJlbnRUYXNrOiBUYXNrfG51bGw7XG5cbiAgLyoqXG4gICAqIFZlcmlmeSB0aGF0IFpvbmUgaGFzIGJlZW4gY29ycmVjdGx5IHBhdGNoZWQuIFNwZWNpZmljYWxseSB0aGF0IFByb21pc2UgaXMgem9uZSBhd2FyZS5cbiAgICovXG4gIGFzc2VydFpvbmVQYXRjaGVkKCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqICBSZXR1cm4gdGhlIHJvb3Qgem9uZS5cbiAgICovXG4gIHJvb3Q6IFpvbmU7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfX2xvYWRfcGF0Y2gobmFtZTogc3RyaW5nLCBmbjogX1BhdGNoRm4pOiB2b2lkO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX19zeW1ib2xfXyhuYW1lOiBzdHJpbmcpOiBzdHJpbmc7XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbnR5cGUgX1BhdGNoRm4gPSAoZ2xvYmFsOiBXaW5kb3csIFpvbmU6IFpvbmVUeXBlLCBhcGk6IF9ab25lUHJpdmF0ZSkgPT4gdm9pZDtcblxuLyoqIEBpbnRlcm5hbCAqL1xuaW50ZXJmYWNlIF9ab25lUHJpdmF0ZSB7XG4gIGN1cnJlbnRab25lRnJhbWU6ICgpID0+IF9ab25lRnJhbWU7XG4gIHN5bWJvbDogKG5hbWU6IHN0cmluZykgPT4gc3RyaW5nO1xuICBzY2hlZHVsZU1pY3JvVGFzazogKHRhc2s/OiBNaWNyb1Rhc2spID0+IHZvaWQ7XG4gIG9uVW5oYW5kbGVkRXJyb3I6IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG4gIG1pY3JvdGFza0RyYWluRG9uZTogKCkgPT4gdm9pZDtcbiAgc2hvd1VuY2F1Z2h0RXJyb3I6ICgpID0+IGJvb2xlYW47XG4gIHBhdGNoRXZlbnRUYXJnZXQ6IChnbG9iYWw6IGFueSwgYXBpczogYW55W10sIG9wdGlvbnM/OiBhbnkpID0+IGJvb2xlYW5bXTtcbiAgcGF0Y2hPblByb3BlcnRpZXM6IChvYmo6IGFueSwgcHJvcGVydGllczogc3RyaW5nW118bnVsbCkgPT4gdm9pZDtcbiAgcGF0Y2hUaGVuOiAoY3RybzogRnVuY3Rpb24pID0+IHZvaWQ7XG4gIHNldE5hdGl2ZVByb21pc2U6IChuYXRpdmVQcm9taXNlOiBhbnkpID0+IHZvaWQ7XG4gIHBhdGNoTWV0aG9kOlxuICAgICAgKHRhcmdldDogYW55LCBuYW1lOiBzdHJpbmcsXG4gICAgICAgcGF0Y2hGbjogKGRlbGVnYXRlOiBGdW5jdGlvbiwgZGVsZWdhdGVOYW1lOiBzdHJpbmcsIG5hbWU6IHN0cmluZykgPT5cbiAgICAgICAgICAgKHNlbGY6IGFueSwgYXJnczogYW55W10pID0+IGFueSkgPT4gRnVuY3Rpb24gfCBudWxsO1xuICBiaW5kQXJndW1lbnRzOiAoYXJnczogYW55W10sIHNvdXJjZTogc3RyaW5nKSA9PiBhbnlbXTtcbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuaW50ZXJmYWNlIF9ab25lRnJhbWUge1xuICBwYXJlbnQ6IF9ab25lRnJhbWV8bnVsbDtcbiAgem9uZTogWm9uZTtcbn1cblxuaW50ZXJmYWNlIFVuY2F1Z2h0UHJvbWlzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICB6b25lOiBab25lO1xuICB0YXNrOiBUYXNrO1xuICBwcm9taXNlOiBQcm9taXNlPGFueT47XG4gIHJlamVjdGlvbjogYW55O1xufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgd2F5IHRvIGNvbmZpZ3VyZSB0aGUgaW50ZXJjZXB0aW9uIG9mIHpvbmUgZXZlbnRzLlxuICpcbiAqIE9ubHkgdGhlIGBuYW1lYCBwcm9wZXJ0eSBpcyByZXF1aXJlZCAoYWxsIG90aGVyIGFyZSBvcHRpb25hbCkuXG4gKi9cbmludGVyZmFjZSBab25lU3BlYyB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgem9uZS4gVXNlZnVsIHdoZW4gZGVidWdnaW5nIFpvbmVzLlxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIHNldCBvZiBwcm9wZXJ0aWVzIHRvIGJlIGFzc29jaWF0ZWQgd2l0aCBab25lLiBVc2UgW1pvbmUuZ2V0XSB0byByZXRyaWV2ZSB0aGVtLlxuICAgKi9cbiAgcHJvcGVydGllcz86IHtba2V5OiBzdHJpbmddOiBhbnl9O1xuXG4gIC8qKlxuICAgKiBBbGxvd3MgdGhlIGludGVyY2VwdGlvbiBvZiB6b25lIGZvcmtpbmcuXG4gICAqXG4gICAqIFdoZW4gdGhlIHpvbmUgaXMgYmVpbmcgZm9ya2VkLCB0aGUgcmVxdWVzdCBpcyBmb3J3YXJkZWQgdG8gdGhpcyBtZXRob2QgZm9yIGludGVyY2VwdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHBhcmVudFpvbmVEZWxlZ2F0ZSBEZWxlZ2F0ZSB3aGljaCBwZXJmb3JtcyB0aGUgcGFyZW50IFtab25lU3BlY10gb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gY3VycmVudFpvbmUgVGhlIGN1cnJlbnQgW1pvbmVdIHdoZXJlIHRoZSBjdXJyZW50IGludGVyY2VwdG9yIGhhcyBiZWVuIGRlY2xhcmVkLlxuICAgKiBAcGFyYW0gdGFyZ2V0Wm9uZSBUaGUgW1pvbmVdIHdoaWNoIG9yaWdpbmFsbHkgcmVjZWl2ZWQgdGhlIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB6b25lU3BlYyBUaGUgYXJndW1lbnQgcGFzc2VkIGludG8gdGhlIGBmb3JrYCBtZXRob2QuXG4gICAqL1xuICBvbkZvcms/OlxuICAgICAgKHBhcmVudFpvbmVEZWxlZ2F0ZTogWm9uZURlbGVnYXRlLCBjdXJyZW50Wm9uZTogWm9uZSwgdGFyZ2V0Wm9uZTogWm9uZSxcbiAgICAgICB6b25lU3BlYzogWm9uZVNwZWMpID0+IFpvbmU7XG5cbiAgLyoqXG4gICAqIEFsbG93cyBpbnRlcmNlcHRpb24gb2YgdGhlIHdyYXBwaW5nIG9mIHRoZSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHBhcmVudFpvbmVEZWxlZ2F0ZSBEZWxlZ2F0ZSB3aGljaCBwZXJmb3JtcyB0aGUgcGFyZW50IFtab25lU3BlY10gb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gY3VycmVudFpvbmUgVGhlIGN1cnJlbnQgW1pvbmVdIHdoZXJlIHRoZSBjdXJyZW50IGludGVyY2VwdG9yIGhhcyBiZWVuIGRlY2xhcmVkLlxuICAgKiBAcGFyYW0gdGFyZ2V0Wm9uZSBUaGUgW1pvbmVdIHdoaWNoIG9yaWdpbmFsbHkgcmVjZWl2ZWQgdGhlIHJlcXVlc3QuXG4gICAqIEBwYXJhbSBkZWxlZ2F0ZSBUaGUgYXJndW1lbnQgcGFzc2VkIGludG8gdGhlIGB3cmFwYCBtZXRob2QuXG4gICAqIEBwYXJhbSBzb3VyY2UgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgd3JhcGAgbWV0aG9kLlxuICAgKi9cbiAgb25JbnRlcmNlcHQ/OlxuICAgICAgKHBhcmVudFpvbmVEZWxlZ2F0ZTogWm9uZURlbGVnYXRlLCBjdXJyZW50Wm9uZTogWm9uZSwgdGFyZ2V0Wm9uZTogWm9uZSwgZGVsZWdhdGU6IEZ1bmN0aW9uLFxuICAgICAgIHNvdXJjZTogc3RyaW5nKSA9PiBGdW5jdGlvbjtcblxuICAvKipcbiAgICogQWxsb3dzIGludGVyY2VwdGlvbiBvZiB0aGUgY2FsbGJhY2sgaW52b2NhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHBhcmVudFpvbmVEZWxlZ2F0ZSBEZWxlZ2F0ZSB3aGljaCBwZXJmb3JtcyB0aGUgcGFyZW50IFtab25lU3BlY10gb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gY3VycmVudFpvbmUgVGhlIGN1cnJlbnQgW1pvbmVdIHdoZXJlIHRoZSBjdXJyZW50IGludGVyY2VwdG9yIGhhcyBiZWVuIGRlY2xhcmVkLlxuICAgKiBAcGFyYW0gdGFyZ2V0Wm9uZSBUaGUgW1pvbmVdIHdoaWNoIG9yaWdpbmFsbHkgcmVjZWl2ZWQgdGhlIHJlcXVlc3QuXG4gICAqIEBwYXJhbSBkZWxlZ2F0ZSBUaGUgYXJndW1lbnQgcGFzc2VkIGludG8gdGhlIGBydW5gIG1ldGhvZC5cbiAgICogQHBhcmFtIGFwcGx5VGhpcyBUaGUgYXJndW1lbnQgcGFzc2VkIGludG8gdGhlIGBydW5gIG1ldGhvZC5cbiAgICogQHBhcmFtIGFwcGx5QXJncyBUaGUgYXJndW1lbnQgcGFzc2VkIGludG8gdGhlIGBydW5gIG1ldGhvZC5cbiAgICogQHBhcmFtIHNvdXJjZSBUaGUgYXJndW1lbnQgcGFzc2VkIGludG8gdGhlIGBydW5gIG1ldGhvZC5cbiAgICovXG4gIG9uSW52b2tlPzpcbiAgICAgIChwYXJlbnRab25lRGVsZWdhdGU6IFpvbmVEZWxlZ2F0ZSwgY3VycmVudFpvbmU6IFpvbmUsIHRhcmdldFpvbmU6IFpvbmUsIGRlbGVnYXRlOiBGdW5jdGlvbixcbiAgICAgICBhcHBseVRoaXM6IGFueSwgYXBwbHlBcmdzPzogYW55W10sIHNvdXJjZT86IHN0cmluZykgPT4gYW55O1xuXG4gIC8qKlxuICAgKiBBbGxvd3MgaW50ZXJjZXB0aW9uIG9mIHRoZSBlcnJvciBoYW5kbGluZy5cbiAgICpcbiAgICogQHBhcmFtIHBhcmVudFpvbmVEZWxlZ2F0ZSBEZWxlZ2F0ZSB3aGljaCBwZXJmb3JtcyB0aGUgcGFyZW50IFtab25lU3BlY10gb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gY3VycmVudFpvbmUgVGhlIGN1cnJlbnQgW1pvbmVdIHdoZXJlIHRoZSBjdXJyZW50IGludGVyY2VwdG9yIGhhcyBiZWVuIGRlY2xhcmVkLlxuICAgKiBAcGFyYW0gdGFyZ2V0Wm9uZSBUaGUgW1pvbmVdIHdoaWNoIG9yaWdpbmFsbHkgcmVjZWl2ZWQgdGhlIHJlcXVlc3QuXG4gICAqIEBwYXJhbSBlcnJvciBUaGUgYXJndW1lbnQgcGFzc2VkIGludG8gdGhlIGBoYW5kbGVFcnJvcmAgbWV0aG9kLlxuICAgKi9cbiAgb25IYW5kbGVFcnJvcj86XG4gICAgICAocGFyZW50Wm9uZURlbGVnYXRlOiBab25lRGVsZWdhdGUsIGN1cnJlbnRab25lOiBab25lLCB0YXJnZXRab25lOiBab25lLFxuICAgICAgIGVycm9yOiBhbnkpID0+IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEFsbG93cyBpbnRlcmNlcHRpb24gb2YgdGFzayBzY2hlZHVsaW5nLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50Wm9uZURlbGVnYXRlIERlbGVnYXRlIHdoaWNoIHBlcmZvcm1zIHRoZSBwYXJlbnQgW1pvbmVTcGVjXSBvcGVyYXRpb24uXG4gICAqIEBwYXJhbSBjdXJyZW50Wm9uZSBUaGUgY3VycmVudCBbWm9uZV0gd2hlcmUgdGhlIGN1cnJlbnQgaW50ZXJjZXB0b3IgaGFzIGJlZW4gZGVjbGFyZWQuXG4gICAqIEBwYXJhbSB0YXJnZXRab25lIFRoZSBbWm9uZV0gd2hpY2ggb3JpZ2luYWxseSByZWNlaXZlZCB0aGUgcmVxdWVzdC5cbiAgICogQHBhcmFtIHRhc2sgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgc2NoZWR1bGVUYXNrYCBtZXRob2QuXG4gICAqL1xuICBvblNjaGVkdWxlVGFzaz86XG4gICAgICAocGFyZW50Wm9uZURlbGVnYXRlOiBab25lRGVsZWdhdGUsIGN1cnJlbnRab25lOiBab25lLCB0YXJnZXRab25lOiBab25lLCB0YXNrOiBUYXNrKSA9PiBUYXNrO1xuXG4gIG9uSW52b2tlVGFzaz86XG4gICAgICAocGFyZW50Wm9uZURlbGVnYXRlOiBab25lRGVsZWdhdGUsIGN1cnJlbnRab25lOiBab25lLCB0YXJnZXRab25lOiBab25lLCB0YXNrOiBUYXNrLFxuICAgICAgIGFwcGx5VGhpczogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSkgPT4gYW55O1xuXG4gIC8qKlxuICAgKiBBbGxvd3MgaW50ZXJjZXB0aW9uIG9mIHRhc2sgY2FuY2VsbGF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50Wm9uZURlbGVnYXRlIERlbGVnYXRlIHdoaWNoIHBlcmZvcm1zIHRoZSBwYXJlbnQgW1pvbmVTcGVjXSBvcGVyYXRpb24uXG4gICAqIEBwYXJhbSBjdXJyZW50Wm9uZSBUaGUgY3VycmVudCBbWm9uZV0gd2hlcmUgdGhlIGN1cnJlbnQgaW50ZXJjZXB0b3IgaGFzIGJlZW4gZGVjbGFyZWQuXG4gICAqIEBwYXJhbSB0YXJnZXRab25lIFRoZSBbWm9uZV0gd2hpY2ggb3JpZ2luYWxseSByZWNlaXZlZCB0aGUgcmVxdWVzdC5cbiAgICogQHBhcmFtIHRhc2sgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgY2FuY2VsVGFza2AgbWV0aG9kLlxuICAgKi9cbiAgb25DYW5jZWxUYXNrPzpcbiAgICAgIChwYXJlbnRab25lRGVsZWdhdGU6IFpvbmVEZWxlZ2F0ZSwgY3VycmVudFpvbmU6IFpvbmUsIHRhcmdldFpvbmU6IFpvbmUsIHRhc2s6IFRhc2spID0+IGFueTtcblxuICAvKipcbiAgICogTm90aWZpZXMgb2YgY2hhbmdlcyB0byB0aGUgdGFzayBxdWV1ZSBlbXB0eSBzdGF0dXMuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnRab25lRGVsZWdhdGUgRGVsZWdhdGUgd2hpY2ggcGVyZm9ybXMgdGhlIHBhcmVudCBbWm9uZVNwZWNdIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIGN1cnJlbnRab25lIFRoZSBjdXJyZW50IFtab25lXSB3aGVyZSB0aGUgY3VycmVudCBpbnRlcmNlcHRvciBoYXMgYmVlbiBkZWNsYXJlZC5cbiAgICogQHBhcmFtIHRhcmdldFpvbmUgVGhlIFtab25lXSB3aGljaCBvcmlnaW5hbGx5IHJlY2VpdmVkIHRoZSByZXF1ZXN0LlxuICAgKiBAcGFyYW0gaGFzVGFza1N0YXRlXG4gICAqL1xuICBvbkhhc1Rhc2s/OlxuICAgICAgKHBhcmVudFpvbmVEZWxlZ2F0ZTogWm9uZURlbGVnYXRlLCBjdXJyZW50Wm9uZTogWm9uZSwgdGFyZ2V0Wm9uZTogWm9uZSxcbiAgICAgICBoYXNUYXNrU3RhdGU6IEhhc1Rhc2tTdGF0ZSkgPT4gdm9pZDtcbn1cblxuXG4vKipcbiAqICBBIGRlbGVnYXRlIHdoZW4gaW50ZXJjZXB0aW5nIHpvbmUgb3BlcmF0aW9ucy5cbiAqXG4gKiAgQSBab25lRGVsZWdhdGUgaXMgbmVlZGVkIGJlY2F1c2UgYSBjaGlsZCB6b25lIGNhbid0IHNpbXBseSBpbnZva2UgYSBtZXRob2Qgb24gYSBwYXJlbnQgem9uZS4gRm9yXG4gKiAgZXhhbXBsZSBhIGNoaWxkIHpvbmUgd3JhcCBjYW4ndCBqdXN0IGNhbGwgcGFyZW50IHpvbmUgd3JhcC4gRG9pbmcgc28gd291bGQgY3JlYXRlIGEgY2FsbGJhY2tcbiAqICB3aGljaCBpcyBib3VuZCB0byB0aGUgcGFyZW50IHpvbmUuIFdoYXQgd2UgYXJlIGludGVyZXN0ZWQgaW4gaXMgaW50ZXJjZXB0aW5nIHRoZSBjYWxsYmFjayBiZWZvcmVcbiAqICBpdCBpcyBib3VuZCB0byBhbnkgem9uZS4gRnVydGhlcm1vcmUsIHdlIGFsc28gbmVlZCB0byBwYXNzIHRoZSB0YXJnZXRab25lICh6b25lIHdoaWNoIHJlY2VpdmVkXG4gKiAgdGhlIG9yaWdpbmFsIHJlcXVlc3QpIHRvIHRoZSBkZWxlZ2F0ZS5cbiAqXG4gKiAgVGhlIFpvbmVEZWxlZ2F0ZSBtZXRob2RzIG1pcnJvciB0aG9zZSBvZiBab25lIHdpdGggYW4gYWRkaXRpb24gb2YgZXh0cmEgdGFyZ2V0Wm9uZSBhcmd1bWVudCBpblxuICogIHRoZSBtZXRob2Qgc2lnbmF0dXJlLiAoVGhlIG9yaWdpbmFsIFpvbmUgd2hpY2ggcmVjZWl2ZWQgdGhlIHJlcXVlc3QuKSBTb21lIG1ldGhvZHMgYXJlIHJlbmFtZWRcbiAqICB0byBwcmV2ZW50IGNvbmZ1c2lvbiwgYmVjYXVzZSB0aGV5IGhhdmUgc2xpZ2h0bHkgZGlmZmVyZW50IHNlbWFudGljcyBhbmQgYXJndW1lbnRzLlxuICpcbiAqICAtIGB3cmFwYCA9PiBgaW50ZXJjZXB0YDogVGhlIGB3cmFwYCBtZXRob2QgZGVsZWdhdGVzIHRvIGBpbnRlcmNlcHRgLiBUaGUgYHdyYXBgIG1ldGhvZCByZXR1cm5zXG4gKiAgICAgYSBjYWxsYmFjayB3aGljaCB3aWxsIHJ1biBpbiBhIGdpdmVuIHpvbmUsIHdoZXJlIGFzIGludGVyY2VwdCBhbGxvd3Mgd3JhcHBpbmcgdGhlIGNhbGxiYWNrXG4gKiAgICAgc28gdGhhdCBhZGRpdGlvbmFsIGNvZGUgY2FuIGJlIHJ1biBiZWZvcmUgYW5kIGFmdGVyLCBidXQgZG9lcyBub3QgYXNzb2NpYXRlIHRoZSBjYWxsYmFja1xuICogICAgIHdpdGggdGhlIHpvbmUuXG4gKiAgLSBgcnVuYCA9PiBgaW52b2tlYDogVGhlIGBydW5gIG1ldGhvZCBkZWxlZ2F0ZXMgdG8gYGludm9rZWAgdG8gcGVyZm9ybSB0aGUgYWN0dWFsIGV4ZWN1dGlvbiBvZlxuICogICAgIHRoZSBjYWxsYmFjay4gVGhlIGBydW5gIG1ldGhvZCBzd2l0Y2hlcyB0byBuZXcgem9uZTsgc2F2ZXMgYW5kIHJlc3RvcmVzIHRoZSBgWm9uZS5jdXJyZW50YDtcbiAqICAgICBhbmQgb3B0aW9uYWxseSBwZXJmb3JtcyBlcnJvciBoYW5kbGluZy4gVGhlIGludm9rZSBpcyBub3QgcmVzcG9uc2libGUgZm9yIGVycm9yIGhhbmRsaW5nLFxuICogICAgIG9yIHpvbmUgbWFuYWdlbWVudC5cbiAqXG4gKiAgTm90IGV2ZXJ5IG1ldGhvZCBpcyB1c3VhbGx5IG92ZXJ3cml0dGVuIGluIHRoZSBjaGlsZCB6b25lLCBmb3IgdGhpcyByZWFzb24gdGhlIFpvbmVEZWxlZ2F0ZVxuICogIHN0b3JlcyB0aGUgY2xvc2VzdCB6b25lIHdoaWNoIG92ZXJ3cml0ZXMgdGhpcyBiZWhhdmlvciBhbG9uZyB3aXRoIHRoZSBjbG9zZXN0IFpvbmVTcGVjLlxuICpcbiAqICBOT1RFOiBXZSBoYXZlIHRyaWVkIHRvIG1ha2UgdGhpcyBBUEkgYW5hbG9nb3VzIHRvIEV2ZW50IGJ1YmJsaW5nIHdpdGggdGFyZ2V0IGFuZCBjdXJyZW50XG4gKiAgcHJvcGVydGllcy5cbiAqXG4gKiAgTm90ZTogVGhlIFpvbmVEZWxlZ2F0ZSB0cmVhdHMgWm9uZVNwZWMgYXMgY2xhc3MuIFRoaXMgYWxsb3dzIHRoZSBab25lU3BlYyB0byB1c2UgaXRzIGB0aGlzYCB0b1xuICogIHN0b3JlIGludGVybmFsIHN0YXRlLlxuICovXG5pbnRlcmZhY2UgWm9uZURlbGVnYXRlIHtcbiAgem9uZTogWm9uZTtcbiAgZm9yayh0YXJnZXRab25lOiBab25lLCB6b25lU3BlYzogWm9uZVNwZWMpOiBab25lO1xuICBpbnRlcmNlcHQodGFyZ2V0Wm9uZTogWm9uZSwgY2FsbGJhY2s6IEZ1bmN0aW9uLCBzb3VyY2U6IHN0cmluZyk6IEZ1bmN0aW9uO1xuICBpbnZva2UodGFyZ2V0Wm9uZTogWm9uZSwgY2FsbGJhY2s6IEZ1bmN0aW9uLCBhcHBseVRoaXM/OiBhbnksIGFwcGx5QXJncz86IGFueVtdLCBzb3VyY2U/OiBzdHJpbmcpOlxuICAgICAgYW55O1xuICBoYW5kbGVFcnJvcih0YXJnZXRab25lOiBab25lLCBlcnJvcjogYW55KTogYm9vbGVhbjtcbiAgc2NoZWR1bGVUYXNrKHRhcmdldFpvbmU6IFpvbmUsIHRhc2s6IFRhc2spOiBUYXNrO1xuICBpbnZva2VUYXNrKHRhcmdldFpvbmU6IFpvbmUsIHRhc2s6IFRhc2ssIGFwcGx5VGhpcz86IGFueSwgYXBwbHlBcmdzPzogYW55W10pOiBhbnk7XG4gIGNhbmNlbFRhc2sodGFyZ2V0Wm9uZTogWm9uZSwgdGFzazogVGFzayk6IGFueTtcbiAgaGFzVGFzayh0YXJnZXRab25lOiBab25lLCBpc0VtcHR5OiBIYXNUYXNrU3RhdGUpOiB2b2lkO1xufVxuXG50eXBlIEhhc1Rhc2tTdGF0ZSA9IHtcbiAgbWljcm9UYXNrOiBib29sZWFuOyBtYWNyb1Rhc2s6IGJvb2xlYW47IGV2ZW50VGFzazogYm9vbGVhbjsgY2hhbmdlOiBUYXNrVHlwZTtcbn07XG5cbi8qKlxuICogVGFzayB0eXBlOiBgbWljcm9UYXNrYCwgYG1hY3JvVGFza2AsIGBldmVudFRhc2tgLlxuICovXG50eXBlIFRhc2tUeXBlID0gJ21pY3JvVGFzayd8J21hY3JvVGFzayd8J2V2ZW50VGFzayc7XG5cbi8qKlxuICogVGFzayB0eXBlOiBgbm90U2NoZWR1bGVkYCwgYHNjaGVkdWxpbmdgLCBgc2NoZWR1bGVkYCwgYHJ1bm5pbmdgLCBgY2FuY2VsaW5nYCwgJ3Vua25vd24nLlxuICovXG50eXBlIFRhc2tTdGF0ZSA9ICdub3RTY2hlZHVsZWQnfCdzY2hlZHVsaW5nJ3wnc2NoZWR1bGVkJ3wncnVubmluZyd8J2NhbmNlbGluZyd8J3Vua25vd24nO1xuXG5cbi8qKlxuICovXG5pbnRlcmZhY2UgVGFza0RhdGEge1xuICAvKipcbiAgICogQSBwZXJpb2RpYyBbTWFjcm9UYXNrXSBpcyBzdWNoIHdoaWNoIGdldCBhdXRvbWF0aWNhbGx5IHJlc2NoZWR1bGVkIGFmdGVyIGl0IGlzIGV4ZWN1dGVkLlxuICAgKi9cbiAgaXNQZXJpb2RpYz86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIERlbGF5IGluIG1pbGxpc2Vjb25kcyB3aGVuIHRoZSBUYXNrIHdpbGwgcnVuLlxuICAgKi9cbiAgZGVsYXk/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIGlkZW50aWZpZXIgcmV0dXJuZWQgYnkgdGhlIG5hdGl2ZSBzZXRUaW1lb3V0LlxuICAgKi9cbiAgaGFuZGxlSWQ/OiBudW1iZXI7XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyB3b3JrIHdoaWNoIGlzIGV4ZWN1dGVkIHdpdGggYSBjbGVhbiBzdGFjay5cbiAqXG4gKiBUYXNrcyBhcmUgdXNlZCBpbiBab25lcyB0byBtYXJrIHdvcmsgd2hpY2ggaXMgcGVyZm9ybWVkIG9uIGNsZWFuIHN0YWNrIGZyYW1lLiBUaGVyZSBhcmUgdGhyZWVcbiAqIGtpbmRzIG9mIHRhc2suIFtNaWNyb1Rhc2tdLCBbTWFjcm9UYXNrXSwgYW5kIFtFdmVudFRhc2tdLlxuICpcbiAqIEEgSlMgVk0gY2FuIGJlIG1vZGVsZWQgYXMgYSBbTWljcm9UYXNrXSBxdWV1ZSwgW01hY3JvVGFza10gcXVldWUsIGFuZCBbRXZlbnRUYXNrXSBzZXQuXG4gKlxuICogLSBbTWljcm9UYXNrXSBxdWV1ZSByZXByZXNlbnRzIGEgc2V0IG9mIHRhc2tzIHdoaWNoIGFyZSBleGVjdXRpbmcgcmlnaHQgYWZ0ZXIgdGhlIGN1cnJlbnQgc3RhY2tcbiAqICAgZnJhbWUgYmVjb21lcyBjbGVhbiBhbmQgYmVmb3JlIGEgVk0geWllbGQuIEFsbCBbTWljcm9UYXNrXXMgZXhlY3V0ZSBpbiBvcmRlciBvZiBpbnNlcnRpb25cbiAqICAgYmVmb3JlIFZNIHlpZWxkIGFuZCB0aGUgbmV4dCBbTWFjcm9UYXNrXSBpcyBleGVjdXRlZC5cbiAqIC0gW01hY3JvVGFza10gcXVldWUgcmVwcmVzZW50cyBhIHNldCBvZiB0YXNrcyB3aGljaCBhcmUgZXhlY3V0ZWQgb25lIGF0IGEgdGltZSBhZnRlciBlYWNoIFZNXG4gKiAgIHlpZWxkLiBUaGUgcXVldWUgaXMgb3JkZXJlZCBieSB0aW1lLCBhbmQgaW5zZXJ0aW9ucyBjYW4gaGFwcGVuIGluIGFueSBsb2NhdGlvbi5cbiAqIC0gW0V2ZW50VGFza10gaXMgYSBzZXQgb2YgdGFza3Mgd2hpY2ggY2FuIGF0IGFueSB0aW1lIGJlIGluc2VydGVkIHRvIHRoZSBlbmQgb2YgdGhlIFtNYWNyb1Rhc2tdXG4gKiAgIHF1ZXVlLiBUaGlzIGhhcHBlbnMgd2hlbiB0aGUgZXZlbnQgZmlyZXMuXG4gKlxuICovXG5pbnRlcmZhY2UgVGFzayB7XG4gIC8qKlxuICAgKiBUYXNrIHR5cGU6IGBtaWNyb1Rhc2tgLCBgbWFjcm9UYXNrYCwgYGV2ZW50VGFza2AuXG4gICAqL1xuICB0eXBlOiBUYXNrVHlwZTtcblxuICAvKipcbiAgICogVGFzayBzdGF0ZTogYG5vdFNjaGVkdWxlZGAsIGBzY2hlZHVsaW5nYCwgYHNjaGVkdWxlZGAsIGBydW5uaW5nYCwgYGNhbmNlbGluZ2AsIGB1bmtub3duYC5cbiAgICovXG4gIHN0YXRlOiBUYXNrU3RhdGU7XG5cbiAgLyoqXG4gICAqIERlYnVnIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIEFQSSB3aGljaCByZXF1ZXN0ZWQgdGhlIHNjaGVkdWxpbmcgb2YgdGhlIHRhc2suXG4gICAqL1xuICBzb3VyY2U6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIEZ1bmN0aW9uIHRvIGJlIHVzZWQgYnkgdGhlIFZNIHVwb24gZW50ZXJpbmcgdGhlIFtUYXNrXS4gVGhpcyBmdW5jdGlvbiB3aWxsIGRlbGVnYXRlIHRvXG4gICAqIFtab25lLnJ1blRhc2tdIGFuZCBkZWxlZ2F0ZSB0byBgY2FsbGJhY2tgLlxuICAgKi9cbiAgaW52b2tlOiBGdW5jdGlvbjtcblxuICAvKipcbiAgICogRnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gYmUgZXhlY3V0ZWQgYnkgdGhlIFRhc2sgYWZ0ZXIgdGhlIFtab25lLmN1cnJlbnRUYXNrXSBoYXMgYmVlbiBzZXQgdG9cbiAgICogdGhlIGN1cnJlbnQgdGFzay5cbiAgICovXG4gIGNhbGxiYWNrOiBGdW5jdGlvbjtcblxuICAvKipcbiAgICogVGFzayBzcGVjaWZpYyBvcHRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCB0YXNrLiBUaGlzIGlzIHBhc3NlZCB0byB0aGUgYHNjaGVkdWxlRm5gLlxuICAgKi9cbiAgZGF0YT86IFRhc2tEYXRhO1xuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSBkZWZhdWx0IHdvcmsgd2hpY2ggbmVlZHMgdG8gYmUgZG9uZSB0byBzY2hlZHVsZSB0aGUgVGFzayBieSB0aGUgVk0uXG4gICAqXG4gICAqIEEgem9uZSBtYXkgY2hvb3NlIHRvIGludGVyY2VwdCB0aGlzIGZ1bmN0aW9uIGFuZCBwZXJmb3JtIGl0cyBvd24gc2NoZWR1bGluZy5cbiAgICovXG4gIHNjaGVkdWxlRm4/OiAodGFzazogVGFzaykgPT4gdm9pZDtcblxuICAvKipcbiAgICogUmVwcmVzZW50cyB0aGUgZGVmYXVsdCB3b3JrIHdoaWNoIG5lZWRzIHRvIGJlIGRvbmUgdG8gdW4tc2NoZWR1bGUgdGhlIFRhc2sgZnJvbSB0aGUgVk0uIE5vdCBhbGxcbiAgICogVGFza3MgYXJlIGNhbmNlbGFibGUsIGFuZCB0aGVyZWZvcmUgdGhpcyBtZXRob2QgaXMgb3B0aW9uYWwuXG4gICAqXG4gICAqIEEgem9uZSBtYXkgY2hvc2UgdG8gaW50ZXJjZXB0IHRoaXMgZnVuY3Rpb24gYW5kIHBlcmZvcm0gaXRzIG93biB1bi1zY2hlZHVsaW5nLlxuICAgKi9cbiAgY2FuY2VsRm4/OiAodGFzazogVGFzaykgPT4gdm9pZDtcblxuICAvKipcbiAgICogQHR5cGUge1pvbmV9IFRoZSB6b25lIHdoaWNoIHdpbGwgYmUgdXNlZCB0byBpbnZva2UgdGhlIGBjYWxsYmFja2AuIFRoZSBab25lIGlzIGNhcHR1cmVkXG4gICAqIGF0IHRoZSB0aW1lIG9mIFRhc2sgY3JlYXRpb24uXG4gICAqL1xuICByZWFkb25seSB6b25lOiBab25lO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgdGltZXMgdGhlIHRhc2sgaGFzIGJlZW4gZXhlY3V0ZWQsIG9yIC0xIGlmIGNhbmNlbGVkLlxuICAgKi9cbiAgcnVuQ291bnQ6IG51bWJlcjtcblxuICAvKipcbiAgICogQ2FuY2VsIHRoZSBzY2hlZHVsaW5nIHJlcXVlc3QuIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgZnJvbSBgWm9uZVNwZWMub25TY2hlZHVsZVRhc2tgIHRvXG4gICAqIGNhbmNlbCB0aGUgY3VycmVudCBzY2hlZHVsaW5nIGludGVyY2VwdGlvbi4gT25jZSBjYW5jZWxlZCB0aGUgdGFzayBjYW4gYmUgZGlzY2FyZGVkIG9yXG4gICAqIHJlc2NoZWR1bGVkIHVzaW5nIGBab25lLnNjaGVkdWxlVGFza2Agb24gYSBkaWZmZXJlbnQgem9uZS5cbiAgICovXG4gIGNhbmNlbFNjaGVkdWxlUmVxdWVzdCgpOiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgTWljcm9UYXNrIGV4dGVuZHMgVGFzayB7XG4gIHR5cGU6ICdtaWNyb1Rhc2snO1xufVxuXG5pbnRlcmZhY2UgTWFjcm9UYXNrIGV4dGVuZHMgVGFzayB7XG4gIHR5cGU6ICdtYWNyb1Rhc2snO1xufVxuXG5pbnRlcmZhY2UgRXZlbnRUYXNrIGV4dGVuZHMgVGFzayB7XG4gIHR5cGU6ICdldmVudFRhc2snO1xufVxuXG4vKiogQGludGVybmFsICovXG50eXBlIEFtYmllbnRab25lID0gWm9uZTtcbi8qKiBAaW50ZXJuYWwgKi9cbnR5cGUgQW1iaWVudFpvbmVEZWxlZ2F0ZSA9IFpvbmVEZWxlZ2F0ZTtcblxuY29uc3QgWm9uZTogWm9uZVR5cGUgPSAoZnVuY3Rpb24oZ2xvYmFsOiBhbnkpIHtcbiAgY29uc3QgcGVyZm9ybWFuY2U6IHttYXJrKG5hbWU6IHN0cmluZyk6IHZvaWQ7IG1lYXN1cmUobmFtZTogc3RyaW5nLCBsYWJlbDogc3RyaW5nKTogdm9pZDt9ID1cbiAgICAgIGdsb2JhbFsncGVyZm9ybWFuY2UnXTtcbiAgZnVuY3Rpb24gbWFyayhuYW1lOiBzdHJpbmcpIHtcbiAgICBwZXJmb3JtYW5jZSAmJiBwZXJmb3JtYW5jZVsnbWFyayddICYmIHBlcmZvcm1hbmNlWydtYXJrJ10obmFtZSk7XG4gIH1cbiAgZnVuY3Rpb24gcGVyZm9ybWFuY2VNZWFzdXJlKG5hbWU6IHN0cmluZywgbGFiZWw6IHN0cmluZykge1xuICAgIHBlcmZvcm1hbmNlICYmIHBlcmZvcm1hbmNlWydtZWFzdXJlJ10gJiYgcGVyZm9ybWFuY2VbJ21lYXN1cmUnXShuYW1lLCBsYWJlbCk7XG4gIH1cbiAgbWFyaygnWm9uZScpO1xuICBjb25zdCBjaGVja0R1cGxpY2F0ZSA9IGdsb2JhbFsoJ19fem9uZV9zeW1ib2xfX2ZvcmNlRHVwbGljYXRlWm9uZUNoZWNrJyldID09PSB0cnVlO1xuICBpZiAoZ2xvYmFsWydab25lJ10pIHtcbiAgICAvLyBpZiBnbG9iYWxbJ1pvbmUnXSBhbHJlYWR5IGV4aXN0cyAobWF5YmUgem9uZS5qcyB3YXMgYWxyZWFkeSBsb2FkZWQgb3JcbiAgICAvLyBzb21lIG90aGVyIGxpYiBhbHNvIHJlZ2lzdGVyZWQgYSBnbG9iYWwgb2JqZWN0IG5hbWVkIFpvbmUpLCB3ZSBtYXkgbmVlZFxuICAgIC8vIHRvIHRocm93IGFuIGVycm9yLCBidXQgc29tZXRpbWVzIHVzZXIgbWF5IG5vdCB3YW50IHRoaXMgZXJyb3IuXG4gICAgLy8gRm9yIGV4YW1wbGUsXG4gICAgLy8gd2UgaGF2ZSB0d28gd2ViIHBhZ2VzLCBwYWdlMSBpbmNsdWRlcyB6b25lLmpzLCBwYWdlMiBkb2Vzbid0LlxuICAgIC8vIGFuZCB0aGUgMXN0IHRpbWUgdXNlciBsb2FkIHBhZ2UxIGFuZCBwYWdlMiwgZXZlcnl0aGluZyB3b3JrIGZpbmUsXG4gICAgLy8gYnV0IHdoZW4gdXNlciBsb2FkIHBhZ2UyIGFnYWluLCBlcnJvciBvY2N1cnMgYmVjYXVzZSBnbG9iYWxbJ1pvbmUnXSBhbHJlYWR5IGV4aXN0cy5cbiAgICAvLyBzbyB3ZSBhZGQgYSBmbGFnIHRvIGxldCB1c2VyIGNob29zZSB3aGV0aGVyIHRvIHRocm93IHRoaXMgZXJyb3Igb3Igbm90LlxuICAgIC8vIEJ5IGRlZmF1bHQsIGlmIGV4aXN0aW5nIFpvbmUgaXMgZnJvbSB6b25lLmpzLCB3ZSB3aWxsIG5vdCB0aHJvdyB0aGUgZXJyb3IuXG4gICAgaWYgKGNoZWNrRHVwbGljYXRlIHx8IHR5cGVvZiBnbG9iYWxbJ1pvbmUnXS5fX3N5bWJvbF9fICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1pvbmUgYWxyZWFkeSBsb2FkZWQuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnbG9iYWxbJ1pvbmUnXTtcbiAgICB9XG4gIH1cblxuICBjbGFzcyBab25lIGltcGxlbWVudHMgQW1iaWVudFpvbmUge1xuICAgIHN0YXRpYyBfX3N5bWJvbF9fOiAobmFtZTogc3RyaW5nKSA9PiBzdHJpbmcgPSBfX3N5bWJvbF9fO1xuXG4gICAgc3RhdGljIGFzc2VydFpvbmVQYXRjaGVkKCkge1xuICAgICAgaWYgKGdsb2JhbFsnUHJvbWlzZSddICE9PSBwYXRjaGVzWydab25lQXdhcmVQcm9taXNlJ10pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgJ1pvbmUuanMgaGFzIGRldGVjdGVkIHRoYXQgWm9uZUF3YXJlUHJvbWlzZSBgKHdpbmRvd3xnbG9iYWwpLlByb21pc2VgICcgK1xuICAgICAgICAgICAgJ2hhcyBiZWVuIG92ZXJ3cml0dGVuLlxcbicgK1xuICAgICAgICAgICAgJ01vc3QgbGlrZWx5IGNhdXNlIGlzIHRoYXQgYSBQcm9taXNlIHBvbHlmaWxsIGhhcyBiZWVuIGxvYWRlZCAnICtcbiAgICAgICAgICAgICdhZnRlciBab25lLmpzIChQb2x5ZmlsbGluZyBQcm9taXNlIGFwaSBpcyBub3QgbmVjZXNzYXJ5IHdoZW4gem9uZS5qcyBpcyBsb2FkZWQuICcgK1xuICAgICAgICAgICAgJ0lmIHlvdSBtdXN0IGxvYWQgb25lLCBkbyBzbyBiZWZvcmUgbG9hZGluZyB6b25lLmpzLiknKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IHJvb3QoKTogQW1iaWVudFpvbmUge1xuICAgICAgbGV0IHpvbmUgPSBab25lLmN1cnJlbnQ7XG4gICAgICB3aGlsZSAoem9uZS5wYXJlbnQpIHtcbiAgICAgICAgem9uZSA9IHpvbmUucGFyZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHpvbmU7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBjdXJyZW50KCk6IEFtYmllbnRab25lIHtcbiAgICAgIHJldHVybiBfY3VycmVudFpvbmVGcmFtZS56b25lO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgY3VycmVudFRhc2soKTogVGFza3xudWxsIHtcbiAgICAgIHJldHVybiBfY3VycmVudFRhc2s7XG4gICAgfVxuXG4gICAgc3RhdGljIF9fbG9hZF9wYXRjaChuYW1lOiBzdHJpbmcsIGZuOiBfUGF0Y2hGbik6IHZvaWQge1xuICAgICAgaWYgKHBhdGNoZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgaWYgKGNoZWNrRHVwbGljYXRlKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoJ0FscmVhZHkgbG9hZGVkIHBhdGNoOiAnICsgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIWdsb2JhbFsnX19ab25lX2Rpc2FibGVfJyArIG5hbWVdKSB7XG4gICAgICAgIGNvbnN0IHBlcmZOYW1lID0gJ1pvbmU6JyArIG5hbWU7XG4gICAgICAgIG1hcmsocGVyZk5hbWUpO1xuICAgICAgICBwYXRjaGVzW25hbWVdID0gZm4oZ2xvYmFsLCBab25lLCBfYXBpKTtcbiAgICAgICAgcGVyZm9ybWFuY2VNZWFzdXJlKHBlcmZOYW1lLCBwZXJmTmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBwYXJlbnQoKTogQW1iaWVudFpvbmV8bnVsbCB7XG4gICAgICByZXR1cm4gdGhpcy5fcGFyZW50O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIF9wYXJlbnQ6IFpvbmV8bnVsbDtcbiAgICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfcHJvcGVydGllczoge1trZXk6IHN0cmluZ106IGFueX07XG4gICAgcHJpdmF0ZSBfem9uZURlbGVnYXRlOiBab25lRGVsZWdhdGU7XG5cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQ6IFpvbmV8bnVsbCwgem9uZVNwZWM6IFpvbmVTcGVjfG51bGwpIHtcbiAgICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgICAgIHRoaXMuX25hbWUgPSB6b25lU3BlYyA/IHpvbmVTcGVjLm5hbWUgfHwgJ3VubmFtZWQnIDogJzxyb290Pic7XG4gICAgICB0aGlzLl9wcm9wZXJ0aWVzID0gem9uZVNwZWMgJiYgem9uZVNwZWMucHJvcGVydGllcyB8fCB7fTtcbiAgICAgIHRoaXMuX3pvbmVEZWxlZ2F0ZSA9XG4gICAgICAgICAgbmV3IFpvbmVEZWxlZ2F0ZSh0aGlzLCB0aGlzLl9wYXJlbnQgJiYgdGhpcy5fcGFyZW50Ll96b25lRGVsZWdhdGUsIHpvbmVTcGVjKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0KGtleTogc3RyaW5nKTogYW55IHtcbiAgICAgIGNvbnN0IHpvbmU6IFpvbmUgPSB0aGlzLmdldFpvbmVXaXRoKGtleSkgYXMgWm9uZTtcbiAgICAgIGlmICh6b25lKSByZXR1cm4gem9uZS5fcHJvcGVydGllc1trZXldO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRab25lV2l0aChrZXk6IHN0cmluZyk6IEFtYmllbnRab25lfG51bGwge1xuICAgICAgbGV0IGN1cnJlbnQ6IFpvbmV8bnVsbCA9IHRoaXM7XG4gICAgICB3aGlsZSAoY3VycmVudCkge1xuICAgICAgICBpZiAoY3VycmVudC5fcHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuX3BhcmVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBmb3JrKHpvbmVTcGVjOiBab25lU3BlYyk6IEFtYmllbnRab25lIHtcbiAgICAgIGlmICghem9uZVNwZWMpIHRocm93IG5ldyBFcnJvcignWm9uZVNwZWMgcmVxdWlyZWQhJyk7XG4gICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLmZvcmsodGhpcywgem9uZVNwZWMpO1xuICAgIH1cblxuICAgIHB1YmxpYyB3cmFwPFQgZXh0ZW5kcyBGdW5jdGlvbj4oY2FsbGJhY2s6IFQsIHNvdXJjZTogc3RyaW5nKTogVCB7XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0aW5nIGZ1bmN0aW9uIGdvdDogJyArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IF9jYWxsYmFjayA9IHRoaXMuX3pvbmVEZWxlZ2F0ZS5pbnRlcmNlcHQodGhpcywgY2FsbGJhY2ssIHNvdXJjZSk7XG4gICAgICBjb25zdCB6b25lOiBab25lID0gdGhpcztcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHpvbmUucnVuR3VhcmRlZChfY2FsbGJhY2ssICh0aGlzIGFzIGFueSksIDxhbnk+YXJndW1lbnRzLCBzb3VyY2UpO1xuICAgICAgfSBhcyBhbnkgYXMgVDtcbiAgICB9XG5cbiAgICBwdWJsaWMgcnVuKGNhbGxiYWNrOiBGdW5jdGlvbiwgYXBwbHlUaGlzPzogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSwgc291cmNlPzogc3RyaW5nKTogYW55O1xuICAgIHB1YmxpYyBydW48VD4oXG4gICAgICAgIGNhbGxiYWNrOiAoLi4uYXJnczogYW55W10pID0+IFQsIGFwcGx5VGhpcz86IGFueSwgYXBwbHlBcmdzPzogYW55W10sIHNvdXJjZT86IHN0cmluZyk6IFQge1xuICAgICAgX2N1cnJlbnRab25lRnJhbWUgPSB7cGFyZW50OiBfY3VycmVudFpvbmVGcmFtZSwgem9uZTogdGhpc307XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLmludm9rZSh0aGlzLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBfY3VycmVudFpvbmVGcmFtZSA9IF9jdXJyZW50Wm9uZUZyYW1lLnBhcmVudCE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHJ1bkd1YXJkZWQoY2FsbGJhY2s6IEZ1bmN0aW9uLCBhcHBseVRoaXM/OiBhbnksIGFwcGx5QXJncz86IGFueVtdLCBzb3VyY2U/OiBzdHJpbmcpOiBhbnk7XG4gICAgcHVibGljIHJ1bkd1YXJkZWQ8VD4oXG4gICAgICAgIGNhbGxiYWNrOiAoLi4uYXJnczogYW55W10pID0+IFQsIGFwcGx5VGhpczogYW55ID0gbnVsbCwgYXBwbHlBcmdzPzogYW55W10sXG4gICAgICAgIHNvdXJjZT86IHN0cmluZykge1xuICAgICAgX2N1cnJlbnRab25lRnJhbWUgPSB7cGFyZW50OiBfY3VycmVudFpvbmVGcmFtZSwgem9uZTogdGhpc307XG4gICAgICB0cnkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl96b25lRGVsZWdhdGUuaW52b2tlKHRoaXMsIGNhbGxiYWNrLCBhcHBseVRoaXMsIGFwcGx5QXJncywgc291cmNlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBpZiAodGhpcy5fem9uZURlbGVnYXRlLmhhbmRsZUVycm9yKHRoaXMsIGVycm9yKSkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBfY3VycmVudFpvbmVGcmFtZSA9IF9jdXJyZW50Wm9uZUZyYW1lLnBhcmVudCE7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBydW5UYXNrKHRhc2s6IFRhc2ssIGFwcGx5VGhpcz86IGFueSwgYXBwbHlBcmdzPzogYW55KTogYW55IHtcbiAgICAgIGlmICh0YXNrLnpvbmUgIT0gdGhpcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAnQSB0YXNrIGNhbiBvbmx5IGJlIHJ1biBpbiB0aGUgem9uZSBvZiBjcmVhdGlvbiEgKENyZWF0aW9uOiAnICtcbiAgICAgICAgICAgICh0YXNrLnpvbmUgfHwgTk9fWk9ORSkubmFtZSArICc7IEV4ZWN1dGlvbjogJyArIHRoaXMubmFtZSArICcpJyk7XG4gICAgICB9XG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci96b25lLmpzL2lzc3Vlcy83NzgsIHNvbWV0aW1lcyBldmVudFRhc2tcbiAgICAgIC8vIHdpbGwgcnVuIGluIG5vdFNjaGVkdWxlZChjYW5jZWxlZCkgc3RhdGUsIHdlIHNob3VsZCBub3QgdHJ5IHRvXG4gICAgICAvLyBydW4gc3VjaCBraW5kIG9mIHRhc2sgYnV0IGp1c3QgcmV0dXJuXG5cbiAgICAgIGlmICh0YXNrLnN0YXRlID09PSBub3RTY2hlZHVsZWQgJiYgKHRhc2sudHlwZSA9PT0gZXZlbnRUYXNrIHx8IHRhc2sudHlwZSA9PT0gbWFjcm9UYXNrKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlRW50cnlHdWFyZCA9IHRhc2suc3RhdGUgIT0gcnVubmluZztcbiAgICAgIHJlRW50cnlHdWFyZCAmJiAodGFzayBhcyBab25lVGFzazxhbnk+KS5fdHJhbnNpdGlvblRvKHJ1bm5pbmcsIHNjaGVkdWxlZCk7XG4gICAgICB0YXNrLnJ1bkNvdW50Kys7XG4gICAgICBjb25zdCBwcmV2aW91c1Rhc2sgPSBfY3VycmVudFRhc2s7XG4gICAgICBfY3VycmVudFRhc2sgPSB0YXNrO1xuICAgICAgX2N1cnJlbnRab25lRnJhbWUgPSB7cGFyZW50OiBfY3VycmVudFpvbmVGcmFtZSwgem9uZTogdGhpc307XG4gICAgICB0cnkge1xuICAgICAgICBpZiAodGFzay50eXBlID09IG1hY3JvVGFzayAmJiB0YXNrLmRhdGEgJiYgIXRhc2suZGF0YS5pc1BlcmlvZGljKSB7XG4gICAgICAgICAgdGFzay5jYW5jZWxGbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl96b25lRGVsZWdhdGUuaW52b2tlVGFzayh0aGlzLCB0YXNrLCBhcHBseVRoaXMsIGFwcGx5QXJncyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX3pvbmVEZWxlZ2F0ZS5oYW5kbGVFcnJvcih0aGlzLCBlcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8gaWYgdGhlIHRhc2sncyBzdGF0ZSBpcyBub3RTY2hlZHVsZWQgb3IgdW5rbm93biwgdGhlbiBpdCBoYXMgYWxyZWFkeSBiZWVuIGNhbmNlbGxlZFxuICAgICAgICAvLyB3ZSBzaG91bGQgbm90IHJlc2V0IHRoZSBzdGF0ZSB0byBzY2hlZHVsZWRcbiAgICAgICAgaWYgKHRhc2suc3RhdGUgIT09IG5vdFNjaGVkdWxlZCAmJiB0YXNrLnN0YXRlICE9PSB1bmtub3duKSB7XG4gICAgICAgICAgaWYgKHRhc2sudHlwZSA9PSBldmVudFRhc2sgfHwgKHRhc2suZGF0YSAmJiB0YXNrLmRhdGEuaXNQZXJpb2RpYykpIHtcbiAgICAgICAgICAgIHJlRW50cnlHdWFyZCAmJiAodGFzayBhcyBab25lVGFzazxhbnk+KS5fdHJhbnNpdGlvblRvKHNjaGVkdWxlZCwgcnVubmluZyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhc2sucnVuQ291bnQgPSAwO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlVGFza0NvdW50KHRhc2sgYXMgWm9uZVRhc2s8YW55PiwgLTEpO1xuICAgICAgICAgICAgcmVFbnRyeUd1YXJkICYmXG4gICAgICAgICAgICAgICAgKHRhc2sgYXMgWm9uZVRhc2s8YW55PikuX3RyYW5zaXRpb25Ubyhub3RTY2hlZHVsZWQsIHJ1bm5pbmcsIG5vdFNjaGVkdWxlZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF9jdXJyZW50Wm9uZUZyYW1lID0gX2N1cnJlbnRab25lRnJhbWUucGFyZW50ITtcbiAgICAgICAgX2N1cnJlbnRUYXNrID0gcHJldmlvdXNUYXNrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNjaGVkdWxlVGFzazxUIGV4dGVuZHMgVGFzaz4odGFzazogVCk6IFQge1xuICAgICAgaWYgKHRhc2suem9uZSAmJiB0YXNrLnpvbmUgIT09IHRoaXMpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHRhc2sgd2FzIHJlc2NoZWR1bGVkLCB0aGUgbmV3Wm9uZVxuICAgICAgICAvLyBzaG91bGQgbm90IGJlIHRoZSBjaGlsZHJlbiBvZiB0aGUgb3JpZ2luYWwgem9uZVxuICAgICAgICBsZXQgbmV3Wm9uZTogYW55ID0gdGhpcztcbiAgICAgICAgd2hpbGUgKG5ld1pvbmUpIHtcbiAgICAgICAgICBpZiAobmV3Wm9uZSA9PT0gdGFzay56b25lKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgY2FuIG5vdCByZXNjaGVkdWxlIHRhc2sgdG8gJHtcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWV9IHdoaWNoIGlzIGRlc2NlbmRhbnRzIG9mIHRoZSBvcmlnaW5hbCB6b25lICR7dGFzay56b25lLm5hbWV9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5ld1pvbmUgPSBuZXdab25lLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8oc2NoZWR1bGluZywgbm90U2NoZWR1bGVkKTtcbiAgICAgIGNvbnN0IHpvbmVEZWxlZ2F0ZXM6IFpvbmVEZWxlZ2F0ZVtdID0gW107XG4gICAgICAodGFzayBhcyBhbnkgYXMgWm9uZVRhc2s8YW55PikuX3pvbmVEZWxlZ2F0ZXMgPSB6b25lRGVsZWdhdGVzO1xuICAgICAgKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLl96b25lID0gdGhpcztcbiAgICAgIHRyeSB7XG4gICAgICAgIHRhc2sgPSB0aGlzLl96b25lRGVsZWdhdGUuc2NoZWR1bGVUYXNrKHRoaXMsIHRhc2spIGFzIFQ7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gc2hvdWxkIHNldCB0YXNrJ3Mgc3RhdGUgdG8gdW5rbm93biB3aGVuIHNjaGVkdWxlVGFzayB0aHJvdyBlcnJvclxuICAgICAgICAvLyBiZWNhdXNlIHRoZSBlcnIgbWF5IGZyb20gcmVzY2hlZHVsZSwgc28gdGhlIGZyb21TdGF0ZSBtYXliZSBub3RTY2hlZHVsZWRcbiAgICAgICAgKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8odW5rbm93biwgc2NoZWR1bGluZywgbm90U2NoZWR1bGVkKTtcbiAgICAgICAgLy8gVE9ETzogQEppYUxpUGFzc2lvbiwgc2hvdWxkIHdlIGNoZWNrIHRoZSByZXN1bHQgZnJvbSBoYW5kbGVFcnJvcj9cbiAgICAgICAgdGhpcy5fem9uZURlbGVnYXRlLmhhbmRsZUVycm9yKHRoaXMsIGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICAgIGlmICgodGFzayBhcyBhbnkgYXMgWm9uZVRhc2s8YW55PikuX3pvbmVEZWxlZ2F0ZXMgPT09IHpvbmVEZWxlZ2F0ZXMpIHtcbiAgICAgICAgLy8gd2UgaGF2ZSB0byBjaGVjayBiZWNhdXNlIGludGVybmFsbHkgdGhlIGRlbGVnYXRlIGNhbiByZXNjaGVkdWxlIHRoZSB0YXNrLlxuICAgICAgICB0aGlzLl91cGRhdGVUYXNrQ291bnQodGFzayBhcyBhbnkgYXMgWm9uZVRhc2s8YW55PiwgMSk7XG4gICAgICB9XG4gICAgICBpZiAoKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLnN0YXRlID09IHNjaGVkdWxpbmcpIHtcbiAgICAgICAgKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8oc2NoZWR1bGVkLCBzY2hlZHVsaW5nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YXNrO1xuICAgIH1cblxuICAgIHNjaGVkdWxlTWljcm9UYXNrKFxuICAgICAgICBzb3VyY2U6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uLCBkYXRhPzogVGFza0RhdGEsXG4gICAgICAgIGN1c3RvbVNjaGVkdWxlPzogKHRhc2s6IFRhc2spID0+IHZvaWQpOiBNaWNyb1Rhc2sge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVUYXNrKFxuICAgICAgICAgIG5ldyBab25lVGFzayhtaWNyb1Rhc2ssIHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCB1bmRlZmluZWQpKTtcbiAgICB9XG5cbiAgICBzY2hlZHVsZU1hY3JvVGFzayhcbiAgICAgICAgc291cmNlOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbiwgZGF0YT86IFRhc2tEYXRhLCBjdXN0b21TY2hlZHVsZT86ICh0YXNrOiBUYXNrKSA9PiB2b2lkLFxuICAgICAgICBjdXN0b21DYW5jZWw/OiAodGFzazogVGFzaykgPT4gdm9pZCk6IE1hY3JvVGFzayB7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZVRhc2soXG4gICAgICAgICAgbmV3IFpvbmVUYXNrKG1hY3JvVGFzaywgc291cmNlLCBjYWxsYmFjaywgZGF0YSwgY3VzdG9tU2NoZWR1bGUsIGN1c3RvbUNhbmNlbCkpO1xuICAgIH1cblxuICAgIHNjaGVkdWxlRXZlbnRUYXNrKFxuICAgICAgICBzb3VyY2U6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uLCBkYXRhPzogVGFza0RhdGEsIGN1c3RvbVNjaGVkdWxlPzogKHRhc2s6IFRhc2spID0+IHZvaWQsXG4gICAgICAgIGN1c3RvbUNhbmNlbD86ICh0YXNrOiBUYXNrKSA9PiB2b2lkKTogRXZlbnRUYXNrIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlVGFzayhcbiAgICAgICAgICBuZXcgWm9uZVRhc2soZXZlbnRUYXNrLCBzb3VyY2UsIGNhbGxiYWNrLCBkYXRhLCBjdXN0b21TY2hlZHVsZSwgY3VzdG9tQ2FuY2VsKSk7XG4gICAgfVxuXG4gICAgY2FuY2VsVGFzayh0YXNrOiBUYXNrKTogYW55IHtcbiAgICAgIGlmICh0YXNrLnpvbmUgIT0gdGhpcylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgJ0EgdGFzayBjYW4gb25seSBiZSBjYW5jZWxsZWQgaW4gdGhlIHpvbmUgb2YgY3JlYXRpb24hIChDcmVhdGlvbjogJyArXG4gICAgICAgICAgICAodGFzay56b25lIHx8IE5PX1pPTkUpLm5hbWUgKyAnOyBFeGVjdXRpb246ICcgKyB0aGlzLm5hbWUgKyAnKScpO1xuICAgICAgKHRhc2sgYXMgWm9uZVRhc2s8YW55PikuX3RyYW5zaXRpb25UbyhjYW5jZWxpbmcsIHNjaGVkdWxlZCwgcnVubmluZyk7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLl96b25lRGVsZWdhdGUuY2FuY2VsVGFzayh0aGlzLCB0YXNrKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBpZiBlcnJvciBvY2N1cnMgd2hlbiBjYW5jZWxUYXNrLCB0cmFuc2l0IHRoZSBzdGF0ZSB0byB1bmtub3duXG4gICAgICAgICh0YXNrIGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8odW5rbm93biwgY2FuY2VsaW5nKTtcbiAgICAgICAgdGhpcy5fem9uZURlbGVnYXRlLmhhbmRsZUVycm9yKHRoaXMsIGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3VwZGF0ZVRhc2tDb3VudCh0YXNrIGFzIFpvbmVUYXNrPGFueT4sIC0xKTtcbiAgICAgICh0YXNrIGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8obm90U2NoZWR1bGVkLCBjYW5jZWxpbmcpO1xuICAgICAgdGFzay5ydW5Db3VudCA9IDA7XG4gICAgICByZXR1cm4gdGFzaztcbiAgICB9XG5cbiAgICBwcml2YXRlIF91cGRhdGVUYXNrQ291bnQodGFzazogWm9uZVRhc2s8YW55PiwgY291bnQ6IG51bWJlcikge1xuICAgICAgY29uc3Qgem9uZURlbGVnYXRlcyA9IHRhc2suX3pvbmVEZWxlZ2F0ZXMhO1xuICAgICAgaWYgKGNvdW50ID09IC0xKSB7XG4gICAgICAgIHRhc2suX3pvbmVEZWxlZ2F0ZXMgPSBudWxsO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB6b25lRGVsZWdhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHpvbmVEZWxlZ2F0ZXNbaV0uX3VwZGF0ZVRhc2tDb3VudCh0YXNrLnR5cGUsIGNvdW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBERUxFR0FURV9aUzogWm9uZVNwZWMgPSB7XG4gICAgbmFtZTogJycsXG4gICAgb25IYXNUYXNrOlxuICAgICAgICAoZGVsZWdhdGU6IEFtYmllbnRab25lRGVsZWdhdGUsIF86IEFtYmllbnRab25lLCB0YXJnZXQ6IEFtYmllbnRab25lLFxuICAgICAgICAgaGFzVGFza1N0YXRlOiBIYXNUYXNrU3RhdGUpOiB2b2lkID0+IGRlbGVnYXRlLmhhc1Rhc2sodGFyZ2V0LCBoYXNUYXNrU3RhdGUpLFxuICAgIG9uU2NoZWR1bGVUYXNrOlxuICAgICAgICAoZGVsZWdhdGU6IEFtYmllbnRab25lRGVsZWdhdGUsIF86IEFtYmllbnRab25lLCB0YXJnZXQ6IEFtYmllbnRab25lLCB0YXNrOiBUYXNrKTogVGFzayA9PlxuICAgICAgICAgICAgZGVsZWdhdGUuc2NoZWR1bGVUYXNrKHRhcmdldCwgdGFzayksXG4gICAgb25JbnZva2VUYXNrOlxuICAgICAgICAoZGVsZWdhdGU6IEFtYmllbnRab25lRGVsZWdhdGUsIF86IEFtYmllbnRab25lLCB0YXJnZXQ6IEFtYmllbnRab25lLCB0YXNrOiBUYXNrLFxuICAgICAgICAgYXBwbHlUaGlzOiBhbnksIGFwcGx5QXJnczogYW55KTogYW55ID0+XG4gICAgICAgICAgICBkZWxlZ2F0ZS5pbnZva2VUYXNrKHRhcmdldCwgdGFzaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MpLFxuICAgIG9uQ2FuY2VsVGFzazogKGRlbGVnYXRlOiBBbWJpZW50Wm9uZURlbGVnYXRlLCBfOiBBbWJpZW50Wm9uZSwgdGFyZ2V0OiBBbWJpZW50Wm9uZSwgdGFzazogVGFzayk6XG4gICAgICAgIGFueSA9PiBkZWxlZ2F0ZS5jYW5jZWxUYXNrKHRhcmdldCwgdGFzaylcbiAgfTtcblxuICBjbGFzcyBab25lRGVsZWdhdGUgaW1wbGVtZW50cyBBbWJpZW50Wm9uZURlbGVnYXRlIHtcbiAgICBwdWJsaWMgem9uZTogWm9uZTtcblxuICAgIHByaXZhdGUgX3Rhc2tDb3VudHM6IHttaWNyb1Rhc2s6IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFjcm9UYXNrOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFzazogbnVtYmVyfSA9IHsnbWljcm9UYXNrJzogMCwgJ21hY3JvVGFzayc6IDAsICdldmVudFRhc2snOiAwfTtcblxuICAgIHByaXZhdGUgX3BhcmVudERlbGVnYXRlOiBab25lRGVsZWdhdGV8bnVsbDtcblxuICAgIHByaXZhdGUgX2ZvcmtEbGd0OiBab25lRGVsZWdhdGV8bnVsbDtcbiAgICBwcml2YXRlIF9mb3JrWlM6IFpvbmVTcGVjfG51bGw7XG4gICAgcHJpdmF0ZSBfZm9ya0N1cnJab25lOiBab25lfG51bGw7XG5cbiAgICBwcml2YXRlIF9pbnRlcmNlcHREbGd0OiBab25lRGVsZWdhdGV8bnVsbDtcbiAgICBwcml2YXRlIF9pbnRlcmNlcHRaUzogWm9uZVNwZWN8bnVsbDtcbiAgICBwcml2YXRlIF9pbnRlcmNlcHRDdXJyWm9uZTogWm9uZXxudWxsO1xuXG4gICAgcHJpdmF0ZSBfaW52b2tlRGxndDogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfaW52b2tlWlM6IFpvbmVTcGVjfG51bGw7XG4gICAgcHJpdmF0ZSBfaW52b2tlQ3VyclpvbmU6IFpvbmV8bnVsbDtcblxuICAgIHByaXZhdGUgX2hhbmRsZUVycm9yRGxndDogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfaGFuZGxlRXJyb3JaUzogWm9uZVNwZWN8bnVsbDtcbiAgICBwcml2YXRlIF9oYW5kbGVFcnJvckN1cnJab25lOiBab25lfG51bGw7XG5cbiAgICBwcml2YXRlIF9zY2hlZHVsZVRhc2tEbGd0OiBab25lRGVsZWdhdGV8bnVsbDtcbiAgICBwcml2YXRlIF9zY2hlZHVsZVRhc2taUzogWm9uZVNwZWN8bnVsbDtcbiAgICBwcml2YXRlIF9zY2hlZHVsZVRhc2tDdXJyWm9uZTogWm9uZXxudWxsO1xuXG4gICAgcHJpdmF0ZSBfaW52b2tlVGFza0RsZ3Q6IFpvbmVEZWxlZ2F0ZXxudWxsO1xuICAgIHByaXZhdGUgX2ludm9rZVRhc2taUzogWm9uZVNwZWN8bnVsbDtcbiAgICBwcml2YXRlIF9pbnZva2VUYXNrQ3VyclpvbmU6IFpvbmV8bnVsbDtcblxuICAgIHByaXZhdGUgX2NhbmNlbFRhc2tEbGd0OiBab25lRGVsZWdhdGV8bnVsbDtcbiAgICBwcml2YXRlIF9jYW5jZWxUYXNrWlM6IFpvbmVTcGVjfG51bGw7XG4gICAgcHJpdmF0ZSBfY2FuY2VsVGFza0N1cnJab25lOiBab25lfG51bGw7XG5cbiAgICBwcml2YXRlIF9oYXNUYXNrRGxndDogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfaGFzVGFza0RsZ3RPd25lcjogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfaGFzVGFza1pTOiBab25lU3BlY3xudWxsO1xuICAgIHByaXZhdGUgX2hhc1Rhc2tDdXJyWm9uZTogWm9uZXxudWxsO1xuXG4gICAgY29uc3RydWN0b3Ioem9uZTogWm9uZSwgcGFyZW50RGVsZWdhdGU6IFpvbmVEZWxlZ2F0ZXxudWxsLCB6b25lU3BlYzogWm9uZVNwZWN8bnVsbCkge1xuICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgIHRoaXMuX3BhcmVudERlbGVnYXRlID0gcGFyZW50RGVsZWdhdGU7XG5cbiAgICAgIHRoaXMuX2ZvcmtaUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYyAmJiB6b25lU3BlYy5vbkZvcmsgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlIS5fZm9ya1pTKTtcbiAgICAgIHRoaXMuX2ZvcmtEbGd0ID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uRm9yayA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUhLl9mb3JrRGxndCk7XG4gICAgICB0aGlzLl9mb3JrQ3VyclpvbmUgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25Gb3JrID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUhLnpvbmUpO1xuXG4gICAgICB0aGlzLl9pbnRlcmNlcHRaUyA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW50ZXJjZXB0ID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZSEuX2ludGVyY2VwdFpTKTtcbiAgICAgIHRoaXMuX2ludGVyY2VwdERsZ3QgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludGVyY2VwdCA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUhLl9pbnRlcmNlcHREbGd0KTtcbiAgICAgIHRoaXMuX2ludGVyY2VwdEN1cnJab25lID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnRlcmNlcHQgPyB0aGlzLnpvbmUgOiBwYXJlbnREZWxlZ2F0ZSEuem9uZSk7XG5cbiAgICAgIHRoaXMuX2ludm9rZVpTID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW52b2tlID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZSEuX2ludm9rZVpTKTtcbiAgICAgIHRoaXMuX2ludm9rZURsZ3QgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZSA/IHBhcmVudERlbGVnYXRlISA6IHBhcmVudERlbGVnYXRlIS5faW52b2tlRGxndCk7XG4gICAgICB0aGlzLl9pbnZva2VDdXJyWm9uZSA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZSA/IHRoaXMuem9uZSA6IHBhcmVudERlbGVnYXRlIS56b25lKTtcblxuICAgICAgdGhpcy5faGFuZGxlRXJyb3JaUyA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSGFuZGxlRXJyb3IgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlIS5faGFuZGxlRXJyb3JaUyk7XG4gICAgICB0aGlzLl9oYW5kbGVFcnJvckRsZ3QgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkhhbmRsZUVycm9yID8gcGFyZW50RGVsZWdhdGUhIDogcGFyZW50RGVsZWdhdGUhLl9oYW5kbGVFcnJvckRsZ3QpO1xuICAgICAgdGhpcy5faGFuZGxlRXJyb3JDdXJyWm9uZSA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSGFuZGxlRXJyb3IgPyB0aGlzLnpvbmUgOiBwYXJlbnREZWxlZ2F0ZSEuem9uZSk7XG5cbiAgICAgIHRoaXMuX3NjaGVkdWxlVGFza1pTID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25TY2hlZHVsZVRhc2sgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlIS5fc2NoZWR1bGVUYXNrWlMpO1xuICAgICAgdGhpcy5fc2NoZWR1bGVUYXNrRGxndCA9IHpvbmVTcGVjICYmXG4gICAgICAgICAgKHpvbmVTcGVjLm9uU2NoZWR1bGVUYXNrID8gcGFyZW50RGVsZWdhdGUhIDogcGFyZW50RGVsZWdhdGUhLl9zY2hlZHVsZVRhc2tEbGd0KTtcbiAgICAgIHRoaXMuX3NjaGVkdWxlVGFza0N1cnJab25lID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25TY2hlZHVsZVRhc2sgPyB0aGlzLnpvbmUgOiBwYXJlbnREZWxlZ2F0ZSEuem9uZSk7XG5cbiAgICAgIHRoaXMuX2ludm9rZVRhc2taUyA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW52b2tlVGFzayA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUhLl9pbnZva2VUYXNrWlMpO1xuICAgICAgdGhpcy5faW52b2tlVGFza0RsZ3QgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZVRhc2sgPyBwYXJlbnREZWxlZ2F0ZSEgOiBwYXJlbnREZWxlZ2F0ZSEuX2ludm9rZVRhc2tEbGd0KTtcbiAgICAgIHRoaXMuX2ludm9rZVRhc2tDdXJyWm9uZSA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW52b2tlVGFzayA/IHRoaXMuem9uZSA6IHBhcmVudERlbGVnYXRlIS56b25lKTtcblxuICAgICAgdGhpcy5fY2FuY2VsVGFza1pTID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25DYW5jZWxUYXNrID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZSEuX2NhbmNlbFRhc2taUyk7XG4gICAgICB0aGlzLl9jYW5jZWxUYXNrRGxndCA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uQ2FuY2VsVGFzayA/IHBhcmVudERlbGVnYXRlISA6IHBhcmVudERlbGVnYXRlIS5fY2FuY2VsVGFza0RsZ3QpO1xuICAgICAgdGhpcy5fY2FuY2VsVGFza0N1cnJab25lID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25DYW5jZWxUYXNrID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUhLnpvbmUpO1xuXG4gICAgICB0aGlzLl9oYXNUYXNrWlMgPSBudWxsO1xuICAgICAgdGhpcy5faGFzVGFza0RsZ3QgPSBudWxsO1xuICAgICAgdGhpcy5faGFzVGFza0RsZ3RPd25lciA9IG51bGw7XG4gICAgICB0aGlzLl9oYXNUYXNrQ3VyclpvbmUgPSBudWxsO1xuXG4gICAgICBjb25zdCB6b25lU3BlY0hhc1Rhc2sgPSB6b25lU3BlYyAmJiB6b25lU3BlYy5vbkhhc1Rhc2s7XG4gICAgICBjb25zdCBwYXJlbnRIYXNUYXNrID0gcGFyZW50RGVsZWdhdGUgJiYgcGFyZW50RGVsZWdhdGUuX2hhc1Rhc2taUztcbiAgICAgIGlmICh6b25lU3BlY0hhc1Rhc2sgfHwgcGFyZW50SGFzVGFzaykge1xuICAgICAgICAvLyBJZiB3ZSBuZWVkIHRvIHJlcG9ydCBoYXNUYXNrLCB0aGFuIHRoaXMgWlMgbmVlZHMgdG8gZG8gcmVmIGNvdW50aW5nIG9uIHRhc2tzLiBJbiBzdWNoXG4gICAgICAgIC8vIGEgY2FzZSBhbGwgdGFzayByZWxhdGVkIGludGVyY2VwdG9ycyBtdXN0IGdvIHRocm91Z2ggdGhpcyBaRC4gV2UgY2FuJ3Qgc2hvcnQgY2lyY3VpdCBpdC5cbiAgICAgICAgdGhpcy5faGFzVGFza1pTID0gem9uZVNwZWNIYXNUYXNrID8gem9uZVNwZWMgOiBERUxFR0FURV9aUztcbiAgICAgICAgdGhpcy5faGFzVGFza0RsZ3QgPSBwYXJlbnREZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5faGFzVGFza0RsZ3RPd25lciA9IHRoaXM7XG4gICAgICAgIHRoaXMuX2hhc1Rhc2tDdXJyWm9uZSA9IHpvbmU7XG4gICAgICAgIGlmICghem9uZVNwZWMhLm9uU2NoZWR1bGVUYXNrKSB7XG4gICAgICAgICAgdGhpcy5fc2NoZWR1bGVUYXNrWlMgPSBERUxFR0FURV9aUztcbiAgICAgICAgICB0aGlzLl9zY2hlZHVsZVRhc2tEbGd0ID0gcGFyZW50RGVsZWdhdGUhO1xuICAgICAgICAgIHRoaXMuX3NjaGVkdWxlVGFza0N1cnJab25lID0gdGhpcy56b25lO1xuICAgICAgICB9XG4gICAgICAgIGlmICghem9uZVNwZWMhLm9uSW52b2tlVGFzaykge1xuICAgICAgICAgIHRoaXMuX2ludm9rZVRhc2taUyA9IERFTEVHQVRFX1pTO1xuICAgICAgICAgIHRoaXMuX2ludm9rZVRhc2tEbGd0ID0gcGFyZW50RGVsZWdhdGUhO1xuICAgICAgICAgIHRoaXMuX2ludm9rZVRhc2tDdXJyWm9uZSA9IHRoaXMuem9uZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXpvbmVTcGVjIS5vbkNhbmNlbFRhc2spIHtcbiAgICAgICAgICB0aGlzLl9jYW5jZWxUYXNrWlMgPSBERUxFR0FURV9aUztcbiAgICAgICAgICB0aGlzLl9jYW5jZWxUYXNrRGxndCA9IHBhcmVudERlbGVnYXRlITtcbiAgICAgICAgICB0aGlzLl9jYW5jZWxUYXNrQ3VyclpvbmUgPSB0aGlzLnpvbmU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3JrKHRhcmdldFpvbmU6IFpvbmUsIHpvbmVTcGVjOiBab25lU3BlYyk6IEFtYmllbnRab25lIHtcbiAgICAgIHJldHVybiB0aGlzLl9mb3JrWlMgPyB0aGlzLl9mb3JrWlMub25Gb3JrISh0aGlzLl9mb3JrRGxndCEsIHRoaXMuem9uZSwgdGFyZ2V0Wm9uZSwgem9uZVNwZWMpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgWm9uZSh0YXJnZXRab25lLCB6b25lU3BlYyk7XG4gICAgfVxuXG4gICAgaW50ZXJjZXB0KHRhcmdldFpvbmU6IFpvbmUsIGNhbGxiYWNrOiBGdW5jdGlvbiwgc291cmNlOiBzdHJpbmcpOiBGdW5jdGlvbiB7XG4gICAgICByZXR1cm4gdGhpcy5faW50ZXJjZXB0WlMgP1xuICAgICAgICAgIHRoaXMuX2ludGVyY2VwdFpTLm9uSW50ZXJjZXB0IVxuICAgICAgICAgICh0aGlzLl9pbnRlcmNlcHREbGd0ISwgdGhpcy5faW50ZXJjZXB0Q3VyclpvbmUhLCB0YXJnZXRab25lLCBjYWxsYmFjaywgc291cmNlKSA6XG4gICAgICAgICAgY2FsbGJhY2s7XG4gICAgfVxuXG4gICAgaW52b2tlKFxuICAgICAgICB0YXJnZXRab25lOiBab25lLCBjYWxsYmFjazogRnVuY3Rpb24sIGFwcGx5VGhpczogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSxcbiAgICAgICAgc291cmNlPzogc3RyaW5nKTogYW55IHtcbiAgICAgIHJldHVybiB0aGlzLl9pbnZva2VaUyA/IHRoaXMuX2ludm9rZVpTLm9uSW52b2tlIVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuX2ludm9rZURsZ3QhLCB0aGlzLl9pbnZva2VDdXJyWm9uZSEsIHRhcmdldFpvbmUsIGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KGFwcGx5VGhpcywgYXBwbHlBcmdzKTtcbiAgICB9XG5cbiAgICBoYW5kbGVFcnJvcih0YXJnZXRab25lOiBab25lLCBlcnJvcjogYW55KTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlRXJyb3JaUyA/XG4gICAgICAgICAgdGhpcy5faGFuZGxlRXJyb3JaUy5vbkhhbmRsZUVycm9yIVxuICAgICAgICAgICh0aGlzLl9oYW5kbGVFcnJvckRsZ3QhLCB0aGlzLl9oYW5kbGVFcnJvckN1cnJab25lISwgdGFyZ2V0Wm9uZSwgZXJyb3IpIDpcbiAgICAgICAgICB0cnVlO1xuICAgIH1cblxuICAgIHNjaGVkdWxlVGFzayh0YXJnZXRab25lOiBab25lLCB0YXNrOiBUYXNrKTogVGFzayB7XG4gICAgICBsZXQgcmV0dXJuVGFzazogWm9uZVRhc2s8YW55PiA9IHRhc2sgYXMgWm9uZVRhc2s8YW55PjtcbiAgICAgIGlmICh0aGlzLl9zY2hlZHVsZVRhc2taUykge1xuICAgICAgICBpZiAodGhpcy5faGFzVGFza1pTKSB7XG4gICAgICAgICAgcmV0dXJuVGFzay5fem9uZURlbGVnYXRlcyEucHVzaCh0aGlzLl9oYXNUYXNrRGxndE93bmVyISk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuVGFzayA9IHRoaXMuX3NjaGVkdWxlVGFza1pTLm9uU2NoZWR1bGVUYXNrIVxuICAgICAgICAgICAgICAgICAgICAgKHRoaXMuX3NjaGVkdWxlVGFza0RsZ3QhLCB0aGlzLl9zY2hlZHVsZVRhc2tDdXJyWm9uZSEsIHRhcmdldFpvbmUsIHRhc2spIGFzXG4gICAgICAgICAgICBab25lVGFzazxhbnk+O1xuICAgICAgICBpZiAoIXJldHVyblRhc2spIHJldHVyblRhc2sgPSB0YXNrIGFzIFpvbmVUYXNrPGFueT47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGFzay5zY2hlZHVsZUZuKSB7XG4gICAgICAgICAgdGFzay5zY2hlZHVsZUZuKHRhc2spO1xuICAgICAgICB9IGVsc2UgaWYgKHRhc2sudHlwZSA9PSBtaWNyb1Rhc2spIHtcbiAgICAgICAgICBzY2hlZHVsZU1pY3JvVGFzayg8TWljcm9UYXNrPnRhc2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGFzayBpcyBtaXNzaW5nIHNjaGVkdWxlRm4uJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXR1cm5UYXNrO1xuICAgIH1cblxuICAgIGludm9rZVRhc2sodGFyZ2V0Wm9uZTogWm9uZSwgdGFzazogVGFzaywgYXBwbHlUaGlzOiBhbnksIGFwcGx5QXJncz86IGFueVtdKTogYW55IHtcbiAgICAgIHJldHVybiB0aGlzLl9pbnZva2VUYXNrWlMgPyB0aGlzLl9pbnZva2VUYXNrWlMub25JbnZva2VUYXNrIVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLl9pbnZva2VUYXNrRGxndCEsIHRoaXMuX2ludm9rZVRhc2tDdXJyWm9uZSEsIHRhcmdldFpvbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5jYWxsYmFjay5hcHBseShhcHBseVRoaXMsIGFwcGx5QXJncyk7XG4gICAgfVxuXG4gICAgY2FuY2VsVGFzayh0YXJnZXRab25lOiBab25lLCB0YXNrOiBUYXNrKTogYW55IHtcbiAgICAgIGxldCB2YWx1ZTogYW55O1xuICAgICAgaWYgKHRoaXMuX2NhbmNlbFRhc2taUykge1xuICAgICAgICB2YWx1ZSA9IHRoaXMuX2NhbmNlbFRhc2taUy5vbkNhbmNlbFRhc2shXG4gICAgICAgICAgICAgICAgKHRoaXMuX2NhbmNlbFRhc2tEbGd0ISwgdGhpcy5fY2FuY2VsVGFza0N1cnJab25lISwgdGFyZ2V0Wm9uZSwgdGFzayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRhc2suY2FuY2VsRm4pIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcignVGFzayBpcyBub3QgY2FuY2VsYWJsZScpO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gdGFzay5jYW5jZWxGbih0YXNrKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBoYXNUYXNrKHRhcmdldFpvbmU6IFpvbmUsIGlzRW1wdHk6IEhhc1Rhc2tTdGF0ZSkge1xuICAgICAgLy8gaGFzVGFzayBzaG91bGQgbm90IHRocm93IGVycm9yIHNvIG90aGVyIFpvbmVEZWxlZ2F0ZVxuICAgICAgLy8gY2FuIHN0aWxsIHRyaWdnZXIgaGFzVGFzayBjYWxsYmFja1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5faGFzVGFza1pTICYmXG4gICAgICAgICAgICB0aGlzLl9oYXNUYXNrWlMub25IYXNUYXNrIVxuICAgICAgICAgICAgKHRoaXMuX2hhc1Rhc2tEbGd0ISwgdGhpcy5faGFzVGFza0N1cnJab25lISwgdGFyZ2V0Wm9uZSwgaXNFbXB0eSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih0YXJnZXRab25lLCBlcnIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF91cGRhdGVUYXNrQ291bnQodHlwZTogVGFza1R5cGUsIGNvdW50OiBudW1iZXIpIHtcbiAgICAgIGNvbnN0IGNvdW50cyA9IHRoaXMuX3Rhc2tDb3VudHM7XG4gICAgICBjb25zdCBwcmV2ID0gY291bnRzW3R5cGVdO1xuICAgICAgY29uc3QgbmV4dCA9IGNvdW50c1t0eXBlXSA9IHByZXYgKyBjb3VudDtcbiAgICAgIGlmIChuZXh0IDwgMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vcmUgdGFza3MgZXhlY3V0ZWQgdGhlbiB3ZXJlIHNjaGVkdWxlZC4nKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcmV2ID09IDAgfHwgbmV4dCA9PSAwKSB7XG4gICAgICAgIGNvbnN0IGlzRW1wdHk6IEhhc1Rhc2tTdGF0ZSA9IHtcbiAgICAgICAgICBtaWNyb1Rhc2s6IGNvdW50c1snbWljcm9UYXNrJ10gPiAwLFxuICAgICAgICAgIG1hY3JvVGFzazogY291bnRzWydtYWNyb1Rhc2snXSA+IDAsXG4gICAgICAgICAgZXZlbnRUYXNrOiBjb3VudHNbJ2V2ZW50VGFzayddID4gMCxcbiAgICAgICAgICBjaGFuZ2U6IHR5cGVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYXNUYXNrKHRoaXMuem9uZSwgaXNFbXB0eSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xhc3MgWm9uZVRhc2s8VCBleHRlbmRzIFRhc2tUeXBlPiBpbXBsZW1lbnRzIFRhc2sge1xuICAgIHB1YmxpYyB0eXBlOiBUO1xuICAgIHB1YmxpYyBzb3VyY2U6IHN0cmluZztcbiAgICBwdWJsaWMgaW52b2tlOiBGdW5jdGlvbjtcbiAgICBwdWJsaWMgY2FsbGJhY2s6IEZ1bmN0aW9uO1xuICAgIHB1YmxpYyBkYXRhOiBUYXNrRGF0YXx1bmRlZmluZWQ7XG4gICAgcHVibGljIHNjaGVkdWxlRm46ICgodGFzazogVGFzaykgPT4gdm9pZCl8dW5kZWZpbmVkO1xuICAgIHB1YmxpYyBjYW5jZWxGbjogKCh0YXNrOiBUYXNrKSA9PiB2b2lkKXx1bmRlZmluZWQ7XG4gICAgX3pvbmU6IFpvbmV8bnVsbCA9IG51bGw7XG4gICAgcHVibGljIHJ1bkNvdW50OiBudW1iZXIgPSAwO1xuICAgIF96b25lRGVsZWdhdGVzOiBab25lRGVsZWdhdGVbXXxudWxsID0gbnVsbDtcbiAgICBfc3RhdGU6IFRhc2tTdGF0ZSA9ICdub3RTY2hlZHVsZWQnO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHR5cGU6IFQsIHNvdXJjZTogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24sIG9wdGlvbnM6IFRhc2tEYXRhfHVuZGVmaW5lZCxcbiAgICAgICAgc2NoZWR1bGVGbjogKCh0YXNrOiBUYXNrKSA9PiB2b2lkKXx1bmRlZmluZWQsIGNhbmNlbEZuOiAoKHRhc2s6IFRhc2spID0+IHZvaWQpfHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5kYXRhID0gb3B0aW9ucztcbiAgICAgIHRoaXMuc2NoZWR1bGVGbiA9IHNjaGVkdWxlRm47XG4gICAgICB0aGlzLmNhbmNlbEZuID0gY2FuY2VsRm47XG4gICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIC8vIFRPRE86IEBKaWFMaVBhc3Npb24gb3B0aW9ucyBzaG91bGQgaGF2ZSBpbnRlcmZhY2VcbiAgICAgIGlmICh0eXBlID09PSBldmVudFRhc2sgJiYgb3B0aW9ucyAmJiAob3B0aW9ucyBhcyBhbnkpLnVzZUcpIHtcbiAgICAgICAgdGhpcy5pbnZva2UgPSBab25lVGFzay5pbnZva2VUYXNrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pbnZva2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gWm9uZVRhc2suaW52b2tlVGFzay5jYWxsKGdsb2JhbCwgc2VsZiwgdGhpcywgPGFueT5hcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBpbnZva2VUYXNrKHRhc2s6IGFueSwgdGFyZ2V0OiBhbnksIGFyZ3M6IGFueSk6IGFueSB7XG4gICAgICBpZiAoIXRhc2spIHtcbiAgICAgICAgdGFzayA9IHRoaXM7XG4gICAgICB9XG4gICAgICBfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzKys7XG4gICAgICB0cnkge1xuICAgICAgICB0YXNrLnJ1bkNvdW50Kys7XG4gICAgICAgIHJldHVybiB0YXNrLnpvbmUucnVuVGFzayh0YXNrLCB0YXJnZXQsIGFyZ3MpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKF9udW1iZXJPZk5lc3RlZFRhc2tGcmFtZXMgPT0gMSkge1xuICAgICAgICAgIGRyYWluTWljcm9UYXNrUXVldWUoKTtcbiAgICAgICAgfVxuICAgICAgICBfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzLS07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHpvbmUoKTogWm9uZSB7XG4gICAgICByZXR1cm4gdGhpcy5fem9uZSE7XG4gICAgfVxuXG4gICAgZ2V0IHN0YXRlKCk6IFRhc2tTdGF0ZSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbmNlbFNjaGVkdWxlUmVxdWVzdCgpIHtcbiAgICAgIHRoaXMuX3RyYW5zaXRpb25Ubyhub3RTY2hlZHVsZWQsIHNjaGVkdWxpbmcpO1xuICAgIH1cblxuICAgIF90cmFuc2l0aW9uVG8odG9TdGF0ZTogVGFza1N0YXRlLCBmcm9tU3RhdGUxOiBUYXNrU3RhdGUsIGZyb21TdGF0ZTI/OiBUYXNrU3RhdGUpIHtcbiAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gZnJvbVN0YXRlMSB8fCB0aGlzLl9zdGF0ZSA9PT0gZnJvbVN0YXRlMikge1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IHRvU3RhdGU7XG4gICAgICAgIGlmICh0b1N0YXRlID09IG5vdFNjaGVkdWxlZCkge1xuICAgICAgICAgIHRoaXMuX3pvbmVEZWxlZ2F0ZXMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpcy50eXBlfSAnJHt0aGlzLnNvdXJjZX0nOiBjYW4gbm90IHRyYW5zaXRpb24gdG8gJyR7XG4gICAgICAgICAgICB0b1N0YXRlfScsIGV4cGVjdGluZyBzdGF0ZSAnJHtmcm9tU3RhdGUxfScke1xuICAgICAgICAgICAgZnJvbVN0YXRlMiA/ICcgb3IgXFwnJyArIGZyb21TdGF0ZTIgKyAnXFwnJyA6ICcnfSwgd2FzICcke3RoaXMuX3N0YXRlfScuYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHRvU3RyaW5nKCkge1xuICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0eXBlb2YgdGhpcy5kYXRhLmhhbmRsZUlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmhhbmRsZUlkLnRvU3RyaW5nKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFkZCB0b0pTT04gbWV0aG9kIHRvIHByZXZlbnQgY3ljbGljIGVycm9yIHdoZW5cbiAgICAvLyBjYWxsIEpTT04uc3RyaW5naWZ5KHpvbmVUYXNrKVxuICAgIHB1YmxpYyB0b0pTT04oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuc291cmNlLFxuICAgICAgICB6b25lOiB0aGlzLnpvbmUubmFtZSxcbiAgICAgICAgcnVuQ291bnQ6IHRoaXMucnVuQ291bnRcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLy8gIE1JQ1JPVEFTSyBRVUVVRVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIGNvbnN0IHN5bWJvbFNldFRpbWVvdXQgPSBfX3N5bWJvbF9fKCdzZXRUaW1lb3V0Jyk7XG4gIGNvbnN0IHN5bWJvbFByb21pc2UgPSBfX3N5bWJvbF9fKCdQcm9taXNlJyk7XG4gIGNvbnN0IHN5bWJvbFRoZW4gPSBfX3N5bWJvbF9fKCd0aGVuJyk7XG4gIGxldCBfbWljcm9UYXNrUXVldWU6IFRhc2tbXSA9IFtdO1xuICBsZXQgX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZTogYm9vbGVhbiA9IGZhbHNlO1xuICBsZXQgbmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlOiBhbnk7XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGVNaWNyb1Rhc2sodGFzaz86IE1pY3JvVGFzaykge1xuICAgIC8vIGlmIHdlIGFyZSBub3QgcnVubmluZyBpbiBhbnkgdGFzaywgYW5kIHRoZXJlIGhhcyBub3QgYmVlbiBhbnl0aGluZyBzY2hlZHVsZWRcbiAgICAvLyB3ZSBtdXN0IGJvb3RzdHJhcCB0aGUgaW5pdGlhbCB0YXNrIGNyZWF0aW9uIGJ5IG1hbnVhbGx5IHNjaGVkdWxpbmcgdGhlIGRyYWluXG4gICAgaWYgKF9udW1iZXJPZk5lc3RlZFRhc2tGcmFtZXMgPT09IDAgJiYgX21pY3JvVGFza1F1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gV2UgYXJlIG5vdCBydW5uaW5nIGluIFRhc2ssIHNvIHdlIG5lZWQgdG8ga2lja3N0YXJ0IHRoZSBtaWNyb3Rhc2sgcXVldWUuXG4gICAgICBpZiAoIW5hdGl2ZU1pY3JvVGFza1F1ZXVlUHJvbWlzZSkge1xuICAgICAgICBpZiAoZ2xvYmFsW3N5bWJvbFByb21pc2VdKSB7XG4gICAgICAgICAgbmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlID0gZ2xvYmFsW3N5bWJvbFByb21pc2VdLnJlc29sdmUoMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChuYXRpdmVNaWNyb1Rhc2tRdWV1ZVByb21pc2UpIHtcbiAgICAgICAgbGV0IG5hdGl2ZVRoZW4gPSBuYXRpdmVNaWNyb1Rhc2tRdWV1ZVByb21pc2Vbc3ltYm9sVGhlbl07XG4gICAgICAgIGlmICghbmF0aXZlVGhlbikge1xuICAgICAgICAgIC8vIG5hdGl2ZSBQcm9taXNlIGlzIG5vdCBwYXRjaGFibGUsIHdlIG5lZWQgdG8gdXNlIGB0aGVuYCBkaXJlY3RseVxuICAgICAgICAgIC8vIGlzc3VlIDEwNzhcbiAgICAgICAgICBuYXRpdmVUaGVuID0gbmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlWyd0aGVuJ107XG4gICAgICAgIH1cbiAgICAgICAgbmF0aXZlVGhlbi5jYWxsKG5hdGl2ZU1pY3JvVGFza1F1ZXVlUHJvbWlzZSwgZHJhaW5NaWNyb1Rhc2tRdWV1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnbG9iYWxbc3ltYm9sU2V0VGltZW91dF0oZHJhaW5NaWNyb1Rhc2tRdWV1ZSwgMCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRhc2sgJiYgX21pY3JvVGFza1F1ZXVlLnB1c2godGFzayk7XG4gIH1cblxuICBmdW5jdGlvbiBkcmFpbk1pY3JvVGFza1F1ZXVlKCkge1xuICAgIGlmICghX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZSkge1xuICAgICAgX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZSA9IHRydWU7XG4gICAgICB3aGlsZSAoX21pY3JvVGFza1F1ZXVlLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBxdWV1ZSA9IF9taWNyb1Rhc2tRdWV1ZTtcbiAgICAgICAgX21pY3JvVGFza1F1ZXVlID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCB0YXNrID0gcXVldWVbaV07XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRhc2suem9uZS5ydW5UYXNrKHRhc2ssIG51bGwsIG51bGwpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBfYXBpLm9uVW5oYW5kbGVkRXJyb3IoZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgX2FwaS5taWNyb3Rhc2tEcmFpbkRvbmUoKTtcbiAgICAgIF9pc0RyYWluaW5nTWljcm90YXNrUXVldWUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vLyAgQk9PVFNUUkFQXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4gIGNvbnN0IE5PX1pPTkUgPSB7bmFtZTogJ05PIFpPTkUnfTtcbiAgY29uc3Qgbm90U2NoZWR1bGVkOiAnbm90U2NoZWR1bGVkJyA9ICdub3RTY2hlZHVsZWQnLCBzY2hlZHVsaW5nOiAnc2NoZWR1bGluZycgPSAnc2NoZWR1bGluZycsXG4gICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVkOiAnc2NoZWR1bGVkJyA9ICdzY2hlZHVsZWQnLCBydW5uaW5nOiAncnVubmluZycgPSAncnVubmluZycsXG4gICAgICAgICAgICAgICAgICAgICAgY2FuY2VsaW5nOiAnY2FuY2VsaW5nJyA9ICdjYW5jZWxpbmcnLCB1bmtub3duOiAndW5rbm93bicgPSAndW5rbm93bic7XG4gIGNvbnN0IG1pY3JvVGFzazogJ21pY3JvVGFzaycgPSAnbWljcm9UYXNrJywgbWFjcm9UYXNrOiAnbWFjcm9UYXNrJyA9ICdtYWNyb1Rhc2snLFxuICAgICAgICAgICAgICAgICAgIGV2ZW50VGFzazogJ2V2ZW50VGFzaycgPSAnZXZlbnRUYXNrJztcblxuICBjb25zdCBwYXRjaGVzOiB7W2tleTogc3RyaW5nXTogYW55fSA9IHt9O1xuICBjb25zdCBfYXBpOiBfWm9uZVByaXZhdGUgPSB7XG4gICAgc3ltYm9sOiBfX3N5bWJvbF9fLFxuICAgIGN1cnJlbnRab25lRnJhbWU6ICgpID0+IF9jdXJyZW50Wm9uZUZyYW1lLFxuICAgIG9uVW5oYW5kbGVkRXJyb3I6IG5vb3AsXG4gICAgbWljcm90YXNrRHJhaW5Eb25lOiBub29wLFxuICAgIHNjaGVkdWxlTWljcm9UYXNrOiBzY2hlZHVsZU1pY3JvVGFzayxcbiAgICBzaG93VW5jYXVnaHRFcnJvcjogKCkgPT4gIShab25lIGFzIGFueSlbX19zeW1ib2xfXygnaWdub3JlQ29uc29sZUVycm9yVW5jYXVnaHRFcnJvcicpXSxcbiAgICBwYXRjaEV2ZW50VGFyZ2V0OiAoKSA9PiBbXSxcbiAgICBwYXRjaE9uUHJvcGVydGllczogbm9vcCxcbiAgICBwYXRjaE1ldGhvZDogKCkgPT4gbm9vcCxcbiAgICBiaW5kQXJndW1lbnRzOiAoKSA9PiBbXSxcbiAgICBwYXRjaFRoZW46ICgpID0+IG5vb3AsXG4gICAgc2V0TmF0aXZlUHJvbWlzZTogKE5hdGl2ZVByb21pc2U6IGFueSkgPT4ge1xuICAgICAgLy8gc29tZXRpbWVzIE5hdGl2ZVByb21pc2UucmVzb2x2ZSBzdGF0aWMgZnVuY3Rpb25cbiAgICAgIC8vIGlzIG5vdCByZWFkeSB5ZXQsIChzdWNoIGFzIGNvcmUtanMvZXM2LnByb21pc2UpXG4gICAgICAvLyBzbyB3ZSBuZWVkIHRvIGNoZWNrIGhlcmUuXG4gICAgICBpZiAoTmF0aXZlUHJvbWlzZSAmJiB0eXBlb2YgTmF0aXZlUHJvbWlzZS5yZXNvbHZlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG5hdGl2ZU1pY3JvVGFza1F1ZXVlUHJvbWlzZSA9IE5hdGl2ZVByb21pc2UucmVzb2x2ZSgwKTtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xuICBsZXQgX2N1cnJlbnRab25lRnJhbWU6IF9ab25lRnJhbWUgPSB7cGFyZW50OiBudWxsLCB6b25lOiBuZXcgWm9uZShudWxsLCBudWxsKX07XG4gIGxldCBfY3VycmVudFRhc2s6IFRhc2t8bnVsbCA9IG51bGw7XG4gIGxldCBfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzID0gMDtcblxuICBmdW5jdGlvbiBub29wKCkge31cblxuICBmdW5jdGlvbiBfX3N5bWJvbF9fKG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiAnX196b25lX3N5bWJvbF9fJyArIG5hbWU7XG4gIH1cblxuICBwZXJmb3JtYW5jZU1lYXN1cmUoJ1pvbmUnLCAnWm9uZScpO1xuICByZXR1cm4gZ2xvYmFsWydab25lJ10gPSBab25lO1xufSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93IHx8IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmIHx8IGdsb2JhbCk7Il19