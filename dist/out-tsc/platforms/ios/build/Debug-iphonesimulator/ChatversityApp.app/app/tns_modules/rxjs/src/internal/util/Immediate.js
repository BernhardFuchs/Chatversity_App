"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var nextHandle = 1;
var tasksByHandle = {};
function runIfPresent(handle) {
    var cb = tasksByHandle[handle];
    if (cb) {
        cb();
    }
}
exports.Immediate = {
    setImmediate: function (cb) {
        var handle = nextHandle++;
        tasksByHandle[handle] = cb;
        Promise.resolve().then(function () { return runIfPresent(handle); });
        return handle;
    },
    clearImmediate: function (handle) {
        delete tasksByHandle[handle];
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1tZWRpYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGxhdGZvcm1zL2lvcy9idWlsZC9EZWJ1Zy1pcGhvbmVzaW11bGF0b3IvQ2hhdHZlcnNpdHlBcHAuYXBwL2FwcC90bnNfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC91dGlsL0ltbWVkaWF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQztBQUVuQixJQUFNLGFBQWEsR0FBcUMsRUFBRSxDQUFDO0FBRTNELFNBQVMsWUFBWSxDQUFDLE1BQWM7SUFDbEMsSUFBTSxFQUFFLEdBQUcsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2pDLElBQUksRUFBRSxFQUFFO1FBQ04sRUFBRSxFQUFFLENBQUM7S0FDTjtBQUNILENBQUM7QUFFWSxRQUFBLFNBQVMsR0FBRztJQUN2QixZQUFZLEVBQVosVUFBYSxFQUFjO1FBQ3pCLElBQU0sTUFBTSxHQUFHLFVBQVUsRUFBRSxDQUFDO1FBQzVCLGFBQWEsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDM0IsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxjQUFNLE9BQUEsWUFBWSxDQUFDLE1BQU0sQ0FBQyxFQUFwQixDQUFvQixDQUFDLENBQUM7UUFDbkQsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVELGNBQWMsRUFBZCxVQUFlLE1BQWM7UUFDM0IsT0FBTyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDL0IsQ0FBQztDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgbmV4dEhhbmRsZSA9IDE7XG5cbmNvbnN0IHRhc2tzQnlIYW5kbGU6IHsgW2hhbmRsZTogc3RyaW5nXTogKCkgPT4gdm9pZCB9ID0ge307XG5cbmZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGU6IG51bWJlcikge1xuICBjb25zdCBjYiA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgaWYgKGNiKSB7XG4gICAgY2IoKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgSW1tZWRpYXRlID0ge1xuICBzZXRJbW1lZGlhdGUoY2I6ICgpID0+IHZvaWQpOiBudW1iZXIge1xuICAgIGNvbnN0IGhhbmRsZSA9IG5leHRIYW5kbGUrKztcbiAgICB0YXNrc0J5SGFuZGxlW2hhbmRsZV0gPSBjYjtcbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHJ1bklmUHJlc2VudChoYW5kbGUpKTtcbiAgICByZXR1cm4gaGFuZGxlO1xuICB9LFxuXG4gIGNsZWFySW1tZWRpYXRlKGhhbmRsZTogbnVtYmVyKTogdm9pZCB7XG4gICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgfSxcbn07XG4iXX0=