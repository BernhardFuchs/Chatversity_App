"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var nextHandle = 1;
var tasksByHandle = {};
function runIfPresent(handle) {
    var cb = tasksByHandle[handle];
    if (cb) {
        cb();
    }
}
exports.Immediate = {
    setImmediate: function (cb) {
        var handle = nextHandle++;
        tasksByHandle[handle] = cb;
        Promise.resolve().then(function () { return runIfPresent(handle); });
        return handle;
    },
    clearImmediate: function (handle) {
        delete tasksByHandle[handle];
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1tZWRpYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGxhdGZvcm1zL2lvcy9DaGF0dmVyc2l0eUFwcC9hcHAvdG5zX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvdXRpbC9JbW1lZGlhdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLFVBQVUsR0FBRyxDQUFDLENBQUM7QUFFbkIsSUFBTSxhQUFhLEdBQXFDLEVBQUUsQ0FBQztBQUUzRCxTQUFTLFlBQVksQ0FBQyxNQUFjO0lBQ2xDLElBQU0sRUFBRSxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNqQyxJQUFJLEVBQUUsRUFBRTtRQUNOLEVBQUUsRUFBRSxDQUFDO0tBQ047QUFDSCxDQUFDO0FBRVksUUFBQSxTQUFTLEdBQUc7SUFDdkIsWUFBWSxFQUFaLFVBQWEsRUFBYztRQUN6QixJQUFNLE1BQU0sR0FBRyxVQUFVLEVBQUUsQ0FBQztRQUM1QixhQUFhLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzNCLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsY0FBTSxPQUFBLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBcEIsQ0FBb0IsQ0FBQyxDQUFDO1FBQ25ELE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxjQUFjLEVBQWQsVUFBZSxNQUFjO1FBQzNCLE9BQU8sYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9CLENBQUM7Q0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsibGV0IG5leHRIYW5kbGUgPSAxO1xuXG5jb25zdCB0YXNrc0J5SGFuZGxlOiB7IFtoYW5kbGU6IHN0cmluZ106ICgpID0+IHZvaWQgfSA9IHt9O1xuXG5mdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlOiBudW1iZXIpIHtcbiAgY29uc3QgY2IgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gIGlmIChjYikge1xuICAgIGNiKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IEltbWVkaWF0ZSA9IHtcbiAgc2V0SW1tZWRpYXRlKGNiOiAoKSA9PiB2b2lkKTogbnVtYmVyIHtcbiAgICBjb25zdCBoYW5kbGUgPSBuZXh0SGFuZGxlKys7XG4gICAgdGFza3NCeUhhbmRsZVtoYW5kbGVdID0gY2I7XG4gICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiBydW5JZlByZXNlbnQoaGFuZGxlKSk7XG4gICAgcmV0dXJuIGhhbmRsZTtcbiAgfSxcblxuICBjbGVhckltbWVkaWF0ZShoYW5kbGU6IG51bWJlcik6IHZvaWQge1xuICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gIH0sXG59O1xuIl19