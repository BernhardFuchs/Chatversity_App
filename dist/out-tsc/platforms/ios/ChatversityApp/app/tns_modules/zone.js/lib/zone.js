/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Zone = (function (global) {
    var performance = global['performance'];
    function mark(name) {
        performance && performance['mark'] && performance['mark'](name);
    }
    function performanceMeasure(name, label) {
        performance && performance['measure'] && performance['measure'](name, label);
    }
    mark('Zone');
    var checkDuplicate = global[('__zone_symbol__forceDuplicateZoneCheck')] === true;
    if (global['Zone']) {
        // if global['Zone'] already exists (maybe zone.js was already loaded or
        // some other lib also registered a global object named Zone), we may need
        // to throw an error, but sometimes user may not want this error.
        // For example,
        // we have two web pages, page1 includes zone.js, page2 doesn't.
        // and the 1st time user load page1 and page2, everything work fine,
        // but when user load page2 again, error occurs because global['Zone'] already exists.
        // so we add a flag to let user choose whether to throw this error or not.
        // By default, if existing Zone is from zone.js, we will not throw the error.
        if (checkDuplicate || typeof global['Zone'].__symbol__ !== 'function') {
            throw new Error('Zone already loaded.');
        }
        else {
            return global['Zone'];
        }
    }
    var Zone = /** @class */ (function () {
        function Zone(parent, zoneSpec) {
            this._parent = parent;
            this._name = zoneSpec ? zoneSpec.name || 'unnamed' : '<root>';
            this._properties = zoneSpec && zoneSpec.properties || {};
            this._zoneDelegate =
                new ZoneDelegate(this, this._parent && this._parent._zoneDelegate, zoneSpec);
        }
        Zone.assertZonePatched = function () {
            if (global['Promise'] !== patches['ZoneAwarePromise']) {
                throw new Error('Zone.js has detected that ZoneAwarePromise `(window|global).Promise` ' +
                    'has been overwritten.\n' +
                    'Most likely cause is that a Promise polyfill has been loaded ' +
                    'after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. ' +
                    'If you must load one, do so before loading zone.js.)');
            }
        };
        Object.defineProperty(Zone, "root", {
            get: function () {
                var zone = Zone.current;
                while (zone.parent) {
                    zone = zone.parent;
                }
                return zone;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Zone, "current", {
            get: function () {
                return _currentZoneFrame.zone;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Zone, "currentTask", {
            get: function () {
                return _currentTask;
            },
            enumerable: true,
            configurable: true
        });
        Zone.__load_patch = function (name, fn) {
            if (patches.hasOwnProperty(name)) {
                if (checkDuplicate) {
                    throw Error('Already loaded patch: ' + name);
                }
            }
            else if (!global['__Zone_disable_' + name]) {
                var perfName = 'Zone:' + name;
                mark(perfName);
                patches[name] = fn(global, Zone, _api);
                performanceMeasure(perfName, perfName);
            }
        };
        Object.defineProperty(Zone.prototype, "parent", {
            get: function () {
                return this._parent;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Zone.prototype, "name", {
            get: function () {
                return this._name;
            },
            enumerable: true,
            configurable: true
        });
        Zone.prototype.get = function (key) {
            var zone = this.getZoneWith(key);
            if (zone)
                return zone._properties[key];
        };
        Zone.prototype.getZoneWith = function (key) {
            var current = this;
            while (current) {
                if (current._properties.hasOwnProperty(key)) {
                    return current;
                }
                current = current._parent;
            }
            return null;
        };
        Zone.prototype.fork = function (zoneSpec) {
            if (!zoneSpec)
                throw new Error('ZoneSpec required!');
            return this._zoneDelegate.fork(this, zoneSpec);
        };
        Zone.prototype.wrap = function (callback, source) {
            if (typeof callback !== 'function') {
                throw new Error('Expecting function got: ' + callback);
            }
            var _callback = this._zoneDelegate.intercept(this, callback, source);
            var zone = this;
            return function () {
                return zone.runGuarded(_callback, this, arguments, source);
            };
        };
        Zone.prototype.run = function (callback, applyThis, applyArgs, source) {
            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };
            try {
                return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);
            }
            finally {
                _currentZoneFrame = _currentZoneFrame.parent;
            }
        };
        Zone.prototype.runGuarded = function (callback, applyThis, applyArgs, source) {
            if (applyThis === void 0) { applyThis = null; }
            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };
            try {
                try {
                    return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);
                }
                catch (error) {
                    if (this._zoneDelegate.handleError(this, error)) {
                        throw error;
                    }
                }
            }
            finally {
                _currentZoneFrame = _currentZoneFrame.parent;
            }
        };
        Zone.prototype.runTask = function (task, applyThis, applyArgs) {
            if (task.zone != this) {
                throw new Error('A task can only be run in the zone of creation! (Creation: ' +
                    (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');
            }
            // https://github.com/angular/zone.js/issues/778, sometimes eventTask
            // will run in notScheduled(canceled) state, we should not try to
            // run such kind of task but just return
            if (task.state === notScheduled && (task.type === eventTask || task.type === macroTask)) {
                return;
            }
            var reEntryGuard = task.state != running;
            reEntryGuard && task._transitionTo(running, scheduled);
            task.runCount++;
            var previousTask = _currentTask;
            _currentTask = task;
            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };
            try {
                if (task.type == macroTask && task.data && !task.data.isPeriodic) {
                    task.cancelFn = undefined;
                }
                try {
                    return this._zoneDelegate.invokeTask(this, task, applyThis, applyArgs);
                }
                catch (error) {
                    if (this._zoneDelegate.handleError(this, error)) {
                        throw error;
                    }
                }
            }
            finally {
                // if the task's state is notScheduled or unknown, then it has already been cancelled
                // we should not reset the state to scheduled
                if (task.state !== notScheduled && task.state !== unknown) {
                    if (task.type == eventTask || (task.data && task.data.isPeriodic)) {
                        reEntryGuard && task._transitionTo(scheduled, running);
                    }
                    else {
                        task.runCount = 0;
                        this._updateTaskCount(task, -1);
                        reEntryGuard &&
                            task._transitionTo(notScheduled, running, notScheduled);
                    }
                }
                _currentZoneFrame = _currentZoneFrame.parent;
                _currentTask = previousTask;
            }
        };
        Zone.prototype.scheduleTask = function (task) {
            if (task.zone && task.zone !== this) {
                // check if the task was rescheduled, the newZone
                // should not be the children of the original zone
                var newZone = this;
                while (newZone) {
                    if (newZone === task.zone) {
                        throw Error("can not reschedule task to " + this.name + " which is descendants of the original zone " + task.zone.name);
                    }
                    newZone = newZone.parent;
                }
            }
            task._transitionTo(scheduling, notScheduled);
            var zoneDelegates = [];
            task._zoneDelegates = zoneDelegates;
            task._zone = this;
            try {
                task = this._zoneDelegate.scheduleTask(this, task);
            }
            catch (err) {
                // should set task's state to unknown when scheduleTask throw error
                // because the err may from reschedule, so the fromState maybe notScheduled
                task._transitionTo(unknown, scheduling, notScheduled);
                // TODO: @JiaLiPassion, should we check the result from handleError?
                this._zoneDelegate.handleError(this, err);
                throw err;
            }
            if (task._zoneDelegates === zoneDelegates) {
                // we have to check because internally the delegate can reschedule the task.
                this._updateTaskCount(task, 1);
            }
            if (task.state == scheduling) {
                task._transitionTo(scheduled, scheduling);
            }
            return task;
        };
        Zone.prototype.scheduleMicroTask = function (source, callback, data, customSchedule) {
            return this.scheduleTask(new ZoneTask(microTask, source, callback, data, customSchedule, undefined));
        };
        Zone.prototype.scheduleMacroTask = function (source, callback, data, customSchedule, customCancel) {
            return this.scheduleTask(new ZoneTask(macroTask, source, callback, data, customSchedule, customCancel));
        };
        Zone.prototype.scheduleEventTask = function (source, callback, data, customSchedule, customCancel) {
            return this.scheduleTask(new ZoneTask(eventTask, source, callback, data, customSchedule, customCancel));
        };
        Zone.prototype.cancelTask = function (task) {
            if (task.zone != this)
                throw new Error('A task can only be cancelled in the zone of creation! (Creation: ' +
                    (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');
            task._transitionTo(canceling, scheduled, running);
            try {
                this._zoneDelegate.cancelTask(this, task);
            }
            catch (err) {
                // if error occurs when cancelTask, transit the state to unknown
                task._transitionTo(unknown, canceling);
                this._zoneDelegate.handleError(this, err);
                throw err;
            }
            this._updateTaskCount(task, -1);
            task._transitionTo(notScheduled, canceling);
            task.runCount = 0;
            return task;
        };
        Zone.prototype._updateTaskCount = function (task, count) {
            var zoneDelegates = task._zoneDelegates;
            if (count == -1) {
                task._zoneDelegates = null;
            }
            for (var i = 0; i < zoneDelegates.length; i++) {
                zoneDelegates[i]._updateTaskCount(task.type, count);
            }
        };
        Zone.__symbol__ = __symbol__;
        return Zone;
    }());
    var DELEGATE_ZS = {
        name: '',
        onHasTask: function (delegate, _, target, hasTaskState) { return delegate.hasTask(target, hasTaskState); },
        onScheduleTask: function (delegate, _, target, task) {
            return delegate.scheduleTask(target, task);
        },
        onInvokeTask: function (delegate, _, target, task, applyThis, applyArgs) {
            return delegate.invokeTask(target, task, applyThis, applyArgs);
        },
        onCancelTask: function (delegate, _, target, task) { return delegate.cancelTask(target, task); }
    };
    var ZoneDelegate = /** @class */ (function () {
        function ZoneDelegate(zone, parentDelegate, zoneSpec) {
            this._taskCounts = { 'microTask': 0, 'macroTask': 0, 'eventTask': 0 };
            this.zone = zone;
            this._parentDelegate = parentDelegate;
            this._forkZS = zoneSpec && (zoneSpec && zoneSpec.onFork ? zoneSpec : parentDelegate._forkZS);
            this._forkDlgt = zoneSpec && (zoneSpec.onFork ? parentDelegate : parentDelegate._forkDlgt);
            this._forkCurrZone = zoneSpec && (zoneSpec.onFork ? this.zone : parentDelegate.zone);
            this._interceptZS =
                zoneSpec && (zoneSpec.onIntercept ? zoneSpec : parentDelegate._interceptZS);
            this._interceptDlgt =
                zoneSpec && (zoneSpec.onIntercept ? parentDelegate : parentDelegate._interceptDlgt);
            this._interceptCurrZone =
                zoneSpec && (zoneSpec.onIntercept ? this.zone : parentDelegate.zone);
            this._invokeZS = zoneSpec && (zoneSpec.onInvoke ? zoneSpec : parentDelegate._invokeZS);
            this._invokeDlgt =
                zoneSpec && (zoneSpec.onInvoke ? parentDelegate : parentDelegate._invokeDlgt);
            this._invokeCurrZone = zoneSpec && (zoneSpec.onInvoke ? this.zone : parentDelegate.zone);
            this._handleErrorZS =
                zoneSpec && (zoneSpec.onHandleError ? zoneSpec : parentDelegate._handleErrorZS);
            this._handleErrorDlgt =
                zoneSpec && (zoneSpec.onHandleError ? parentDelegate : parentDelegate._handleErrorDlgt);
            this._handleErrorCurrZone =
                zoneSpec && (zoneSpec.onHandleError ? this.zone : parentDelegate.zone);
            this._scheduleTaskZS =
                zoneSpec && (zoneSpec.onScheduleTask ? zoneSpec : parentDelegate._scheduleTaskZS);
            this._scheduleTaskDlgt = zoneSpec &&
                (zoneSpec.onScheduleTask ? parentDelegate : parentDelegate._scheduleTaskDlgt);
            this._scheduleTaskCurrZone =
                zoneSpec && (zoneSpec.onScheduleTask ? this.zone : parentDelegate.zone);
            this._invokeTaskZS =
                zoneSpec && (zoneSpec.onInvokeTask ? zoneSpec : parentDelegate._invokeTaskZS);
            this._invokeTaskDlgt =
                zoneSpec && (zoneSpec.onInvokeTask ? parentDelegate : parentDelegate._invokeTaskDlgt);
            this._invokeTaskCurrZone =
                zoneSpec && (zoneSpec.onInvokeTask ? this.zone : parentDelegate.zone);
            this._cancelTaskZS =
                zoneSpec && (zoneSpec.onCancelTask ? zoneSpec : parentDelegate._cancelTaskZS);
            this._cancelTaskDlgt =
                zoneSpec && (zoneSpec.onCancelTask ? parentDelegate : parentDelegate._cancelTaskDlgt);
            this._cancelTaskCurrZone =
                zoneSpec && (zoneSpec.onCancelTask ? this.zone : parentDelegate.zone);
            this._hasTaskZS = null;
            this._hasTaskDlgt = null;
            this._hasTaskDlgtOwner = null;
            this._hasTaskCurrZone = null;
            var zoneSpecHasTask = zoneSpec && zoneSpec.onHasTask;
            var parentHasTask = parentDelegate && parentDelegate._hasTaskZS;
            if (zoneSpecHasTask || parentHasTask) {
                // If we need to report hasTask, than this ZS needs to do ref counting on tasks. In such
                // a case all task related interceptors must go through this ZD. We can't short circuit it.
                this._hasTaskZS = zoneSpecHasTask ? zoneSpec : DELEGATE_ZS;
                this._hasTaskDlgt = parentDelegate;
                this._hasTaskDlgtOwner = this;
                this._hasTaskCurrZone = zone;
                if (!zoneSpec.onScheduleTask) {
                    this._scheduleTaskZS = DELEGATE_ZS;
                    this._scheduleTaskDlgt = parentDelegate;
                    this._scheduleTaskCurrZone = this.zone;
                }
                if (!zoneSpec.onInvokeTask) {
                    this._invokeTaskZS = DELEGATE_ZS;
                    this._invokeTaskDlgt = parentDelegate;
                    this._invokeTaskCurrZone = this.zone;
                }
                if (!zoneSpec.onCancelTask) {
                    this._cancelTaskZS = DELEGATE_ZS;
                    this._cancelTaskDlgt = parentDelegate;
                    this._cancelTaskCurrZone = this.zone;
                }
            }
        }
        ZoneDelegate.prototype.fork = function (targetZone, zoneSpec) {
            return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, targetZone, zoneSpec) :
                new Zone(targetZone, zoneSpec);
        };
        ZoneDelegate.prototype.intercept = function (targetZone, callback, source) {
            return this._interceptZS ?
                this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, targetZone, callback, source) :
                callback;
        };
        ZoneDelegate.prototype.invoke = function (targetZone, callback, applyThis, applyArgs, source) {
            return this._invokeZS ? this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, targetZone, callback, applyThis, applyArgs, source) :
                callback.apply(applyThis, applyArgs);
        };
        ZoneDelegate.prototype.handleError = function (targetZone, error) {
            return this._handleErrorZS ?
                this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, targetZone, error) :
                true;
        };
        ZoneDelegate.prototype.scheduleTask = function (targetZone, task) {
            var returnTask = task;
            if (this._scheduleTaskZS) {
                if (this._hasTaskZS) {
                    returnTask._zoneDelegates.push(this._hasTaskDlgtOwner);
                }
                returnTask = this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, targetZone, task);
                if (!returnTask)
                    returnTask = task;
            }
            else {
                if (task.scheduleFn) {
                    task.scheduleFn(task);
                }
                else if (task.type == microTask) {
                    scheduleMicroTask(task);
                }
                else {
                    throw new Error('Task is missing scheduleFn.');
                }
            }
            return returnTask;
        };
        ZoneDelegate.prototype.invokeTask = function (targetZone, task, applyThis, applyArgs) {
            return this._invokeTaskZS ? this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, targetZone, task, applyThis, applyArgs) :
                task.callback.apply(applyThis, applyArgs);
        };
        ZoneDelegate.prototype.cancelTask = function (targetZone, task) {
            var value;
            if (this._cancelTaskZS) {
                value = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, targetZone, task);
            }
            else {
                if (!task.cancelFn) {
                    throw Error('Task is not cancelable');
                }
                value = task.cancelFn(task);
            }
            return value;
        };
        ZoneDelegate.prototype.hasTask = function (targetZone, isEmpty) {
            // hasTask should not throw error so other ZoneDelegate
            // can still trigger hasTask callback
            try {
                this._hasTaskZS &&
                    this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, targetZone, isEmpty);
            }
            catch (err) {
                this.handleError(targetZone, err);
            }
        };
        ZoneDelegate.prototype._updateTaskCount = function (type, count) {
            var counts = this._taskCounts;
            var prev = counts[type];
            var next = counts[type] = prev + count;
            if (next < 0) {
                throw new Error('More tasks executed then were scheduled.');
            }
            if (prev == 0 || next == 0) {
                var isEmpty = {
                    microTask: counts['microTask'] > 0,
                    macroTask: counts['macroTask'] > 0,
                    eventTask: counts['eventTask'] > 0,
                    change: type
                };
                this.hasTask(this.zone, isEmpty);
            }
        };
        return ZoneDelegate;
    }());
    var ZoneTask = /** @class */ (function () {
        function ZoneTask(type, source, callback, options, scheduleFn, cancelFn) {
            this._zone = null;
            this.runCount = 0;
            this._zoneDelegates = null;
            this._state = 'notScheduled';
            this.type = type;
            this.source = source;
            this.data = options;
            this.scheduleFn = scheduleFn;
            this.cancelFn = cancelFn;
            this.callback = callback;
            var self = this;
            // TODO: @JiaLiPassion options should have interface
            if (type === eventTask && options && options.useG) {
                this.invoke = ZoneTask.invokeTask;
            }
            else {
                this.invoke = function () {
                    return ZoneTask.invokeTask.call(global, self, this, arguments);
                };
            }
        }
        ZoneTask.invokeTask = function (task, target, args) {
            if (!task) {
                task = this;
            }
            _numberOfNestedTaskFrames++;
            try {
                task.runCount++;
                return task.zone.runTask(task, target, args);
            }
            finally {
                if (_numberOfNestedTaskFrames == 1) {
                    drainMicroTaskQueue();
                }
                _numberOfNestedTaskFrames--;
            }
        };
        Object.defineProperty(ZoneTask.prototype, "zone", {
            get: function () {
                return this._zone;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ZoneTask.prototype, "state", {
            get: function () {
                return this._state;
            },
            enumerable: true,
            configurable: true
        });
        ZoneTask.prototype.cancelScheduleRequest = function () {
            this._transitionTo(notScheduled, scheduling);
        };
        ZoneTask.prototype._transitionTo = function (toState, fromState1, fromState2) {
            if (this._state === fromState1 || this._state === fromState2) {
                this._state = toState;
                if (toState == notScheduled) {
                    this._zoneDelegates = null;
                }
            }
            else {
                throw new Error(this.type + " '" + this.source + "': can not transition to '" + toState + "', expecting state '" + fromState1 + "'" + (fromState2 ? ' or \'' + fromState2 + '\'' : '') + ", was '" + this._state + "'.");
            }
        };
        ZoneTask.prototype.toString = function () {
            if (this.data && typeof this.data.handleId !== 'undefined') {
                return this.data.handleId.toString();
            }
            else {
                return Object.prototype.toString.call(this);
            }
        };
        // add toJSON method to prevent cyclic error when
        // call JSON.stringify(zoneTask)
        ZoneTask.prototype.toJSON = function () {
            return {
                type: this.type,
                state: this.state,
                source: this.source,
                zone: this.zone.name,
                runCount: this.runCount
            };
        };
        return ZoneTask;
    }());
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    ///  MICROTASK QUEUE
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    var symbolSetTimeout = __symbol__('setTimeout');
    var symbolPromise = __symbol__('Promise');
    var symbolThen = __symbol__('then');
    var _microTaskQueue = [];
    var _isDrainingMicrotaskQueue = false;
    var nativeMicroTaskQueuePromise;
    function scheduleMicroTask(task) {
        // if we are not running in any task, and there has not been anything scheduled
        // we must bootstrap the initial task creation by manually scheduling the drain
        if (_numberOfNestedTaskFrames === 0 && _microTaskQueue.length === 0) {
            // We are not running in Task, so we need to kickstart the microtask queue.
            if (!nativeMicroTaskQueuePromise) {
                if (global[symbolPromise]) {
                    nativeMicroTaskQueuePromise = global[symbolPromise].resolve(0);
                }
            }
            if (nativeMicroTaskQueuePromise) {
                var nativeThen = nativeMicroTaskQueuePromise[symbolThen];
                if (!nativeThen) {
                    // native Promise is not patchable, we need to use `then` directly
                    // issue 1078
                    nativeThen = nativeMicroTaskQueuePromise['then'];
                }
                nativeThen.call(nativeMicroTaskQueuePromise, drainMicroTaskQueue);
            }
            else {
                global[symbolSetTimeout](drainMicroTaskQueue, 0);
            }
        }
        task && _microTaskQueue.push(task);
    }
    function drainMicroTaskQueue() {
        if (!_isDrainingMicrotaskQueue) {
            _isDrainingMicrotaskQueue = true;
            while (_microTaskQueue.length) {
                var queue = _microTaskQueue;
                _microTaskQueue = [];
                for (var i = 0; i < queue.length; i++) {
                    var task = queue[i];
                    try {
                        task.zone.runTask(task, null, null);
                    }
                    catch (error) {
                        _api.onUnhandledError(error);
                    }
                }
            }
            _api.microtaskDrainDone();
            _isDrainingMicrotaskQueue = false;
        }
    }
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    ///  BOOTSTRAP
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    var NO_ZONE = { name: 'NO ZONE' };
    var notScheduled = 'notScheduled', scheduling = 'scheduling', scheduled = 'scheduled', running = 'running', canceling = 'canceling', unknown = 'unknown';
    var microTask = 'microTask', macroTask = 'macroTask', eventTask = 'eventTask';
    var patches = {};
    var _api = {
        symbol: __symbol__,
        currentZoneFrame: function () { return _currentZoneFrame; },
        onUnhandledError: noop,
        microtaskDrainDone: noop,
        scheduleMicroTask: scheduleMicroTask,
        showUncaughtError: function () { return !Zone[__symbol__('ignoreConsoleErrorUncaughtError')]; },
        patchEventTarget: function () { return []; },
        patchOnProperties: noop,
        patchMethod: function () { return noop; },
        bindArguments: function () { return []; },
        patchThen: function () { return noop; },
        setNativePromise: function (NativePromise) {
            // sometimes NativePromise.resolve static function
            // is not ready yet, (such as core-js/es6.promise)
            // so we need to check here.
            if (NativePromise && typeof NativePromise.resolve === 'function') {
                nativeMicroTaskQueuePromise = NativePromise.resolve(0);
            }
        },
    };
    var _currentZoneFrame = { parent: null, zone: new Zone(null, null) };
    var _currentTask = null;
    var _numberOfNestedTaskFrames = 0;
    function noop() { }
    function __symbol__(name) {
        return '__zone_symbol__' + name;
    }
    performanceMeasure('Zone', 'Zone');
    return global['Zone'] = Zone;
})(typeof window !== 'undefined' && window || typeof self !== 'undefined' && self || global);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiem9uZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3BsYXRmb3Jtcy9pb3MvQ2hhdHZlcnNpdHlBcHAvYXBwL3Ruc19tb2R1bGVzL3pvbmUuanMvbGliL3pvbmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztHQU1HO0FBcW5CSCxJQUFNLElBQUksR0FBYSxDQUFDLFVBQVMsTUFBVztJQUMxQyxJQUFNLFdBQVcsR0FDYixNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDMUIsU0FBUyxJQUFJLENBQUMsSUFBWTtRQUN4QixXQUFXLElBQUksV0FBVyxDQUFDLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBQ0QsU0FBUyxrQkFBa0IsQ0FBQyxJQUFZLEVBQUUsS0FBYTtRQUNyRCxXQUFXLElBQUksV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDL0UsQ0FBQztJQUNELElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNiLElBQU0sY0FBYyxHQUFHLE1BQU0sQ0FBQyxDQUFDLHdDQUF3QyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUM7SUFDbkYsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7UUFDbEIsd0VBQXdFO1FBQ3hFLDBFQUEwRTtRQUMxRSxpRUFBaUU7UUFDakUsZUFBZTtRQUNmLGdFQUFnRTtRQUNoRSxvRUFBb0U7UUFDcEUsc0ZBQXNGO1FBQ3RGLDBFQUEwRTtRQUMxRSw2RUFBNkU7UUFDN0UsSUFBSSxjQUFjLElBQUksT0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsVUFBVSxLQUFLLFVBQVUsRUFBRTtZQUNyRSxNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7U0FDekM7YUFB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eEQ7UUFDSCxDQUFDO0tBQ0YsQ0FBQztJQUNGLElBQUksaUJBQWlCLEdBQWUsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUMsQ0FBQztJQUMvRSxJQUFJLFlBQVksR0FBYyxJQUFJLENBQUM7SUFDbkMsSUFBSSx5QkFBeUIsR0FBRyxDQUFDLENBQUM7SUFFbEMsU0FBUyxJQUFJLEtBQUksQ0FBQztJQUVsQixTQUFTLFVBQVUsQ0FBQyxJQUFZO1FBQzlCLE9BQU8saUJBQWlCLEdBQUcsSUFBSSxDQUFDO0lBQ2xDLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDbkMsT0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQy9CLENBQUMsQ0FBQyxDQUFDLE9BQU8sTUFBTSxLQUFLLFdBQVcsSUFBSSxNQUFNLElBQUksT0FBTyxJQUFJLEtBQUssV0FBVyxJQUFJLElBQUksSUFBSSxNQUFNLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cblxuLyoqXG4gKiBTdXBwcmVzcyBjbG9zdXJlIGNvbXBpbGVyIGVycm9ycyBhYm91dCB1bmtub3duICdnbG9iYWwnIHZhcmlhYmxlXG4gKiBAZmlsZW92ZXJ2aWV3XG4gKiBAc3VwcHJlc3Mge3VuZGVmaW5lZFZhcnN9XG4gKi9cblxuLyoqXG4gKiBab25lIGlzIGEgbWVjaGFuaXNtIGZvciBpbnRlcmNlcHRpbmcgYW5kIGtlZXBpbmcgdHJhY2sgb2YgYXN5bmNocm9ub3VzIHdvcmsuXG4gKlxuICogQSBab25lIGlzIGEgZ2xvYmFsIG9iamVjdCB3aGljaCBpcyBjb25maWd1cmVkIHdpdGggcnVsZXMgYWJvdXQgaG93IHRvIGludGVyY2VwdCBhbmQga2VlcCB0cmFja1xuICogb2YgdGhlIGFzeW5jaHJvbm91cyBjYWxsYmFja3MuIFpvbmUgaGFzIHRoZXNlIHJlc3BvbnNpYmlsaXRpZXM6XG4gKlxuICogMS4gSW50ZXJjZXB0IGFzeW5jaHJvbm91cyB0YXNrIHNjaGVkdWxpbmdcbiAqIDIuIFdyYXAgY2FsbGJhY2tzIGZvciBlcnJvci1oYW5kbGluZyBhbmQgem9uZSB0cmFja2luZyBhY3Jvc3MgYXN5bmMgb3BlcmF0aW9ucy5cbiAqIDMuIFByb3ZpZGUgYSB3YXkgdG8gYXR0YWNoIGRhdGEgdG8gem9uZXNcbiAqIDQuIFByb3ZpZGUgYSBjb250ZXh0IHNwZWNpZmljIGxhc3QgZnJhbWUgZXJyb3IgaGFuZGxpbmdcbiAqIDUuIChJbnRlcmNlcHQgYmxvY2tpbmcgbWV0aG9kcylcbiAqXG4gKiBBIHpvbmUgYnkgaXRzZWxmIGRvZXMgbm90IGRvIGFueXRoaW5nLCBpbnN0ZWFkIGl0IHJlbGllcyBvbiBzb21lIG90aGVyIGNvZGUgdG8gcm91dGUgZXhpc3RpbmdcbiAqIHBsYXRmb3JtIEFQSSB0aHJvdWdoIGl0LiAoVGhlIHpvbmUgbGlicmFyeSBzaGlwcyB3aXRoIGNvZGUgd2hpY2ggbW9ua2V5IHBhdGNoZXMgYWxsIG9mIHRoZVxuICogYnJvd3NlcnMncyBhc3luY2hyb25vdXMgQVBJIGFuZCByZWRpcmVjdHMgdGhlbSB0aHJvdWdoIHRoZSB6b25lIGZvciBpbnRlcmNlcHRpb24uKVxuICpcbiAqIEluIGl0cyBzaW1wbGVzdCBmb3JtIGEgem9uZSBhbGxvd3Mgb25lIHRvIGludGVyY2VwdCB0aGUgc2NoZWR1bGluZyBhbmQgY2FsbGluZyBvZiBhc3luY2hyb25vdXNcbiAqIG9wZXJhdGlvbnMsIGFuZCBleGVjdXRlIGFkZGl0aW9uYWwgY29kZSBiZWZvcmUgYXMgd2VsbCBhcyBhZnRlciB0aGUgYXN5bmNocm9ub3VzIHRhc2suIFRoZSBydWxlc1xuICogb2YgaW50ZXJjZXB0aW9uIGFyZSBjb25maWd1cmVkIHVzaW5nIFtab25lQ29uZmlnXS4gVGhlcmUgY2FuIGJlIG1hbnkgZGlmZmVyZW50IHpvbmUgaW5zdGFuY2VzIGluXG4gKiBhIHN5c3RlbSwgYnV0IG9ubHkgb25lIHpvbmUgaXMgYWN0aXZlIGF0IGFueSBnaXZlbiB0aW1lIHdoaWNoIGNhbiBiZSByZXRyaWV2ZWQgdXNpbmdcbiAqIFtab25lI2N1cnJlbnRdLlxuICpcbiAqXG4gKlxuICogIyMgQ2FsbGJhY2sgV3JhcHBpbmdcbiAqXG4gKiBBbiBpbXBvcnRhbnQgYXNwZWN0IG9mIHRoZSB6b25lcyBpcyB0aGF0IHRoZXkgc2hvdWxkIHBlcnNpc3QgYWNyb3NzIGFzeW5jaHJvbm91cyBvcGVyYXRpb25zLiBUb1xuICogYWNoaWV2ZSB0aGlzLCB3aGVuIGEgZnV0dXJlIHdvcmsgaXMgc2NoZWR1bGVkIHRocm91Z2ggYXN5bmMgQVBJLCBpdCBpcyBuZWNlc3NhcnkgdG8gY2FwdHVyZSwgYW5kXG4gKiBzdWJzZXF1ZW50bHkgcmVzdG9yZSB0aGUgY3VycmVudCB6b25lLiBGb3IgZXhhbXBsZSBpZiBhIGNvZGUgaXMgcnVubmluZyBpbiB6b25lIGBiYCBhbmQgaXRcbiAqIGludm9rZXMgYHNldFRpbWVvdXRgIHRvIHNjaGVkdWxlVGFzayB3b3JrIGxhdGVyLCB0aGUgYHNldFRpbWVvdXRgIG1ldGhvZCBuZWVkcyB0byAxKSBjYXB0dXJlIHRoZVxuICogY3VycmVudCB6b25lIGFuZCAyKSB3cmFwIHRoZSBgd3JhcENhbGxiYWNrYCBpbiBjb2RlIHdoaWNoIHdpbGwgcmVzdG9yZSB0aGUgY3VycmVudCB6b25lIGBiYCBvbmNlXG4gKiB0aGUgd3JhcENhbGxiYWNrIGV4ZWN1dGVzLiBJbiB0aGlzIHdheSB0aGUgcnVsZXMgd2hpY2ggZ292ZXJuIHRoZSBjdXJyZW50IGNvZGUgYXJlIHByZXNlcnZlZCBpblxuICogYWxsIGZ1dHVyZSBhc3luY2hyb25vdXMgdGFza3MuIFRoZXJlIGNvdWxkIGJlIGEgZGlmZmVyZW50IHpvbmUgYGNgIHdoaWNoIGhhcyBkaWZmZXJlbnQgcnVsZXMgYW5kXG4gKiBpcyBhc3NvY2lhdGVkIHdpdGggZGlmZmVyZW50IGFzeW5jaHJvbm91cyB0YXNrcy4gQXMgdGhlc2UgdGFza3MgYXJlIHByb2Nlc3NlZCwgZWFjaCBhc3luY2hyb25vdXNcbiAqIHdyYXBDYWxsYmFjayBjb3JyZWN0bHkgcmVzdG9yZXMgdGhlIGNvcnJlY3Qgem9uZSwgYXMgd2VsbCBhcyBwcmVzZXJ2ZXMgdGhlIHpvbmUgZm9yIGZ1dHVyZVxuICogYXN5bmNocm9ub3VzIGNhbGxiYWNrcy5cbiAqXG4gKiBFeGFtcGxlOiBTdXBwb3NlIGEgYnJvd3NlciBwYWdlIGNvbnNpc3Qgb2YgYXBwbGljYXRpb24gY29kZSBhcyB3ZWxsIGFzIHRoaXJkLXBhcnR5XG4gKiBhZHZlcnRpc2VtZW50IGNvZGUuIChUaGVzZSB0d28gY29kZSBiYXNlcyBhcmUgaW5kZXBlbmRlbnQsIGRldmVsb3BlZCBieSBkaWZmZXJlbnQgbXV0dWFsbHlcbiAqIHVuYXdhcmUgZGV2ZWxvcGVycy4pIFRoZSBhcHBsaWNhdGlvbiBjb2RlIG1heSBiZSBpbnRlcmVzdGVkIGluIGRvaW5nIGdsb2JhbCBlcnJvciBoYW5kbGluZyBhbmRcbiAqIHNvIGl0IGNvbmZpZ3VyZXMgdGhlIGBhcHBgIHpvbmUgdG8gc2VuZCBhbGwgb2YgdGhlIGVycm9ycyB0byB0aGUgc2VydmVyIGZvciBhbmFseXNpcywgYW5kIHRoZW5cbiAqIGV4ZWN1dGVzIHRoZSBhcHBsaWNhdGlvbiBpbiB0aGUgYGFwcGAgem9uZS4gVGhlIGFkdmVydGlzaW5nIGNvZGUgaXMgaW50ZXJlc3RlZCBpbiB0aGUgc2FtZVxuICogZXJyb3IgcHJvY2Vzc2luZyBidXQgaXQgbmVlZHMgdG8gc2VuZCB0aGUgZXJyb3JzIHRvIGEgZGlmZmVyZW50IHRoaXJkLXBhcnR5LiBTbyBpdCBjcmVhdGVzIHRoZVxuICogYGFkc2Agem9uZSB3aXRoIGEgZGlmZmVyZW50IGVycm9yIGhhbmRsZXIuIE5vdyBib3RoIGFkdmVydGlzaW5nIGFzIHdlbGwgYXMgYXBwbGljYXRpb24gY29kZVxuICogY3JlYXRlIG1hbnkgYXN5bmNocm9ub3VzIG9wZXJhdGlvbnMsIGJ1dCB0aGUgW1pvbmVdIHdpbGwgZW5zdXJlIHRoYXQgYWxsIG9mIHRoZSBhc3luY2hyb25vdXNcbiAqIG9wZXJhdGlvbnMgY3JlYXRlZCBmcm9tIHRoZSBhcHBsaWNhdGlvbiBjb2RlIHdpbGwgZXhlY3V0ZSBpbiBgYXBwYCB6b25lIHdpdGggaXRzIGVycm9yXG4gKiBoYW5kbGVyIGFuZCBhbGwgb2YgdGhlIGFkdmVydGlzZW1lbnQgY29kZSB3aWxsIGV4ZWN1dGUgaW4gdGhlIGBhZHNgIHpvbmUgd2l0aCBpdHMgZXJyb3IgaGFuZGxlci5cbiAqIFRoaXMgd2lsbCBub3Qgb25seSB3b3JrIGZvciB0aGUgYXN5bmMgb3BlcmF0aW9ucyBjcmVhdGVkIGRpcmVjdGx5LCBidXQgYWxzbyBmb3IgYWxsIHN1YnNlcXVlbnRcbiAqIGFzeW5jaHJvbm91cyBvcGVyYXRpb25zLlxuICpcbiAqIElmIHlvdSB0aGluayBvZiBjaGFpbiBvZiBhc3luY2hyb25vdXMgb3BlcmF0aW9ucyBhcyBhIHRocmVhZCBvZiBleGVjdXRpb24gKGJpdCBvZiBhIHN0cmV0Y2gpXG4gKiB0aGVuIFtab25lI2N1cnJlbnRdIHdpbGwgYWN0IGFzIGEgdGhyZWFkIGxvY2FsIHZhcmlhYmxlLlxuICpcbiAqXG4gKlxuICogIyMgQXN5bmNocm9ub3VzIG9wZXJhdGlvbiBzY2hlZHVsaW5nXG4gKlxuICogSW4gYWRkaXRpb24gdG8gd3JhcHBpbmcgdGhlIGNhbGxiYWNrcyB0byByZXN0b3JlIHRoZSB6b25lLCBhbGwgb3BlcmF0aW9ucyB3aGljaCBjYXVzZSBhXG4gKiBzY2hlZHVsaW5nIG9mIHdvcmsgZm9yIGxhdGVyIGFyZSByb3V0ZWQgdGhyb3VnaCB0aGUgY3VycmVudCB6b25lIHdoaWNoIGlzIGFsbG93ZWQgdG8gaW50ZXJjZXB0XG4gKiB0aGVtIGJ5IGFkZGluZyB3b3JrIGJlZm9yZSBvciBhZnRlciB0aGUgd3JhcENhbGxiYWNrIGFzIHdlbGwgYXMgdXNpbmcgZGlmZmVyZW50IG1lYW5zIG9mXG4gKiBhY2hpZXZpbmcgdGhlIHJlcXVlc3QuIChVc2VmdWwgZm9yIHVuaXQgdGVzdGluZywgb3IgdHJhY2tpbmcgb2YgcmVxdWVzdHMpLiBJbiBzb21lIGluc3RhbmNlc1xuICogc3VjaCBhcyBgc2V0VGltZW91dGAgdGhlIHdyYXBwaW5nIG9mIHRoZSB3cmFwQ2FsbGJhY2sgYW5kIHNjaGVkdWxpbmcgaXMgZG9uZSBpbiB0aGUgc2FtZVxuICogd3JhcENhbGxiYWNrLCBidXQgdGhlcmUgYXJlIG90aGVyIGV4YW1wbGVzIHN1Y2ggYXMgYFByb21pc2VzYCB3aGVyZSB0aGUgYHRoZW5gIHdyYXBDYWxsYmFjayBpc1xuICogd3JhcHBlZCwgYnV0IHRoZSBleGVjdXRpb24gb2YgYHRoZW5gIGlzIHRyaWdnZXJlZCBieSBgUHJvbWlzZWAgc2NoZWR1bGluZyBgcmVzb2x2ZWAgd29yay5cbiAqXG4gKiBGdW5kYW1lbnRhbGx5IHRoZXJlIGFyZSB0aHJlZSBraW5kcyBvZiB0YXNrcyB3aGljaCBjYW4gYmUgc2NoZWR1bGVkOlxuICpcbiAqIDEuIFtNaWNyb1Rhc2tdIHVzZWQgZm9yIGRvaW5nIHdvcmsgcmlnaHQgYWZ0ZXIgdGhlIGN1cnJlbnQgdGFzay4gVGhpcyBpcyBub24tY2FuY2VsYWJsZSB3aGljaCBpc1xuICogICAgZ3VhcmFudGVlZCB0byBydW4gZXhhY3RseSBvbmNlIGFuZCBpbW1lZGlhdGVseS5cbiAqIDIuIFtNYWNyb1Rhc2tdIHVzZWQgZm9yIGRvaW5nIHdvcmsgbGF0ZXIuIFN1Y2ggYXMgYHNldFRpbWVvdXRgLiBUaGlzIGlzIHR5cGljYWxseSBjYW5jZWxhYmxlXG4gKiAgICB3aGljaCBpcyBndWFyYW50ZWVkIHRvIGV4ZWN1dGUgYXQgbGVhc3Qgb25jZSBhZnRlciBzb21lIHdlbGwgdW5kZXJzdG9vZCBkZWxheS5cbiAqIDMuIFtFdmVudFRhc2tdIHVzZWQgZm9yIGxpc3RlbmluZyBvbiBzb21lIGZ1dHVyZSBldmVudC4gVGhpcyBtYXkgZXhlY3V0ZSB6ZXJvIG9yIG1vcmUgdGltZXMsIHdpdGhcbiAqICAgIGFuIHVua25vd24gZGVsYXkuXG4gKlxuICogRWFjaCBhc3luY2hyb25vdXMgQVBJIGlzIG1vZGVsZWQgYW5kIHJvdXRlZCB0aHJvdWdoIG9uZSBvZiB0aGVzZSBBUElzLlxuICpcbiAqXG4gKiAjIyMgW01pY3JvVGFza11cbiAqXG4gKiBbTWljcm9UYXNrXXMgcmVwcmVzZW50IHdvcmsgd2hpY2ggd2lsbCBiZSBkb25lIGluIGN1cnJlbnQgVk0gdHVybiBhcyBzb29uIGFzIHBvc3NpYmxlLCBiZWZvcmUgVk1cbiAqIHlpZWxkaW5nLlxuICpcbiAqXG4gKiAjIyMgW1RpbWVyVGFza11cbiAqXG4gKiBbVGltZXJUYXNrXXMgcmVwcmVzZW50IHdvcmsgd2hpY2ggd2lsbCBiZSBkb25lIGFmdGVyIHNvbWUgZGVsYXkuIChTb21ldGltZXMgdGhlIGRlbGF5IGlzXG4gKiBhcHByb3hpbWF0ZSBzdWNoIGFzIG9uIG5leHQgYXZhaWxhYmxlIGFuaW1hdGlvbiBmcmFtZSkuIFR5cGljYWxseSB0aGVzZSBtZXRob2RzIGluY2x1ZGU6XG4gKiBgc2V0VGltZW91dGAsIGBzZXRJbW1lZGlhdGVgLCBgc2V0SW50ZXJ2YWxgLCBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCwgYW5kIGFsbCBicm93c2VyIHNwZWNpZmljXG4gKiB2YXJpYW50cy5cbiAqXG4gKlxuICogIyMjIFtFdmVudFRhc2tdXG4gKlxuICogW0V2ZW50VGFza11zIHJlcHJlc2VudCBhIHJlcXVlc3QgdG8gY3JlYXRlIGEgbGlzdGVuZXIgb24gYW4gZXZlbnQuIFVubGlrZSB0aGUgb3RoZXIgdGFza1xuICogZXZlbnRzIHRoZXkgbWF5IG5ldmVyIGJlIGV4ZWN1dGVkLCBidXQgdHlwaWNhbGx5IGV4ZWN1dGUgbW9yZSB0aGFuIG9uY2UuIFRoZXJlIGlzIG5vIHF1ZXVlIG9mXG4gKiBldmVudHMsIHJhdGhlciB0aGVpciBjYWxsYmFja3MgYXJlIHVucHJlZGljdGFibGUgYm90aCBpbiBvcmRlciBhbmQgdGltZS5cbiAqXG4gKlxuICogIyMgR2xvYmFsIEVycm9yIEhhbmRsaW5nXG4gKlxuICpcbiAqICMjIENvbXBvc2FiaWxpdHlcbiAqXG4gKiBab25lcyBjYW4gYmUgY29tcG9zZWQgdG9nZXRoZXIgdGhyb3VnaCBbWm9uZS5mb3JrKCldLiBBIGNoaWxkIHpvbmUgbWF5IGNyZWF0ZSBpdHMgb3duIHNldCBvZlxuICogcnVsZXMuIEEgY2hpbGQgem9uZSBpcyBleHBlY3RlZCB0byBlaXRoZXI6XG4gKlxuICogMS4gRGVsZWdhdGUgdGhlIGludGVyY2VwdGlvbiB0byBhIHBhcmVudCB6b25lLCBhbmQgb3B0aW9uYWxseSBhZGQgYmVmb3JlIGFuZCBhZnRlciB3cmFwQ2FsbGJhY2tcbiAqICAgIGhvb2tzLlxuICogMi4gUHJvY2VzcyB0aGUgcmVxdWVzdCBpdHNlbGYgd2l0aG91dCBkZWxlZ2F0aW9uLlxuICpcbiAqIENvbXBvc2FiaWxpdHkgYWxsb3dzIHpvbmVzIHRvIGtlZXAgdGhlaXIgY29uY2VybnMgY2xlYW4uIEZvciBleGFtcGxlIGEgdG9wIG1vc3Qgem9uZSBtYXkgY2hvb3NlXG4gKiB0byBoYW5kbGUgZXJyb3IgaGFuZGxpbmcsIHdoaWxlIGNoaWxkIHpvbmVzIG1heSBjaG9vc2UgdG8gZG8gdXNlciBhY3Rpb24gdHJhY2tpbmcuXG4gKlxuICpcbiAqICMjIFJvb3QgWm9uZVxuICpcbiAqIEF0IHRoZSBzdGFydCB0aGUgYnJvd3NlciB3aWxsIHJ1biBpbiBhIHNwZWNpYWwgcm9vdCB6b25lLCB3aGljaCBpcyBjb25maWd1cmVkIHRvIGJlaGF2ZSBleGFjdGx5XG4gKiBsaWtlIHRoZSBwbGF0Zm9ybSwgbWFraW5nIGFueSBleGlzdGluZyBjb2RlIHdoaWNoIGlzIG5vdCB6b25lLWF3YXJlIGJlaGF2ZSBhcyBleHBlY3RlZC4gQWxsXG4gKiB6b25lcyBhcmUgY2hpbGRyZW4gb2YgdGhlIHJvb3Qgem9uZS5cbiAqXG4gKi9cbmludGVyZmFjZSBab25lIHtcbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm5zIHtab25lfSBUaGUgcGFyZW50IFpvbmUuXG4gICAqL1xuICBwYXJlbnQ6IFpvbmV8bnVsbDtcbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBab25lIG5hbWUgKHVzZWZ1bCBmb3IgZGVidWdnaW5nKVxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBga2V5YC5cbiAgICpcbiAgICogSWYgdGhlIGN1cnJlbnQgem9uZSBkb2VzIG5vdCBoYXZlIGEga2V5LCB0aGUgcmVxdWVzdCBpcyBkZWxlZ2F0ZWQgdG8gdGhlIHBhcmVudCB6b25lLiBVc2VcbiAgICogW1pvbmVTcGVjLnByb3BlcnRpZXNdIHRvIGNvbmZpZ3VyZSB0aGUgc2V0IG9mIHByb3BlcnRpZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IHpvbmUuXG4gICAqXG4gICAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byByZXRyaWV2ZS5cbiAgICogQHJldHVybnMge2FueX0gVGhlIHZhbHVlIGZvciB0aGUga2V5LCBvciBgdW5kZWZpbmVkYCBpZiBub3QgZm91bmQuXG4gICAqL1xuICBnZXQoa2V5OiBzdHJpbmcpOiBhbnk7XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgWm9uZSB3aGljaCBkZWZpbmVzIGEgYGtleWAuXG4gICAqXG4gICAqIFJlY3Vyc2l2ZWx5IHNlYXJjaCB0aGUgcGFyZW50IFpvbmUgdW50aWwgYSBab25lIHdoaWNoIGhhcyBhIHByb3BlcnR5IGBrZXlgIGlzIGZvdW5kLlxuICAgKlxuICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gdXNlIGZvciBpZGVudGlmaWNhdGlvbiBvZiB0aGUgcmV0dXJuZWQgem9uZS5cbiAgICogQHJldHVybnMge1pvbmV9IFRoZSBab25lIHdoaWNoIGRlZmluZXMgdGhlIGBrZXlgLCBgbnVsbGAgaWYgbm90IGZvdW5kLlxuICAgKi9cbiAgZ2V0Wm9uZVdpdGgoa2V5OiBzdHJpbmcpOiBab25lfG51bGw7XG4gIC8qKlxuICAgKiBVc2VkIHRvIGNyZWF0ZSBhIGNoaWxkIHpvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB6b25lU3BlYyBBIHNldCBvZiBydWxlcyB3aGljaCB0aGUgY2hpbGQgem9uZSBzaG91bGQgZm9sbG93LlxuICAgKiBAcmV0dXJucyB7Wm9uZX0gQSBuZXcgY2hpbGQgem9uZS5cbiAgICovXG4gIGZvcmsoem9uZVNwZWM6IFpvbmVTcGVjKTogWm9uZTtcbiAgLyoqXG4gICAqIFdyYXBzIGEgY2FsbGJhY2sgZnVuY3Rpb24gaW4gYSBuZXcgZnVuY3Rpb24gd2hpY2ggd2lsbCBwcm9wZXJseSByZXN0b3JlIHRoZSBjdXJyZW50IHpvbmUgdXBvblxuICAgKiBpbnZvY2F0aW9uLlxuICAgKlxuICAgKiBUaGUgd3JhcHBlZCBmdW5jdGlvbiB3aWxsIHByb3Blcmx5IGZvcndhcmQgYHRoaXNgIGFzIHdlbGwgYXMgYGFyZ3VtZW50c2AgdG8gdGhlIGBjYWxsYmFja2AuXG4gICAqXG4gICAqIEJlZm9yZSB0aGUgZnVuY3Rpb24gaXMgd3JhcHBlZCB0aGUgem9uZSBjYW4gaW50ZXJjZXB0IHRoZSBgY2FsbGJhY2tgIGJ5IGRlY2xhcmluZ1xuICAgKiBbWm9uZVNwZWMub25JbnRlcmNlcHRdLlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgd3JhcHBlZCBpbiB0aGUgem9uZS5cbiAgICogQHBhcmFtIHNvdXJjZSBBIHVuaXF1ZSBkZWJ1ZyBsb2NhdGlvbiBvZiB0aGUgQVBJIGJlaW5nIHdyYXBwZWQuXG4gICAqIEByZXR1cm5zIHtmdW5jdGlvbigpOiAqfSBBIGZ1bmN0aW9uIHdoaWNoIHdpbGwgaW52b2tlIHRoZSBgY2FsbGJhY2tgIHRocm91Z2ggW1pvbmUucnVuR3VhcmRlZF0uXG4gICAqL1xuICB3cmFwPEYgZXh0ZW5kcyBGdW5jdGlvbj4oY2FsbGJhY2s6IEYsIHNvdXJjZTogc3RyaW5nKTogRjtcbiAgLyoqXG4gICAqIEludm9rZXMgYSBmdW5jdGlvbiBpbiBhIGdpdmVuIHpvbmUuXG4gICAqXG4gICAqIFRoZSBpbnZvY2F0aW9uIG9mIGBjYWxsYmFja2AgY2FuIGJlIGludGVyY2VwdGVkIGJ5IGRlY2xhcmluZyBbWm9uZVNwZWMub25JbnZva2VdLlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cbiAgICogQHBhcmFtIGFwcGx5VGhpc1xuICAgKiBAcGFyYW0gYXBwbHlBcmdzXG4gICAqIEBwYXJhbSBzb3VyY2UgQSB1bmlxdWUgZGVidWcgbG9jYXRpb24gb2YgdGhlIEFQSSBiZWluZyBpbnZva2VkLlxuICAgKiBAcmV0dXJucyB7YW55fSBWYWx1ZSBmcm9tIHRoZSBgY2FsbGJhY2tgIGZ1bmN0aW9uLlxuICAgKi9cbiAgcnVuPFQ+KGNhbGxiYWNrOiBGdW5jdGlvbiwgYXBwbHlUaGlzPzogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSwgc291cmNlPzogc3RyaW5nKTogVDtcbiAgLyoqXG4gICAqIEludm9rZXMgYSBmdW5jdGlvbiBpbiBhIGdpdmVuIHpvbmUgYW5kIGNhdGNoZXMgYW55IGV4Y2VwdGlvbnMuXG4gICAqXG4gICAqIEFueSBleGNlcHRpb25zIHRocm93biB3aWxsIGJlIGZvcndhcmRlZCB0byBbWm9uZS5IYW5kbGVFcnJvcl0uXG4gICAqXG4gICAqIFRoZSBpbnZvY2F0aW9uIG9mIGBjYWxsYmFja2AgY2FuIGJlIGludGVyY2VwdGVkIGJ5IGRlY2xhcmluZyBbWm9uZVNwZWMub25JbnZva2VdLiBUaGVcbiAgICogaGFuZGxpbmcgb2YgZXhjZXB0aW9ucyBjYW4gYmUgaW50ZXJjZXB0ZWQgYnkgZGVjbGFyaW5nIFtab25lU3BlYy5oYW5kbGVFcnJvcl0uXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuICAgKiBAcGFyYW0gYXBwbHlUaGlzXG4gICAqIEBwYXJhbSBhcHBseUFyZ3NcbiAgICogQHBhcmFtIHNvdXJjZSBBIHVuaXF1ZSBkZWJ1ZyBsb2NhdGlvbiBvZiB0aGUgQVBJIGJlaW5nIGludm9rZWQuXG4gICAqIEByZXR1cm5zIHthbnl9IFZhbHVlIGZyb20gdGhlIGBjYWxsYmFja2AgZnVuY3Rpb24uXG4gICAqL1xuICBydW5HdWFyZGVkPFQ+KGNhbGxiYWNrOiBGdW5jdGlvbiwgYXBwbHlUaGlzPzogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSwgc291cmNlPzogc3RyaW5nKTogVDtcbiAgLyoqXG4gICAqIEV4ZWN1dGUgdGhlIFRhc2sgYnkgcmVzdG9yaW5nIHRoZSBbWm9uZS5jdXJyZW50VGFza10gaW4gdGhlIFRhc2sncyB6b25lLlxuICAgKlxuICAgKiBAcGFyYW0gdGFzayB0byBydW5cbiAgICogQHBhcmFtIGFwcGx5VGhpc1xuICAgKiBAcGFyYW0gYXBwbHlBcmdzXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cbiAgcnVuVGFzayh0YXNrOiBUYXNrLCBhcHBseVRoaXM/OiBhbnksIGFwcGx5QXJncz86IGFueSk6IGFueTtcblxuICAvKipcbiAgICogU2NoZWR1bGUgYSBNaWNyb1Rhc2suXG4gICAqXG4gICAqIEBwYXJhbSBzb3VyY2VcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqIEBwYXJhbSBkYXRhXG4gICAqIEBwYXJhbSBjdXN0b21TY2hlZHVsZVxuICAgKi9cbiAgc2NoZWR1bGVNaWNyb1Rhc2soXG4gICAgICBzb3VyY2U6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uLCBkYXRhPzogVGFza0RhdGEsXG4gICAgICBjdXN0b21TY2hlZHVsZT86ICh0YXNrOiBUYXNrKSA9PiB2b2lkKTogTWljcm9UYXNrO1xuXG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhIE1hY3JvVGFzay5cbiAgICpcbiAgICogQHBhcmFtIHNvdXJjZVxuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICogQHBhcmFtIGRhdGFcbiAgICogQHBhcmFtIGN1c3RvbVNjaGVkdWxlXG4gICAqIEBwYXJhbSBjdXN0b21DYW5jZWxcbiAgICovXG4gIHNjaGVkdWxlTWFjcm9UYXNrKFxuICAgICAgc291cmNlOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbiwgZGF0YT86IFRhc2tEYXRhLCBjdXN0b21TY2hlZHVsZT86ICh0YXNrOiBUYXNrKSA9PiB2b2lkLFxuICAgICAgY3VzdG9tQ2FuY2VsPzogKHRhc2s6IFRhc2spID0+IHZvaWQpOiBNYWNyb1Rhc2s7XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlIGFuIEV2ZW50VGFzay5cbiAgICpcbiAgICogQHBhcmFtIHNvdXJjZVxuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICogQHBhcmFtIGRhdGFcbiAgICogQHBhcmFtIGN1c3RvbVNjaGVkdWxlXG4gICAqIEBwYXJhbSBjdXN0b21DYW5jZWxcbiAgICovXG4gIHNjaGVkdWxlRXZlbnRUYXNrKFxuICAgICAgc291cmNlOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbiwgZGF0YT86IFRhc2tEYXRhLCBjdXN0b21TY2hlZHVsZT86ICh0YXNrOiBUYXNrKSA9PiB2b2lkLFxuICAgICAgY3VzdG9tQ2FuY2VsPzogKHRhc2s6IFRhc2spID0+IHZvaWQpOiBFdmVudFRhc2s7XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlIGFuIGV4aXN0aW5nIFRhc2suXG4gICAqXG4gICAqIFVzZWZ1bCBmb3IgcmVzY2hlZHVsaW5nIGEgdGFzayB3aGljaCB3YXMgYWxyZWFkeSBjYW5jZWxlZC5cbiAgICpcbiAgICogQHBhcmFtIHRhc2tcbiAgICovXG4gIHNjaGVkdWxlVGFzazxUIGV4dGVuZHMgVGFzaz4odGFzazogVCk6IFQ7XG5cbiAgLyoqXG4gICAqIEFsbG93cyB0aGUgem9uZSB0byBpbnRlcmNlcHQgY2FuY2VsaW5nIG9mIHNjaGVkdWxlZCBUYXNrLlxuICAgKlxuICAgKiBUaGUgaW50ZXJjZXB0aW9uIGlzIGNvbmZpZ3VyZWQgdXNpbmcgW1pvbmVTcGVjLm9uQ2FuY2VsVGFza10uIFRoZSBkZWZhdWx0IGNhbmNlbGVyIGludm9rZXNcbiAgICogdGhlIFtUYXNrLmNhbmNlbEZuXS5cbiAgICpcbiAgICogQHBhcmFtIHRhc2tcbiAgICogQHJldHVybnMge2FueX1cbiAgICovXG4gIGNhbmNlbFRhc2sodGFzazogVGFzayk6IGFueTtcbn1cblxuaW50ZXJmYWNlIFpvbmVUeXBlIHtcbiAgLyoqXG4gICAqIEByZXR1cm5zIHtab25lfSBSZXR1cm5zIHRoZSBjdXJyZW50IFtab25lXS4gVGhlIG9ubHkgd2F5IHRvIGNoYW5nZVxuICAgKiB0aGUgY3VycmVudCB6b25lIGlzIGJ5IGludm9raW5nIGEgcnVuKCkgbWV0aG9kLCB3aGljaCB3aWxsIHVwZGF0ZSB0aGUgY3VycmVudCB6b25lIGZvciB0aGVcbiAgICogZHVyYXRpb24gb2YgdGhlIHJ1biBtZXRob2QgY2FsbGJhY2suXG4gICAqL1xuICBjdXJyZW50OiBab25lO1xuICAvKipcbiAgICogQHJldHVybnMge1Rhc2t9IFRoZSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCBleGVjdXRpb24uXG4gICAqL1xuICBjdXJyZW50VGFzazogVGFza3xudWxsO1xuXG4gIC8qKlxuICAgKiBWZXJpZnkgdGhhdCBab25lIGhhcyBiZWVuIGNvcnJlY3RseSBwYXRjaGVkLiBTcGVjaWZpY2FsbHkgdGhhdCBQcm9taXNlIGlzIHpvbmUgYXdhcmUuXG4gICAqL1xuICBhc3NlcnRab25lUGF0Y2hlZCgpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJuIHRoZSByb290IHpvbmUuXG4gICAqL1xuICByb290OiBab25lO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX19sb2FkX3BhdGNoKG5hbWU6IHN0cmluZywgZm46IF9QYXRjaEZuKTogdm9pZDtcblxuICAvKiogQGludGVybmFsICovXG4gIF9fc3ltYm9sX18obmFtZTogc3RyaW5nKTogc3RyaW5nO1xufVxuXG4vKiogQGludGVybmFsICovXG50eXBlIF9QYXRjaEZuID0gKGdsb2JhbDogV2luZG93LCBab25lOiBab25lVHlwZSwgYXBpOiBfWm9uZVByaXZhdGUpID0+IHZvaWQ7XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmludGVyZmFjZSBfWm9uZVByaXZhdGUge1xuICBjdXJyZW50Wm9uZUZyYW1lOiAoKSA9PiBfWm9uZUZyYW1lO1xuICBzeW1ib2w6IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZztcbiAgc2NoZWR1bGVNaWNyb1Rhc2s6ICh0YXNrPzogTWljcm9UYXNrKSA9PiB2b2lkO1xuICBvblVuaGFuZGxlZEVycm9yOiAoZXJyb3I6IEVycm9yKSA9PiB2b2lkO1xuICBtaWNyb3Rhc2tEcmFpbkRvbmU6ICgpID0+IHZvaWQ7XG4gIHNob3dVbmNhdWdodEVycm9yOiAoKSA9PiBib29sZWFuO1xuICBwYXRjaEV2ZW50VGFyZ2V0OiAoZ2xvYmFsOiBhbnksIGFwaXM6IGFueVtdLCBvcHRpb25zPzogYW55KSA9PiBib29sZWFuW107XG4gIHBhdGNoT25Qcm9wZXJ0aWVzOiAob2JqOiBhbnksIHByb3BlcnRpZXM6IHN0cmluZ1tdfG51bGwpID0+IHZvaWQ7XG4gIHBhdGNoVGhlbjogKGN0cm86IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBzZXROYXRpdmVQcm9taXNlOiAobmF0aXZlUHJvbWlzZTogYW55KSA9PiB2b2lkO1xuICBwYXRjaE1ldGhvZDpcbiAgICAgICh0YXJnZXQ6IGFueSwgbmFtZTogc3RyaW5nLFxuICAgICAgIHBhdGNoRm46IChkZWxlZ2F0ZTogRnVuY3Rpb24sIGRlbGVnYXRlTmFtZTogc3RyaW5nLCBuYW1lOiBzdHJpbmcpID0+XG4gICAgICAgICAgIChzZWxmOiBhbnksIGFyZ3M6IGFueVtdKSA9PiBhbnkpID0+IEZ1bmN0aW9uIHwgbnVsbDtcbiAgYmluZEFyZ3VtZW50czogKGFyZ3M6IGFueVtdLCBzb3VyY2U6IHN0cmluZykgPT4gYW55W107XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmludGVyZmFjZSBfWm9uZUZyYW1lIHtcbiAgcGFyZW50OiBfWm9uZUZyYW1lfG51bGw7XG4gIHpvbmU6IFpvbmU7XG59XG5cbmludGVyZmFjZSBVbmNhdWdodFByb21pc2VFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgem9uZTogWm9uZTtcbiAgdGFzazogVGFzaztcbiAgcHJvbWlzZTogUHJvbWlzZTxhbnk+O1xuICByZWplY3Rpb246IGFueTtcbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhIHdheSB0byBjb25maWd1cmUgdGhlIGludGVyY2VwdGlvbiBvZiB6b25lIGV2ZW50cy5cbiAqXG4gKiBPbmx5IHRoZSBgbmFtZWAgcHJvcGVydHkgaXMgcmVxdWlyZWQgKGFsbCBvdGhlciBhcmUgb3B0aW9uYWwpLlxuICovXG5pbnRlcmZhY2UgWm9uZVNwZWMge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIHpvbmUuIFVzZWZ1bCB3aGVuIGRlYnVnZ2luZyBab25lcy5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogQSBzZXQgb2YgcHJvcGVydGllcyB0byBiZSBhc3NvY2lhdGVkIHdpdGggWm9uZS4gVXNlIFtab25lLmdldF0gdG8gcmV0cmlldmUgdGhlbS5cbiAgICovXG4gIHByb3BlcnRpZXM/OiB7W2tleTogc3RyaW5nXTogYW55fTtcblxuICAvKipcbiAgICogQWxsb3dzIHRoZSBpbnRlcmNlcHRpb24gb2Ygem9uZSBmb3JraW5nLlxuICAgKlxuICAgKiBXaGVuIHRoZSB6b25lIGlzIGJlaW5nIGZvcmtlZCwgdGhlIHJlcXVlc3QgaXMgZm9yd2FyZGVkIHRvIHRoaXMgbWV0aG9kIGZvciBpbnRlcmNlcHRpb24uXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnRab25lRGVsZWdhdGUgRGVsZWdhdGUgd2hpY2ggcGVyZm9ybXMgdGhlIHBhcmVudCBbWm9uZVNwZWNdIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIGN1cnJlbnRab25lIFRoZSBjdXJyZW50IFtab25lXSB3aGVyZSB0aGUgY3VycmVudCBpbnRlcmNlcHRvciBoYXMgYmVlbiBkZWNsYXJlZC5cbiAgICogQHBhcmFtIHRhcmdldFpvbmUgVGhlIFtab25lXSB3aGljaCBvcmlnaW5hbGx5IHJlY2VpdmVkIHRoZSByZXF1ZXN0LlxuICAgKiBAcGFyYW0gem9uZVNwZWMgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgZm9ya2AgbWV0aG9kLlxuICAgKi9cbiAgb25Gb3JrPzpcbiAgICAgIChwYXJlbnRab25lRGVsZWdhdGU6IFpvbmVEZWxlZ2F0ZSwgY3VycmVudFpvbmU6IFpvbmUsIHRhcmdldFpvbmU6IFpvbmUsXG4gICAgICAgem9uZVNwZWM6IFpvbmVTcGVjKSA9PiBab25lO1xuXG4gIC8qKlxuICAgKiBBbGxvd3MgaW50ZXJjZXB0aW9uIG9mIHRoZSB3cmFwcGluZyBvZiB0aGUgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnRab25lRGVsZWdhdGUgRGVsZWdhdGUgd2hpY2ggcGVyZm9ybXMgdGhlIHBhcmVudCBbWm9uZVNwZWNdIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIGN1cnJlbnRab25lIFRoZSBjdXJyZW50IFtab25lXSB3aGVyZSB0aGUgY3VycmVudCBpbnRlcmNlcHRvciBoYXMgYmVlbiBkZWNsYXJlZC5cbiAgICogQHBhcmFtIHRhcmdldFpvbmUgVGhlIFtab25lXSB3aGljaCBvcmlnaW5hbGx5IHJlY2VpdmVkIHRoZSByZXF1ZXN0LlxuICAgKiBAcGFyYW0gZGVsZWdhdGUgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgd3JhcGAgbWV0aG9kLlxuICAgKiBAcGFyYW0gc291cmNlIFRoZSBhcmd1bWVudCBwYXNzZWQgaW50byB0aGUgYHdyYXBgIG1ldGhvZC5cbiAgICovXG4gIG9uSW50ZXJjZXB0PzpcbiAgICAgIChwYXJlbnRab25lRGVsZWdhdGU6IFpvbmVEZWxlZ2F0ZSwgY3VycmVudFpvbmU6IFpvbmUsIHRhcmdldFpvbmU6IFpvbmUsIGRlbGVnYXRlOiBGdW5jdGlvbixcbiAgICAgICBzb3VyY2U6IHN0cmluZykgPT4gRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIEFsbG93cyBpbnRlcmNlcHRpb24gb2YgdGhlIGNhbGxiYWNrIGludm9jYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnRab25lRGVsZWdhdGUgRGVsZWdhdGUgd2hpY2ggcGVyZm9ybXMgdGhlIHBhcmVudCBbWm9uZVNwZWNdIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIGN1cnJlbnRab25lIFRoZSBjdXJyZW50IFtab25lXSB3aGVyZSB0aGUgY3VycmVudCBpbnRlcmNlcHRvciBoYXMgYmVlbiBkZWNsYXJlZC5cbiAgICogQHBhcmFtIHRhcmdldFpvbmUgVGhlIFtab25lXSB3aGljaCBvcmlnaW5hbGx5IHJlY2VpdmVkIHRoZSByZXF1ZXN0LlxuICAgKiBAcGFyYW0gZGVsZWdhdGUgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgcnVuYCBtZXRob2QuXG4gICAqIEBwYXJhbSBhcHBseVRoaXMgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgcnVuYCBtZXRob2QuXG4gICAqIEBwYXJhbSBhcHBseUFyZ3MgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgcnVuYCBtZXRob2QuXG4gICAqIEBwYXJhbSBzb3VyY2UgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgcnVuYCBtZXRob2QuXG4gICAqL1xuICBvbkludm9rZT86XG4gICAgICAocGFyZW50Wm9uZURlbGVnYXRlOiBab25lRGVsZWdhdGUsIGN1cnJlbnRab25lOiBab25lLCB0YXJnZXRab25lOiBab25lLCBkZWxlZ2F0ZTogRnVuY3Rpb24sXG4gICAgICAgYXBwbHlUaGlzOiBhbnksIGFwcGx5QXJncz86IGFueVtdLCBzb3VyY2U/OiBzdHJpbmcpID0+IGFueTtcblxuICAvKipcbiAgICogQWxsb3dzIGludGVyY2VwdGlvbiBvZiB0aGUgZXJyb3IgaGFuZGxpbmcuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnRab25lRGVsZWdhdGUgRGVsZWdhdGUgd2hpY2ggcGVyZm9ybXMgdGhlIHBhcmVudCBbWm9uZVNwZWNdIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIGN1cnJlbnRab25lIFRoZSBjdXJyZW50IFtab25lXSB3aGVyZSB0aGUgY3VycmVudCBpbnRlcmNlcHRvciBoYXMgYmVlbiBkZWNsYXJlZC5cbiAgICogQHBhcmFtIHRhcmdldFpvbmUgVGhlIFtab25lXSB3aGljaCBvcmlnaW5hbGx5IHJlY2VpdmVkIHRoZSByZXF1ZXN0LlxuICAgKiBAcGFyYW0gZXJyb3IgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgaGFuZGxlRXJyb3JgIG1ldGhvZC5cbiAgICovXG4gIG9uSGFuZGxlRXJyb3I/OlxuICAgICAgKHBhcmVudFpvbmVEZWxlZ2F0ZTogWm9uZURlbGVnYXRlLCBjdXJyZW50Wm9uZTogWm9uZSwgdGFyZ2V0Wm9uZTogWm9uZSxcbiAgICAgICBlcnJvcjogYW55KSA9PiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBBbGxvd3MgaW50ZXJjZXB0aW9uIG9mIHRhc2sgc2NoZWR1bGluZy5cbiAgICpcbiAgICogQHBhcmFtIHBhcmVudFpvbmVEZWxlZ2F0ZSBEZWxlZ2F0ZSB3aGljaCBwZXJmb3JtcyB0aGUgcGFyZW50IFtab25lU3BlY10gb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gY3VycmVudFpvbmUgVGhlIGN1cnJlbnQgW1pvbmVdIHdoZXJlIHRoZSBjdXJyZW50IGludGVyY2VwdG9yIGhhcyBiZWVuIGRlY2xhcmVkLlxuICAgKiBAcGFyYW0gdGFyZ2V0Wm9uZSBUaGUgW1pvbmVdIHdoaWNoIG9yaWdpbmFsbHkgcmVjZWl2ZWQgdGhlIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB0YXNrIFRoZSBhcmd1bWVudCBwYXNzZWQgaW50byB0aGUgYHNjaGVkdWxlVGFza2AgbWV0aG9kLlxuICAgKi9cbiAgb25TY2hlZHVsZVRhc2s/OlxuICAgICAgKHBhcmVudFpvbmVEZWxlZ2F0ZTogWm9uZURlbGVnYXRlLCBjdXJyZW50Wm9uZTogWm9uZSwgdGFyZ2V0Wm9uZTogWm9uZSwgdGFzazogVGFzaykgPT4gVGFzaztcblxuICBvbkludm9rZVRhc2s/OlxuICAgICAgKHBhcmVudFpvbmVEZWxlZ2F0ZTogWm9uZURlbGVnYXRlLCBjdXJyZW50Wm9uZTogWm9uZSwgdGFyZ2V0Wm9uZTogWm9uZSwgdGFzazogVGFzayxcbiAgICAgICBhcHBseVRoaXM6IGFueSwgYXBwbHlBcmdzPzogYW55W10pID0+IGFueTtcblxuICAvKipcbiAgICogQWxsb3dzIGludGVyY2VwdGlvbiBvZiB0YXNrIGNhbmNlbGxhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHBhcmVudFpvbmVEZWxlZ2F0ZSBEZWxlZ2F0ZSB3aGljaCBwZXJmb3JtcyB0aGUgcGFyZW50IFtab25lU3BlY10gb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gY3VycmVudFpvbmUgVGhlIGN1cnJlbnQgW1pvbmVdIHdoZXJlIHRoZSBjdXJyZW50IGludGVyY2VwdG9yIGhhcyBiZWVuIGRlY2xhcmVkLlxuICAgKiBAcGFyYW0gdGFyZ2V0Wm9uZSBUaGUgW1pvbmVdIHdoaWNoIG9yaWdpbmFsbHkgcmVjZWl2ZWQgdGhlIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB0YXNrIFRoZSBhcmd1bWVudCBwYXNzZWQgaW50byB0aGUgYGNhbmNlbFRhc2tgIG1ldGhvZC5cbiAgICovXG4gIG9uQ2FuY2VsVGFzaz86XG4gICAgICAocGFyZW50Wm9uZURlbGVnYXRlOiBab25lRGVsZWdhdGUsIGN1cnJlbnRab25lOiBab25lLCB0YXJnZXRab25lOiBab25lLCB0YXNrOiBUYXNrKSA9PiBhbnk7XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIG9mIGNoYW5nZXMgdG8gdGhlIHRhc2sgcXVldWUgZW1wdHkgc3RhdHVzLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50Wm9uZURlbGVnYXRlIERlbGVnYXRlIHdoaWNoIHBlcmZvcm1zIHRoZSBwYXJlbnQgW1pvbmVTcGVjXSBvcGVyYXRpb24uXG4gICAqIEBwYXJhbSBjdXJyZW50Wm9uZSBUaGUgY3VycmVudCBbWm9uZV0gd2hlcmUgdGhlIGN1cnJlbnQgaW50ZXJjZXB0b3IgaGFzIGJlZW4gZGVjbGFyZWQuXG4gICAqIEBwYXJhbSB0YXJnZXRab25lIFRoZSBbWm9uZV0gd2hpY2ggb3JpZ2luYWxseSByZWNlaXZlZCB0aGUgcmVxdWVzdC5cbiAgICogQHBhcmFtIGhhc1Rhc2tTdGF0ZVxuICAgKi9cbiAgb25IYXNUYXNrPzpcbiAgICAgIChwYXJlbnRab25lRGVsZWdhdGU6IFpvbmVEZWxlZ2F0ZSwgY3VycmVudFpvbmU6IFpvbmUsIHRhcmdldFpvbmU6IFpvbmUsXG4gICAgICAgaGFzVGFza1N0YXRlOiBIYXNUYXNrU3RhdGUpID0+IHZvaWQ7XG59XG5cblxuLyoqXG4gKiAgQSBkZWxlZ2F0ZSB3aGVuIGludGVyY2VwdGluZyB6b25lIG9wZXJhdGlvbnMuXG4gKlxuICogIEEgWm9uZURlbGVnYXRlIGlzIG5lZWRlZCBiZWNhdXNlIGEgY2hpbGQgem9uZSBjYW4ndCBzaW1wbHkgaW52b2tlIGEgbWV0aG9kIG9uIGEgcGFyZW50IHpvbmUuIEZvclxuICogIGV4YW1wbGUgYSBjaGlsZCB6b25lIHdyYXAgY2FuJ3QganVzdCBjYWxsIHBhcmVudCB6b25lIHdyYXAuIERvaW5nIHNvIHdvdWxkIGNyZWF0ZSBhIGNhbGxiYWNrXG4gKiAgd2hpY2ggaXMgYm91bmQgdG8gdGhlIHBhcmVudCB6b25lLiBXaGF0IHdlIGFyZSBpbnRlcmVzdGVkIGluIGlzIGludGVyY2VwdGluZyB0aGUgY2FsbGJhY2sgYmVmb3JlXG4gKiAgaXQgaXMgYm91bmQgdG8gYW55IHpvbmUuIEZ1cnRoZXJtb3JlLCB3ZSBhbHNvIG5lZWQgdG8gcGFzcyB0aGUgdGFyZ2V0Wm9uZSAoem9uZSB3aGljaCByZWNlaXZlZFxuICogIHRoZSBvcmlnaW5hbCByZXF1ZXN0KSB0byB0aGUgZGVsZWdhdGUuXG4gKlxuICogIFRoZSBab25lRGVsZWdhdGUgbWV0aG9kcyBtaXJyb3IgdGhvc2Ugb2YgWm9uZSB3aXRoIGFuIGFkZGl0aW9uIG9mIGV4dHJhIHRhcmdldFpvbmUgYXJndW1lbnQgaW5cbiAqICB0aGUgbWV0aG9kIHNpZ25hdHVyZS4gKFRoZSBvcmlnaW5hbCBab25lIHdoaWNoIHJlY2VpdmVkIHRoZSByZXF1ZXN0LikgU29tZSBtZXRob2RzIGFyZSByZW5hbWVkXG4gKiAgdG8gcHJldmVudCBjb25mdXNpb24sIGJlY2F1c2UgdGhleSBoYXZlIHNsaWdodGx5IGRpZmZlcmVudCBzZW1hbnRpY3MgYW5kIGFyZ3VtZW50cy5cbiAqXG4gKiAgLSBgd3JhcGAgPT4gYGludGVyY2VwdGA6IFRoZSBgd3JhcGAgbWV0aG9kIGRlbGVnYXRlcyB0byBgaW50ZXJjZXB0YC4gVGhlIGB3cmFwYCBtZXRob2QgcmV0dXJuc1xuICogICAgIGEgY2FsbGJhY2sgd2hpY2ggd2lsbCBydW4gaW4gYSBnaXZlbiB6b25lLCB3aGVyZSBhcyBpbnRlcmNlcHQgYWxsb3dzIHdyYXBwaW5nIHRoZSBjYWxsYmFja1xuICogICAgIHNvIHRoYXQgYWRkaXRpb25hbCBjb2RlIGNhbiBiZSBydW4gYmVmb3JlIGFuZCBhZnRlciwgYnV0IGRvZXMgbm90IGFzc29jaWF0ZSB0aGUgY2FsbGJhY2tcbiAqICAgICB3aXRoIHRoZSB6b25lLlxuICogIC0gYHJ1bmAgPT4gYGludm9rZWA6IFRoZSBgcnVuYCBtZXRob2QgZGVsZWdhdGVzIHRvIGBpbnZva2VgIHRvIHBlcmZvcm0gdGhlIGFjdHVhbCBleGVjdXRpb24gb2ZcbiAqICAgICB0aGUgY2FsbGJhY2suIFRoZSBgcnVuYCBtZXRob2Qgc3dpdGNoZXMgdG8gbmV3IHpvbmU7IHNhdmVzIGFuZCByZXN0b3JlcyB0aGUgYFpvbmUuY3VycmVudGA7XG4gKiAgICAgYW5kIG9wdGlvbmFsbHkgcGVyZm9ybXMgZXJyb3IgaGFuZGxpbmcuIFRoZSBpbnZva2UgaXMgbm90IHJlc3BvbnNpYmxlIGZvciBlcnJvciBoYW5kbGluZyxcbiAqICAgICBvciB6b25lIG1hbmFnZW1lbnQuXG4gKlxuICogIE5vdCBldmVyeSBtZXRob2QgaXMgdXN1YWxseSBvdmVyd3JpdHRlbiBpbiB0aGUgY2hpbGQgem9uZSwgZm9yIHRoaXMgcmVhc29uIHRoZSBab25lRGVsZWdhdGVcbiAqICBzdG9yZXMgdGhlIGNsb3Nlc3Qgem9uZSB3aGljaCBvdmVyd3JpdGVzIHRoaXMgYmVoYXZpb3IgYWxvbmcgd2l0aCB0aGUgY2xvc2VzdCBab25lU3BlYy5cbiAqXG4gKiAgTk9URTogV2UgaGF2ZSB0cmllZCB0byBtYWtlIHRoaXMgQVBJIGFuYWxvZ291cyB0byBFdmVudCBidWJibGluZyB3aXRoIHRhcmdldCBhbmQgY3VycmVudFxuICogIHByb3BlcnRpZXMuXG4gKlxuICogIE5vdGU6IFRoZSBab25lRGVsZWdhdGUgdHJlYXRzIFpvbmVTcGVjIGFzIGNsYXNzLiBUaGlzIGFsbG93cyB0aGUgWm9uZVNwZWMgdG8gdXNlIGl0cyBgdGhpc2AgdG9cbiAqICBzdG9yZSBpbnRlcm5hbCBzdGF0ZS5cbiAqL1xuaW50ZXJmYWNlIFpvbmVEZWxlZ2F0ZSB7XG4gIHpvbmU6IFpvbmU7XG4gIGZvcmsodGFyZ2V0Wm9uZTogWm9uZSwgem9uZVNwZWM6IFpvbmVTcGVjKTogWm9uZTtcbiAgaW50ZXJjZXB0KHRhcmdldFpvbmU6IFpvbmUsIGNhbGxiYWNrOiBGdW5jdGlvbiwgc291cmNlOiBzdHJpbmcpOiBGdW5jdGlvbjtcbiAgaW52b2tlKHRhcmdldFpvbmU6IFpvbmUsIGNhbGxiYWNrOiBGdW5jdGlvbiwgYXBwbHlUaGlzPzogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSwgc291cmNlPzogc3RyaW5nKTpcbiAgICAgIGFueTtcbiAgaGFuZGxlRXJyb3IodGFyZ2V0Wm9uZTogWm9uZSwgZXJyb3I6IGFueSk6IGJvb2xlYW47XG4gIHNjaGVkdWxlVGFzayh0YXJnZXRab25lOiBab25lLCB0YXNrOiBUYXNrKTogVGFzaztcbiAgaW52b2tlVGFzayh0YXJnZXRab25lOiBab25lLCB0YXNrOiBUYXNrLCBhcHBseVRoaXM/OiBhbnksIGFwcGx5QXJncz86IGFueVtdKTogYW55O1xuICBjYW5jZWxUYXNrKHRhcmdldFpvbmU6IFpvbmUsIHRhc2s6IFRhc2spOiBhbnk7XG4gIGhhc1Rhc2sodGFyZ2V0Wm9uZTogWm9uZSwgaXNFbXB0eTogSGFzVGFza1N0YXRlKTogdm9pZDtcbn1cblxudHlwZSBIYXNUYXNrU3RhdGUgPSB7XG4gIG1pY3JvVGFzazogYm9vbGVhbjsgbWFjcm9UYXNrOiBib29sZWFuOyBldmVudFRhc2s6IGJvb2xlYW47IGNoYW5nZTogVGFza1R5cGU7XG59O1xuXG4vKipcbiAqIFRhc2sgdHlwZTogYG1pY3JvVGFza2AsIGBtYWNyb1Rhc2tgLCBgZXZlbnRUYXNrYC5cbiAqL1xudHlwZSBUYXNrVHlwZSA9ICdtaWNyb1Rhc2snfCdtYWNyb1Rhc2snfCdldmVudFRhc2snO1xuXG4vKipcbiAqIFRhc2sgdHlwZTogYG5vdFNjaGVkdWxlZGAsIGBzY2hlZHVsaW5nYCwgYHNjaGVkdWxlZGAsIGBydW5uaW5nYCwgYGNhbmNlbGluZ2AsICd1bmtub3duJy5cbiAqL1xudHlwZSBUYXNrU3RhdGUgPSAnbm90U2NoZWR1bGVkJ3wnc2NoZWR1bGluZyd8J3NjaGVkdWxlZCd8J3J1bm5pbmcnfCdjYW5jZWxpbmcnfCd1bmtub3duJztcblxuXG4vKipcbiAqL1xuaW50ZXJmYWNlIFRhc2tEYXRhIHtcbiAgLyoqXG4gICAqIEEgcGVyaW9kaWMgW01hY3JvVGFza10gaXMgc3VjaCB3aGljaCBnZXQgYXV0b21hdGljYWxseSByZXNjaGVkdWxlZCBhZnRlciBpdCBpcyBleGVjdXRlZC5cbiAgICovXG4gIGlzUGVyaW9kaWM/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBEZWxheSBpbiBtaWxsaXNlY29uZHMgd2hlbiB0aGUgVGFzayB3aWxsIHJ1bi5cbiAgICovXG4gIGRlbGF5PzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBpZGVudGlmaWVyIHJldHVybmVkIGJ5IHRoZSBuYXRpdmUgc2V0VGltZW91dC5cbiAgICovXG4gIGhhbmRsZUlkPzogbnVtYmVyO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgd29yayB3aGljaCBpcyBleGVjdXRlZCB3aXRoIGEgY2xlYW4gc3RhY2suXG4gKlxuICogVGFza3MgYXJlIHVzZWQgaW4gWm9uZXMgdG8gbWFyayB3b3JrIHdoaWNoIGlzIHBlcmZvcm1lZCBvbiBjbGVhbiBzdGFjayBmcmFtZS4gVGhlcmUgYXJlIHRocmVlXG4gKiBraW5kcyBvZiB0YXNrLiBbTWljcm9UYXNrXSwgW01hY3JvVGFza10sIGFuZCBbRXZlbnRUYXNrXS5cbiAqXG4gKiBBIEpTIFZNIGNhbiBiZSBtb2RlbGVkIGFzIGEgW01pY3JvVGFza10gcXVldWUsIFtNYWNyb1Rhc2tdIHF1ZXVlLCBhbmQgW0V2ZW50VGFza10gc2V0LlxuICpcbiAqIC0gW01pY3JvVGFza10gcXVldWUgcmVwcmVzZW50cyBhIHNldCBvZiB0YXNrcyB3aGljaCBhcmUgZXhlY3V0aW5nIHJpZ2h0IGFmdGVyIHRoZSBjdXJyZW50IHN0YWNrXG4gKiAgIGZyYW1lIGJlY29tZXMgY2xlYW4gYW5kIGJlZm9yZSBhIFZNIHlpZWxkLiBBbGwgW01pY3JvVGFza11zIGV4ZWN1dGUgaW4gb3JkZXIgb2YgaW5zZXJ0aW9uXG4gKiAgIGJlZm9yZSBWTSB5aWVsZCBhbmQgdGhlIG5leHQgW01hY3JvVGFza10gaXMgZXhlY3V0ZWQuXG4gKiAtIFtNYWNyb1Rhc2tdIHF1ZXVlIHJlcHJlc2VudHMgYSBzZXQgb2YgdGFza3Mgd2hpY2ggYXJlIGV4ZWN1dGVkIG9uZSBhdCBhIHRpbWUgYWZ0ZXIgZWFjaCBWTVxuICogICB5aWVsZC4gVGhlIHF1ZXVlIGlzIG9yZGVyZWQgYnkgdGltZSwgYW5kIGluc2VydGlvbnMgY2FuIGhhcHBlbiBpbiBhbnkgbG9jYXRpb24uXG4gKiAtIFtFdmVudFRhc2tdIGlzIGEgc2V0IG9mIHRhc2tzIHdoaWNoIGNhbiBhdCBhbnkgdGltZSBiZSBpbnNlcnRlZCB0byB0aGUgZW5kIG9mIHRoZSBbTWFjcm9UYXNrXVxuICogICBxdWV1ZS4gVGhpcyBoYXBwZW5zIHdoZW4gdGhlIGV2ZW50IGZpcmVzLlxuICpcbiAqL1xuaW50ZXJmYWNlIFRhc2sge1xuICAvKipcbiAgICogVGFzayB0eXBlOiBgbWljcm9UYXNrYCwgYG1hY3JvVGFza2AsIGBldmVudFRhc2tgLlxuICAgKi9cbiAgdHlwZTogVGFza1R5cGU7XG5cbiAgLyoqXG4gICAqIFRhc2sgc3RhdGU6IGBub3RTY2hlZHVsZWRgLCBgc2NoZWR1bGluZ2AsIGBzY2hlZHVsZWRgLCBgcnVubmluZ2AsIGBjYW5jZWxpbmdgLCBgdW5rbm93bmAuXG4gICAqL1xuICBzdGF0ZTogVGFza1N0YXRlO1xuXG4gIC8qKlxuICAgKiBEZWJ1ZyBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBBUEkgd2hpY2ggcmVxdWVzdGVkIHRoZSBzY2hlZHVsaW5nIG9mIHRoZSB0YXNrLlxuICAgKi9cbiAgc291cmNlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBGdW5jdGlvbiB0byBiZSB1c2VkIGJ5IHRoZSBWTSB1cG9uIGVudGVyaW5nIHRoZSBbVGFza10uIFRoaXMgZnVuY3Rpb24gd2lsbCBkZWxlZ2F0ZSB0b1xuICAgKiBbWm9uZS5ydW5UYXNrXSBhbmQgZGVsZWdhdGUgdG8gYGNhbGxiYWNrYC5cbiAgICovXG4gIGludm9rZTogRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGJlIGV4ZWN1dGVkIGJ5IHRoZSBUYXNrIGFmdGVyIHRoZSBbWm9uZS5jdXJyZW50VGFza10gaGFzIGJlZW4gc2V0IHRvXG4gICAqIHRoZSBjdXJyZW50IHRhc2suXG4gICAqL1xuICBjYWxsYmFjazogRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIFRhc2sgc3BlY2lmaWMgb3B0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgdGFzay4gVGhpcyBpcyBwYXNzZWQgdG8gdGhlIGBzY2hlZHVsZUZuYC5cbiAgICovXG4gIGRhdGE/OiBUYXNrRGF0YTtcblxuICAvKipcbiAgICogUmVwcmVzZW50cyB0aGUgZGVmYXVsdCB3b3JrIHdoaWNoIG5lZWRzIHRvIGJlIGRvbmUgdG8gc2NoZWR1bGUgdGhlIFRhc2sgYnkgdGhlIFZNLlxuICAgKlxuICAgKiBBIHpvbmUgbWF5IGNob29zZSB0byBpbnRlcmNlcHQgdGhpcyBmdW5jdGlvbiBhbmQgcGVyZm9ybSBpdHMgb3duIHNjaGVkdWxpbmcuXG4gICAqL1xuICBzY2hlZHVsZUZuPzogKHRhc2s6IFRhc2spID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgdGhlIGRlZmF1bHQgd29yayB3aGljaCBuZWVkcyB0byBiZSBkb25lIHRvIHVuLXNjaGVkdWxlIHRoZSBUYXNrIGZyb20gdGhlIFZNLiBOb3QgYWxsXG4gICAqIFRhc2tzIGFyZSBjYW5jZWxhYmxlLCBhbmQgdGhlcmVmb3JlIHRoaXMgbWV0aG9kIGlzIG9wdGlvbmFsLlxuICAgKlxuICAgKiBBIHpvbmUgbWF5IGNob3NlIHRvIGludGVyY2VwdCB0aGlzIGZ1bmN0aW9uIGFuZCBwZXJmb3JtIGl0cyBvd24gdW4tc2NoZWR1bGluZy5cbiAgICovXG4gIGNhbmNlbEZuPzogKHRhc2s6IFRhc2spID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtab25lfSBUaGUgem9uZSB3aGljaCB3aWxsIGJlIHVzZWQgdG8gaW52b2tlIHRoZSBgY2FsbGJhY2tgLiBUaGUgWm9uZSBpcyBjYXB0dXJlZFxuICAgKiBhdCB0aGUgdGltZSBvZiBUYXNrIGNyZWF0aW9uLlxuICAgKi9cbiAgcmVhZG9ubHkgem9uZTogWm9uZTtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHRpbWVzIHRoZSB0YXNrIGhhcyBiZWVuIGV4ZWN1dGVkLCBvciAtMSBpZiBjYW5jZWxlZC5cbiAgICovXG4gIHJ1bkNvdW50OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIENhbmNlbCB0aGUgc2NoZWR1bGluZyByZXF1ZXN0LiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIGZyb20gYFpvbmVTcGVjLm9uU2NoZWR1bGVUYXNrYCB0b1xuICAgKiBjYW5jZWwgdGhlIGN1cnJlbnQgc2NoZWR1bGluZyBpbnRlcmNlcHRpb24uIE9uY2UgY2FuY2VsZWQgdGhlIHRhc2sgY2FuIGJlIGRpc2NhcmRlZCBvclxuICAgKiByZXNjaGVkdWxlZCB1c2luZyBgWm9uZS5zY2hlZHVsZVRhc2tgIG9uIGEgZGlmZmVyZW50IHpvbmUuXG4gICAqL1xuICBjYW5jZWxTY2hlZHVsZVJlcXVlc3QoKTogdm9pZDtcbn1cblxuaW50ZXJmYWNlIE1pY3JvVGFzayBleHRlbmRzIFRhc2sge1xuICB0eXBlOiAnbWljcm9UYXNrJztcbn1cblxuaW50ZXJmYWNlIE1hY3JvVGFzayBleHRlbmRzIFRhc2sge1xuICB0eXBlOiAnbWFjcm9UYXNrJztcbn1cblxuaW50ZXJmYWNlIEV2ZW50VGFzayBleHRlbmRzIFRhc2sge1xuICB0eXBlOiAnZXZlbnRUYXNrJztcbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xudHlwZSBBbWJpZW50Wm9uZSA9IFpvbmU7XG4vKiogQGludGVybmFsICovXG50eXBlIEFtYmllbnRab25lRGVsZWdhdGUgPSBab25lRGVsZWdhdGU7XG5cbmNvbnN0IFpvbmU6IFpvbmVUeXBlID0gKGZ1bmN0aW9uKGdsb2JhbDogYW55KSB7XG4gIGNvbnN0IHBlcmZvcm1hbmNlOiB7bWFyayhuYW1lOiBzdHJpbmcpOiB2b2lkOyBtZWFzdXJlKG5hbWU6IHN0cmluZywgbGFiZWw6IHN0cmluZyk6IHZvaWQ7fSA9XG4gICAgICBnbG9iYWxbJ3BlcmZvcm1hbmNlJ107XG4gIGZ1bmN0aW9uIG1hcmsobmFtZTogc3RyaW5nKSB7XG4gICAgcGVyZm9ybWFuY2UgJiYgcGVyZm9ybWFuY2VbJ21hcmsnXSAmJiBwZXJmb3JtYW5jZVsnbWFyayddKG5hbWUpO1xuICB9XG4gIGZ1bmN0aW9uIHBlcmZvcm1hbmNlTWVhc3VyZShuYW1lOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcpIHtcbiAgICBwZXJmb3JtYW5jZSAmJiBwZXJmb3JtYW5jZVsnbWVhc3VyZSddICYmIHBlcmZvcm1hbmNlWydtZWFzdXJlJ10obmFtZSwgbGFiZWwpO1xuICB9XG4gIG1hcmsoJ1pvbmUnKTtcbiAgY29uc3QgY2hlY2tEdXBsaWNhdGUgPSBnbG9iYWxbKCdfX3pvbmVfc3ltYm9sX19mb3JjZUR1cGxpY2F0ZVpvbmVDaGVjaycpXSA9PT0gdHJ1ZTtcbiAgaWYgKGdsb2JhbFsnWm9uZSddKSB7XG4gICAgLy8gaWYgZ2xvYmFsWydab25lJ10gYWxyZWFkeSBleGlzdHMgKG1heWJlIHpvbmUuanMgd2FzIGFscmVhZHkgbG9hZGVkIG9yXG4gICAgLy8gc29tZSBvdGhlciBsaWIgYWxzbyByZWdpc3RlcmVkIGEgZ2xvYmFsIG9iamVjdCBuYW1lZCBab25lKSwgd2UgbWF5IG5lZWRcbiAgICAvLyB0byB0aHJvdyBhbiBlcnJvciwgYnV0IHNvbWV0aW1lcyB1c2VyIG1heSBub3Qgd2FudCB0aGlzIGVycm9yLlxuICAgIC8vIEZvciBleGFtcGxlLFxuICAgIC8vIHdlIGhhdmUgdHdvIHdlYiBwYWdlcywgcGFnZTEgaW5jbHVkZXMgem9uZS5qcywgcGFnZTIgZG9lc24ndC5cbiAgICAvLyBhbmQgdGhlIDFzdCB0aW1lIHVzZXIgbG9hZCBwYWdlMSBhbmQgcGFnZTIsIGV2ZXJ5dGhpbmcgd29yayBmaW5lLFxuICAgIC8vIGJ1dCB3aGVuIHVzZXIgbG9hZCBwYWdlMiBhZ2FpbiwgZXJyb3Igb2NjdXJzIGJlY2F1c2UgZ2xvYmFsWydab25lJ10gYWxyZWFkeSBleGlzdHMuXG4gICAgLy8gc28gd2UgYWRkIGEgZmxhZyB0byBsZXQgdXNlciBjaG9vc2Ugd2hldGhlciB0byB0aHJvdyB0aGlzIGVycm9yIG9yIG5vdC5cbiAgICAvLyBCeSBkZWZhdWx0LCBpZiBleGlzdGluZyBab25lIGlzIGZyb20gem9uZS5qcywgd2Ugd2lsbCBub3QgdGhyb3cgdGhlIGVycm9yLlxuICAgIGlmIChjaGVja0R1cGxpY2F0ZSB8fCB0eXBlb2YgZ2xvYmFsWydab25lJ10uX19zeW1ib2xfXyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdab25lIGFscmVhZHkgbG9hZGVkLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2xvYmFsWydab25lJ107XG4gICAgfVxuICB9XG5cbiAgY2xhc3MgWm9uZSBpbXBsZW1lbnRzIEFtYmllbnRab25lIHtcbiAgICBzdGF0aWMgX19zeW1ib2xfXzogKG5hbWU6IHN0cmluZykgPT4gc3RyaW5nID0gX19zeW1ib2xfXztcblxuICAgIHN0YXRpYyBhc3NlcnRab25lUGF0Y2hlZCgpIHtcbiAgICAgIGlmIChnbG9iYWxbJ1Byb21pc2UnXSAhPT0gcGF0Y2hlc1snWm9uZUF3YXJlUHJvbWlzZSddKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdab25lLmpzIGhhcyBkZXRlY3RlZCB0aGF0IFpvbmVBd2FyZVByb21pc2UgYCh3aW5kb3d8Z2xvYmFsKS5Qcm9taXNlYCAnICtcbiAgICAgICAgICAgICdoYXMgYmVlbiBvdmVyd3JpdHRlbi5cXG4nICtcbiAgICAgICAgICAgICdNb3N0IGxpa2VseSBjYXVzZSBpcyB0aGF0IGEgUHJvbWlzZSBwb2x5ZmlsbCBoYXMgYmVlbiBsb2FkZWQgJyArXG4gICAgICAgICAgICAnYWZ0ZXIgWm9uZS5qcyAoUG9seWZpbGxpbmcgUHJvbWlzZSBhcGkgaXMgbm90IG5lY2Vzc2FyeSB3aGVuIHpvbmUuanMgaXMgbG9hZGVkLiAnICtcbiAgICAgICAgICAgICdJZiB5b3UgbXVzdCBsb2FkIG9uZSwgZG8gc28gYmVmb3JlIGxvYWRpbmcgem9uZS5qcy4pJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCByb290KCk6IEFtYmllbnRab25lIHtcbiAgICAgIGxldCB6b25lID0gWm9uZS5jdXJyZW50O1xuICAgICAgd2hpbGUgKHpvbmUucGFyZW50KSB7XG4gICAgICAgIHpvbmUgPSB6b25lLnBhcmVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB6b25lO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgY3VycmVudCgpOiBBbWJpZW50Wm9uZSB7XG4gICAgICByZXR1cm4gX2N1cnJlbnRab25lRnJhbWUuem9uZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IGN1cnJlbnRUYXNrKCk6IFRhc2t8bnVsbCB7XG4gICAgICByZXR1cm4gX2N1cnJlbnRUYXNrO1xuICAgIH1cblxuICAgIHN0YXRpYyBfX2xvYWRfcGF0Y2gobmFtZTogc3RyaW5nLCBmbjogX1BhdGNoRm4pOiB2b2lkIHtcbiAgICAgIGlmIChwYXRjaGVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGlmIChjaGVja0R1cGxpY2F0ZSkge1xuICAgICAgICAgIHRocm93IEVycm9yKCdBbHJlYWR5IGxvYWRlZCBwYXRjaDogJyArIG5hbWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFnbG9iYWxbJ19fWm9uZV9kaXNhYmxlXycgKyBuYW1lXSkge1xuICAgICAgICBjb25zdCBwZXJmTmFtZSA9ICdab25lOicgKyBuYW1lO1xuICAgICAgICBtYXJrKHBlcmZOYW1lKTtcbiAgICAgICAgcGF0Y2hlc1tuYW1lXSA9IGZuKGdsb2JhbCwgWm9uZSwgX2FwaSk7XG4gICAgICAgIHBlcmZvcm1hbmNlTWVhc3VyZShwZXJmTmFtZSwgcGVyZk5hbWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgcGFyZW50KCk6IEFtYmllbnRab25lfG51bGwge1xuICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcbiAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBfcGFyZW50OiBab25lfG51bGw7XG4gICAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xuICAgIHByaXZhdGUgX3Byb3BlcnRpZXM6IHtba2V5OiBzdHJpbmddOiBhbnl9O1xuICAgIHByaXZhdGUgX3pvbmVEZWxlZ2F0ZTogWm9uZURlbGVnYXRlO1xuXG4gICAgY29uc3RydWN0b3IocGFyZW50OiBab25lfG51bGwsIHpvbmVTcGVjOiBab25lU3BlY3xudWxsKSB7XG4gICAgICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICB0aGlzLl9uYW1lID0gem9uZVNwZWMgPyB6b25lU3BlYy5uYW1lIHx8ICd1bm5hbWVkJyA6ICc8cm9vdD4nO1xuICAgICAgdGhpcy5fcHJvcGVydGllcyA9IHpvbmVTcGVjICYmIHpvbmVTcGVjLnByb3BlcnRpZXMgfHwge307XG4gICAgICB0aGlzLl96b25lRGVsZWdhdGUgPVxuICAgICAgICAgIG5ldyBab25lRGVsZWdhdGUodGhpcywgdGhpcy5fcGFyZW50ICYmIHRoaXMuX3BhcmVudC5fem9uZURlbGVnYXRlLCB6b25lU3BlYyk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldChrZXk6IHN0cmluZyk6IGFueSB7XG4gICAgICBjb25zdCB6b25lOiBab25lID0gdGhpcy5nZXRab25lV2l0aChrZXkpIGFzIFpvbmU7XG4gICAgICBpZiAoem9uZSkgcmV0dXJuIHpvbmUuX3Byb3BlcnRpZXNba2V5XTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Wm9uZVdpdGgoa2V5OiBzdHJpbmcpOiBBbWJpZW50Wm9uZXxudWxsIHtcbiAgICAgIGxldCBjdXJyZW50OiBab25lfG51bGwgPSB0aGlzO1xuICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICAgICAgaWYgKGN1cnJlbnQuX3Byb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Ll9wYXJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZm9yayh6b25lU3BlYzogWm9uZVNwZWMpOiBBbWJpZW50Wm9uZSB7XG4gICAgICBpZiAoIXpvbmVTcGVjKSB0aHJvdyBuZXcgRXJyb3IoJ1pvbmVTcGVjIHJlcXVpcmVkIScpO1xuICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5mb3JrKHRoaXMsIHpvbmVTcGVjKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgd3JhcDxUIGV4dGVuZHMgRnVuY3Rpb24+KGNhbGxiYWNrOiBULCBzb3VyY2U6IHN0cmluZyk6IFQge1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGluZyBmdW5jdGlvbiBnb3Q6ICcgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICBjb25zdCBfY2FsbGJhY2sgPSB0aGlzLl96b25lRGVsZWdhdGUuaW50ZXJjZXB0KHRoaXMsIGNhbGxiYWNrLCBzb3VyY2UpO1xuICAgICAgY29uc3Qgem9uZTogWm9uZSA9IHRoaXM7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB6b25lLnJ1bkd1YXJkZWQoX2NhbGxiYWNrLCAodGhpcyBhcyBhbnkpLCA8YW55PmFyZ3VtZW50cywgc291cmNlKTtcbiAgICAgIH0gYXMgYW55IGFzIFQ7XG4gICAgfVxuXG4gICAgcHVibGljIHJ1bihjYWxsYmFjazogRnVuY3Rpb24sIGFwcGx5VGhpcz86IGFueSwgYXBwbHlBcmdzPzogYW55W10sIHNvdXJjZT86IHN0cmluZyk6IGFueTtcbiAgICBwdWJsaWMgcnVuPFQ+KFxuICAgICAgICBjYWxsYmFjazogKC4uLmFyZ3M6IGFueVtdKSA9PiBULCBhcHBseVRoaXM/OiBhbnksIGFwcGx5QXJncz86IGFueVtdLCBzb3VyY2U/OiBzdHJpbmcpOiBUIHtcbiAgICAgIF9jdXJyZW50Wm9uZUZyYW1lID0ge3BhcmVudDogX2N1cnJlbnRab25lRnJhbWUsIHpvbmU6IHRoaXN9O1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5pbnZva2UodGhpcywgY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgX2N1cnJlbnRab25lRnJhbWUgPSBfY3VycmVudFpvbmVGcmFtZS5wYXJlbnQhO1xuICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBydW5HdWFyZGVkKGNhbGxiYWNrOiBGdW5jdGlvbiwgYXBwbHlUaGlzPzogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSwgc291cmNlPzogc3RyaW5nKTogYW55O1xuICAgIHB1YmxpYyBydW5HdWFyZGVkPFQ+KFxuICAgICAgICBjYWxsYmFjazogKC4uLmFyZ3M6IGFueVtdKSA9PiBULCBhcHBseVRoaXM6IGFueSA9IG51bGwsIGFwcGx5QXJncz86IGFueVtdLFxuICAgICAgICBzb3VyY2U/OiBzdHJpbmcpIHtcbiAgICAgIF9jdXJyZW50Wm9uZUZyYW1lID0ge3BhcmVudDogX2N1cnJlbnRab25lRnJhbWUsIHpvbmU6IHRoaXN9O1xuICAgICAgdHJ5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLmludm9rZSh0aGlzLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX3pvbmVEZWxlZ2F0ZS5oYW5kbGVFcnJvcih0aGlzLCBlcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgX2N1cnJlbnRab25lRnJhbWUgPSBfY3VycmVudFpvbmVGcmFtZS5wYXJlbnQhO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgcnVuVGFzayh0YXNrOiBUYXNrLCBhcHBseVRoaXM/OiBhbnksIGFwcGx5QXJncz86IGFueSk6IGFueSB7XG4gICAgICBpZiAodGFzay56b25lICE9IHRoaXMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgJ0EgdGFzayBjYW4gb25seSBiZSBydW4gaW4gdGhlIHpvbmUgb2YgY3JlYXRpb24hIChDcmVhdGlvbjogJyArXG4gICAgICAgICAgICAodGFzay56b25lIHx8IE5PX1pPTkUpLm5hbWUgKyAnOyBFeGVjdXRpb246ICcgKyB0aGlzLm5hbWUgKyAnKScpO1xuICAgICAgfVxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvem9uZS5qcy9pc3N1ZXMvNzc4LCBzb21ldGltZXMgZXZlbnRUYXNrXG4gICAgICAvLyB3aWxsIHJ1biBpbiBub3RTY2hlZHVsZWQoY2FuY2VsZWQpIHN0YXRlLCB3ZSBzaG91bGQgbm90IHRyeSB0b1xuICAgICAgLy8gcnVuIHN1Y2gga2luZCBvZiB0YXNrIGJ1dCBqdXN0IHJldHVyblxuXG4gICAgICBpZiAodGFzay5zdGF0ZSA9PT0gbm90U2NoZWR1bGVkICYmICh0YXNrLnR5cGUgPT09IGV2ZW50VGFzayB8fCB0YXNrLnR5cGUgPT09IG1hY3JvVGFzaykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZUVudHJ5R3VhcmQgPSB0YXNrLnN0YXRlICE9IHJ1bm5pbmc7XG4gICAgICByZUVudHJ5R3VhcmQgJiYgKHRhc2sgYXMgWm9uZVRhc2s8YW55PikuX3RyYW5zaXRpb25UbyhydW5uaW5nLCBzY2hlZHVsZWQpO1xuICAgICAgdGFzay5ydW5Db3VudCsrO1xuICAgICAgY29uc3QgcHJldmlvdXNUYXNrID0gX2N1cnJlbnRUYXNrO1xuICAgICAgX2N1cnJlbnRUYXNrID0gdGFzaztcbiAgICAgIF9jdXJyZW50Wm9uZUZyYW1lID0ge3BhcmVudDogX2N1cnJlbnRab25lRnJhbWUsIHpvbmU6IHRoaXN9O1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHRhc2sudHlwZSA9PSBtYWNyb1Rhc2sgJiYgdGFzay5kYXRhICYmICF0YXNrLmRhdGEuaXNQZXJpb2RpYykge1xuICAgICAgICAgIHRhc2suY2FuY2VsRm4gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLmludm9rZVRhc2sodGhpcywgdGFzaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGlmICh0aGlzLl96b25lRGVsZWdhdGUuaGFuZGxlRXJyb3IodGhpcywgZXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIGlmIHRoZSB0YXNrJ3Mgc3RhdGUgaXMgbm90U2NoZWR1bGVkIG9yIHVua25vd24sIHRoZW4gaXQgaGFzIGFscmVhZHkgYmVlbiBjYW5jZWxsZWRcbiAgICAgICAgLy8gd2Ugc2hvdWxkIG5vdCByZXNldCB0aGUgc3RhdGUgdG8gc2NoZWR1bGVkXG4gICAgICAgIGlmICh0YXNrLnN0YXRlICE9PSBub3RTY2hlZHVsZWQgJiYgdGFzay5zdGF0ZSAhPT0gdW5rbm93bikge1xuICAgICAgICAgIGlmICh0YXNrLnR5cGUgPT0gZXZlbnRUYXNrIHx8ICh0YXNrLmRhdGEgJiYgdGFzay5kYXRhLmlzUGVyaW9kaWMpKSB7XG4gICAgICAgICAgICByZUVudHJ5R3VhcmQgJiYgKHRhc2sgYXMgWm9uZVRhc2s8YW55PikuX3RyYW5zaXRpb25UbyhzY2hlZHVsZWQsIHJ1bm5pbmcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXNrLnJ1bkNvdW50ID0gMDtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRhc2tDb3VudCh0YXNrIGFzIFpvbmVUYXNrPGFueT4sIC0xKTtcbiAgICAgICAgICAgIHJlRW50cnlHdWFyZCAmJlxuICAgICAgICAgICAgICAgICh0YXNrIGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8obm90U2NoZWR1bGVkLCBydW5uaW5nLCBub3RTY2hlZHVsZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfY3VycmVudFpvbmVGcmFtZSA9IF9jdXJyZW50Wm9uZUZyYW1lLnBhcmVudCE7XG4gICAgICAgIF9jdXJyZW50VGFzayA9IHByZXZpb3VzVGFzaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzY2hlZHVsZVRhc2s8VCBleHRlbmRzIFRhc2s+KHRhc2s6IFQpOiBUIHtcbiAgICAgIGlmICh0YXNrLnpvbmUgJiYgdGFzay56b25lICE9PSB0aGlzKSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSB0YXNrIHdhcyByZXNjaGVkdWxlZCwgdGhlIG5ld1pvbmVcbiAgICAgICAgLy8gc2hvdWxkIG5vdCBiZSB0aGUgY2hpbGRyZW4gb2YgdGhlIG9yaWdpbmFsIHpvbmVcbiAgICAgICAgbGV0IG5ld1pvbmU6IGFueSA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChuZXdab25lKSB7XG4gICAgICAgICAgaWYgKG5ld1pvbmUgPT09IHRhc2suem9uZSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYGNhbiBub3QgcmVzY2hlZHVsZSB0YXNrIHRvICR7XG4gICAgICAgICAgICAgICAgdGhpcy5uYW1lfSB3aGljaCBpcyBkZXNjZW5kYW50cyBvZiB0aGUgb3JpZ2luYWwgem9uZSAke3Rhc2suem9uZS5uYW1lfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXdab25lID0gbmV3Wm9uZS5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgICh0YXNrIGFzIGFueSBhcyBab25lVGFzazxhbnk+KS5fdHJhbnNpdGlvblRvKHNjaGVkdWxpbmcsIG5vdFNjaGVkdWxlZCk7XG4gICAgICBjb25zdCB6b25lRGVsZWdhdGVzOiBab25lRGVsZWdhdGVbXSA9IFtdO1xuICAgICAgKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLl96b25lRGVsZWdhdGVzID0gem9uZURlbGVnYXRlcztcbiAgICAgICh0YXNrIGFzIGFueSBhcyBab25lVGFzazxhbnk+KS5fem9uZSA9IHRoaXM7XG4gICAgICB0cnkge1xuICAgICAgICB0YXNrID0gdGhpcy5fem9uZURlbGVnYXRlLnNjaGVkdWxlVGFzayh0aGlzLCB0YXNrKSBhcyBUO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIHNob3VsZCBzZXQgdGFzaydzIHN0YXRlIHRvIHVua25vd24gd2hlbiBzY2hlZHVsZVRhc2sgdGhyb3cgZXJyb3JcbiAgICAgICAgLy8gYmVjYXVzZSB0aGUgZXJyIG1heSBmcm9tIHJlc2NoZWR1bGUsIHNvIHRoZSBmcm9tU3RhdGUgbWF5YmUgbm90U2NoZWR1bGVkXG4gICAgICAgICh0YXNrIGFzIGFueSBhcyBab25lVGFzazxhbnk+KS5fdHJhbnNpdGlvblRvKHVua25vd24sIHNjaGVkdWxpbmcsIG5vdFNjaGVkdWxlZCk7XG4gICAgICAgIC8vIFRPRE86IEBKaWFMaVBhc3Npb24sIHNob3VsZCB3ZSBjaGVjayB0aGUgcmVzdWx0IGZyb20gaGFuZGxlRXJyb3I/XG4gICAgICAgIHRoaXMuX3pvbmVEZWxlZ2F0ZS5oYW5kbGVFcnJvcih0aGlzLCBlcnIpO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgICBpZiAoKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLl96b25lRGVsZWdhdGVzID09PSB6b25lRGVsZWdhdGVzKSB7XG4gICAgICAgIC8vIHdlIGhhdmUgdG8gY2hlY2sgYmVjYXVzZSBpbnRlcm5hbGx5IHRoZSBkZWxlZ2F0ZSBjYW4gcmVzY2hlZHVsZSB0aGUgdGFzay5cbiAgICAgICAgdGhpcy5fdXBkYXRlVGFza0NvdW50KHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4sIDEpO1xuICAgICAgfVxuICAgICAgaWYgKCh0YXNrIGFzIGFueSBhcyBab25lVGFzazxhbnk+KS5zdGF0ZSA9PSBzY2hlZHVsaW5nKSB7XG4gICAgICAgICh0YXNrIGFzIGFueSBhcyBab25lVGFzazxhbnk+KS5fdHJhbnNpdGlvblRvKHNjaGVkdWxlZCwgc2NoZWR1bGluZyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGFzaztcbiAgICB9XG5cbiAgICBzY2hlZHVsZU1pY3JvVGFzayhcbiAgICAgICAgc291cmNlOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbiwgZGF0YT86IFRhc2tEYXRhLFxuICAgICAgICBjdXN0b21TY2hlZHVsZT86ICh0YXNrOiBUYXNrKSA9PiB2b2lkKTogTWljcm9UYXNrIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlVGFzayhcbiAgICAgICAgICBuZXcgWm9uZVRhc2sobWljcm9UYXNrLCBzb3VyY2UsIGNhbGxiYWNrLCBkYXRhLCBjdXN0b21TY2hlZHVsZSwgdW5kZWZpbmVkKSk7XG4gICAgfVxuXG4gICAgc2NoZWR1bGVNYWNyb1Rhc2soXG4gICAgICAgIHNvdXJjZTogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24sIGRhdGE/OiBUYXNrRGF0YSwgY3VzdG9tU2NoZWR1bGU/OiAodGFzazogVGFzaykgPT4gdm9pZCxcbiAgICAgICAgY3VzdG9tQ2FuY2VsPzogKHRhc2s6IFRhc2spID0+IHZvaWQpOiBNYWNyb1Rhc2sge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVUYXNrKFxuICAgICAgICAgIG5ldyBab25lVGFzayhtYWNyb1Rhc2ssIHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCBjdXN0b21DYW5jZWwpKTtcbiAgICB9XG5cbiAgICBzY2hlZHVsZUV2ZW50VGFzayhcbiAgICAgICAgc291cmNlOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbiwgZGF0YT86IFRhc2tEYXRhLCBjdXN0b21TY2hlZHVsZT86ICh0YXNrOiBUYXNrKSA9PiB2b2lkLFxuICAgICAgICBjdXN0b21DYW5jZWw/OiAodGFzazogVGFzaykgPT4gdm9pZCk6IEV2ZW50VGFzayB7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZVRhc2soXG4gICAgICAgICAgbmV3IFpvbmVUYXNrKGV2ZW50VGFzaywgc291cmNlLCBjYWxsYmFjaywgZGF0YSwgY3VzdG9tU2NoZWR1bGUsIGN1c3RvbUNhbmNlbCkpO1xuICAgIH1cblxuICAgIGNhbmNlbFRhc2sodGFzazogVGFzayk6IGFueSB7XG4gICAgICBpZiAodGFzay56b25lICE9IHRoaXMpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdBIHRhc2sgY2FuIG9ubHkgYmUgY2FuY2VsbGVkIGluIHRoZSB6b25lIG9mIGNyZWF0aW9uISAoQ3JlYXRpb246ICcgK1xuICAgICAgICAgICAgKHRhc2suem9uZSB8fCBOT19aT05FKS5uYW1lICsgJzsgRXhlY3V0aW9uOiAnICsgdGhpcy5uYW1lICsgJyknKTtcbiAgICAgICh0YXNrIGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8oY2FuY2VsaW5nLCBzY2hlZHVsZWQsIHJ1bm5pbmcpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5fem9uZURlbGVnYXRlLmNhbmNlbFRhc2sodGhpcywgdGFzayk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gaWYgZXJyb3Igb2NjdXJzIHdoZW4gY2FuY2VsVGFzaywgdHJhbnNpdCB0aGUgc3RhdGUgdG8gdW5rbm93blxuICAgICAgICAodGFzayBhcyBab25lVGFzazxhbnk+KS5fdHJhbnNpdGlvblRvKHVua25vd24sIGNhbmNlbGluZyk7XG4gICAgICAgIHRoaXMuX3pvbmVEZWxlZ2F0ZS5oYW5kbGVFcnJvcih0aGlzLCBlcnIpO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgICB0aGlzLl91cGRhdGVUYXNrQ291bnQodGFzayBhcyBab25lVGFzazxhbnk+LCAtMSk7XG4gICAgICAodGFzayBhcyBab25lVGFzazxhbnk+KS5fdHJhbnNpdGlvblRvKG5vdFNjaGVkdWxlZCwgY2FuY2VsaW5nKTtcbiAgICAgIHRhc2sucnVuQ291bnQgPSAwO1xuICAgICAgcmV0dXJuIHRhc2s7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdXBkYXRlVGFza0NvdW50KHRhc2s6IFpvbmVUYXNrPGFueT4sIGNvdW50OiBudW1iZXIpIHtcbiAgICAgIGNvbnN0IHpvbmVEZWxlZ2F0ZXMgPSB0YXNrLl96b25lRGVsZWdhdGVzITtcbiAgICAgIGlmIChjb3VudCA9PSAtMSkge1xuICAgICAgICB0YXNrLl96b25lRGVsZWdhdGVzID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgem9uZURlbGVnYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB6b25lRGVsZWdhdGVzW2ldLl91cGRhdGVUYXNrQ291bnQodGFzay50eXBlLCBjb3VudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgREVMRUdBVEVfWlM6IFpvbmVTcGVjID0ge1xuICAgIG5hbWU6ICcnLFxuICAgIG9uSGFzVGFzazpcbiAgICAgICAgKGRlbGVnYXRlOiBBbWJpZW50Wm9uZURlbGVnYXRlLCBfOiBBbWJpZW50Wm9uZSwgdGFyZ2V0OiBBbWJpZW50Wm9uZSxcbiAgICAgICAgIGhhc1Rhc2tTdGF0ZTogSGFzVGFza1N0YXRlKTogdm9pZCA9PiBkZWxlZ2F0ZS5oYXNUYXNrKHRhcmdldCwgaGFzVGFza1N0YXRlKSxcbiAgICBvblNjaGVkdWxlVGFzazpcbiAgICAgICAgKGRlbGVnYXRlOiBBbWJpZW50Wm9uZURlbGVnYXRlLCBfOiBBbWJpZW50Wm9uZSwgdGFyZ2V0OiBBbWJpZW50Wm9uZSwgdGFzazogVGFzayk6IFRhc2sgPT5cbiAgICAgICAgICAgIGRlbGVnYXRlLnNjaGVkdWxlVGFzayh0YXJnZXQsIHRhc2spLFxuICAgIG9uSW52b2tlVGFzazpcbiAgICAgICAgKGRlbGVnYXRlOiBBbWJpZW50Wm9uZURlbGVnYXRlLCBfOiBBbWJpZW50Wm9uZSwgdGFyZ2V0OiBBbWJpZW50Wm9uZSwgdGFzazogVGFzayxcbiAgICAgICAgIGFwcGx5VGhpczogYW55LCBhcHBseUFyZ3M6IGFueSk6IGFueSA9PlxuICAgICAgICAgICAgZGVsZWdhdGUuaW52b2tlVGFzayh0YXJnZXQsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKSxcbiAgICBvbkNhbmNlbFRhc2s6IChkZWxlZ2F0ZTogQW1iaWVudFpvbmVEZWxlZ2F0ZSwgXzogQW1iaWVudFpvbmUsIHRhcmdldDogQW1iaWVudFpvbmUsIHRhc2s6IFRhc2spOlxuICAgICAgICBhbnkgPT4gZGVsZWdhdGUuY2FuY2VsVGFzayh0YXJnZXQsIHRhc2spXG4gIH07XG5cbiAgY2xhc3MgWm9uZURlbGVnYXRlIGltcGxlbWVudHMgQW1iaWVudFpvbmVEZWxlZ2F0ZSB7XG4gICAgcHVibGljIHpvbmU6IFpvbmU7XG5cbiAgICBwcml2YXRlIF90YXNrQ291bnRzOiB7bWljcm9UYXNrOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1hY3JvVGFzazogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhc2s6IG51bWJlcn0gPSB7J21pY3JvVGFzayc6IDAsICdtYWNyb1Rhc2snOiAwLCAnZXZlbnRUYXNrJzogMH07XG5cbiAgICBwcml2YXRlIF9wYXJlbnREZWxlZ2F0ZTogWm9uZURlbGVnYXRlfG51bGw7XG5cbiAgICBwcml2YXRlIF9mb3JrRGxndDogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfZm9ya1pTOiBab25lU3BlY3xudWxsO1xuICAgIHByaXZhdGUgX2ZvcmtDdXJyWm9uZTogWm9uZXxudWxsO1xuXG4gICAgcHJpdmF0ZSBfaW50ZXJjZXB0RGxndDogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfaW50ZXJjZXB0WlM6IFpvbmVTcGVjfG51bGw7XG4gICAgcHJpdmF0ZSBfaW50ZXJjZXB0Q3VyclpvbmU6IFpvbmV8bnVsbDtcblxuICAgIHByaXZhdGUgX2ludm9rZURsZ3Q6IFpvbmVEZWxlZ2F0ZXxudWxsO1xuICAgIHByaXZhdGUgX2ludm9rZVpTOiBab25lU3BlY3xudWxsO1xuICAgIHByaXZhdGUgX2ludm9rZUN1cnJab25lOiBab25lfG51bGw7XG5cbiAgICBwcml2YXRlIF9oYW5kbGVFcnJvckRsZ3Q6IFpvbmVEZWxlZ2F0ZXxudWxsO1xuICAgIHByaXZhdGUgX2hhbmRsZUVycm9yWlM6IFpvbmVTcGVjfG51bGw7XG4gICAgcHJpdmF0ZSBfaGFuZGxlRXJyb3JDdXJyWm9uZTogWm9uZXxudWxsO1xuXG4gICAgcHJpdmF0ZSBfc2NoZWR1bGVUYXNrRGxndDogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfc2NoZWR1bGVUYXNrWlM6IFpvbmVTcGVjfG51bGw7XG4gICAgcHJpdmF0ZSBfc2NoZWR1bGVUYXNrQ3VyclpvbmU6IFpvbmV8bnVsbDtcblxuICAgIHByaXZhdGUgX2ludm9rZVRhc2tEbGd0OiBab25lRGVsZWdhdGV8bnVsbDtcbiAgICBwcml2YXRlIF9pbnZva2VUYXNrWlM6IFpvbmVTcGVjfG51bGw7XG4gICAgcHJpdmF0ZSBfaW52b2tlVGFza0N1cnJab25lOiBab25lfG51bGw7XG5cbiAgICBwcml2YXRlIF9jYW5jZWxUYXNrRGxndDogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfY2FuY2VsVGFza1pTOiBab25lU3BlY3xudWxsO1xuICAgIHByaXZhdGUgX2NhbmNlbFRhc2tDdXJyWm9uZTogWm9uZXxudWxsO1xuXG4gICAgcHJpdmF0ZSBfaGFzVGFza0RsZ3Q6IFpvbmVEZWxlZ2F0ZXxudWxsO1xuICAgIHByaXZhdGUgX2hhc1Rhc2tEbGd0T3duZXI6IFpvbmVEZWxlZ2F0ZXxudWxsO1xuICAgIHByaXZhdGUgX2hhc1Rhc2taUzogWm9uZVNwZWN8bnVsbDtcbiAgICBwcml2YXRlIF9oYXNUYXNrQ3VyclpvbmU6IFpvbmV8bnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKHpvbmU6IFpvbmUsIHBhcmVudERlbGVnYXRlOiBab25lRGVsZWdhdGV8bnVsbCwgem9uZVNwZWM6IFpvbmVTcGVjfG51bGwpIHtcbiAgICAgIHRoaXMuem9uZSA9IHpvbmU7XG4gICAgICB0aGlzLl9wYXJlbnREZWxlZ2F0ZSA9IHBhcmVudERlbGVnYXRlO1xuXG4gICAgICB0aGlzLl9mb3JrWlMgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMgJiYgem9uZVNwZWMub25Gb3JrID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZSEuX2ZvcmtaUyk7XG4gICAgICB0aGlzLl9mb3JrRGxndCA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkZvcmsgPyBwYXJlbnREZWxlZ2F0ZSA6IHBhcmVudERlbGVnYXRlIS5fZm9ya0RsZ3QpO1xuICAgICAgdGhpcy5fZm9ya0N1cnJab25lID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uRm9yayA/IHRoaXMuem9uZSA6IHBhcmVudERlbGVnYXRlIS56b25lKTtcblxuICAgICAgdGhpcy5faW50ZXJjZXB0WlMgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludGVyY2VwdCA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUhLl9pbnRlcmNlcHRaUyk7XG4gICAgICB0aGlzLl9pbnRlcmNlcHREbGd0ID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnRlcmNlcHQgPyBwYXJlbnREZWxlZ2F0ZSA6IHBhcmVudERlbGVnYXRlIS5faW50ZXJjZXB0RGxndCk7XG4gICAgICB0aGlzLl9pbnRlcmNlcHRDdXJyWm9uZSA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW50ZXJjZXB0ID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUhLnpvbmUpO1xuXG4gICAgICB0aGlzLl9pbnZva2VaUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZSA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUhLl9pbnZva2VaUyk7XG4gICAgICB0aGlzLl9pbnZva2VEbGd0ID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnZva2UgPyBwYXJlbnREZWxlZ2F0ZSEgOiBwYXJlbnREZWxlZ2F0ZSEuX2ludm9rZURsZ3QpO1xuICAgICAgdGhpcy5faW52b2tlQ3VyclpvbmUgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnZva2UgPyB0aGlzLnpvbmUgOiBwYXJlbnREZWxlZ2F0ZSEuem9uZSk7XG5cbiAgICAgIHRoaXMuX2hhbmRsZUVycm9yWlMgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkhhbmRsZUVycm9yID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZSEuX2hhbmRsZUVycm9yWlMpO1xuICAgICAgdGhpcy5faGFuZGxlRXJyb3JEbGd0ID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25IYW5kbGVFcnJvciA/IHBhcmVudERlbGVnYXRlISA6IHBhcmVudERlbGVnYXRlIS5faGFuZGxlRXJyb3JEbGd0KTtcbiAgICAgIHRoaXMuX2hhbmRsZUVycm9yQ3VyclpvbmUgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkhhbmRsZUVycm9yID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUhLnpvbmUpO1xuXG4gICAgICB0aGlzLl9zY2hlZHVsZVRhc2taUyA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uU2NoZWR1bGVUYXNrID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZSEuX3NjaGVkdWxlVGFza1pTKTtcbiAgICAgIHRoaXMuX3NjaGVkdWxlVGFza0RsZ3QgPSB6b25lU3BlYyAmJlxuICAgICAgICAgICh6b25lU3BlYy5vblNjaGVkdWxlVGFzayA/IHBhcmVudERlbGVnYXRlISA6IHBhcmVudERlbGVnYXRlIS5fc2NoZWR1bGVUYXNrRGxndCk7XG4gICAgICB0aGlzLl9zY2hlZHVsZVRhc2tDdXJyWm9uZSA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uU2NoZWR1bGVUYXNrID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUhLnpvbmUpO1xuXG4gICAgICB0aGlzLl9pbnZva2VUYXNrWlMgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZVRhc2sgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlIS5faW52b2tlVGFza1pTKTtcbiAgICAgIHRoaXMuX2ludm9rZVRhc2tEbGd0ID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnZva2VUYXNrID8gcGFyZW50RGVsZWdhdGUhIDogcGFyZW50RGVsZWdhdGUhLl9pbnZva2VUYXNrRGxndCk7XG4gICAgICB0aGlzLl9pbnZva2VUYXNrQ3VyclpvbmUgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZVRhc2sgPyB0aGlzLnpvbmUgOiBwYXJlbnREZWxlZ2F0ZSEuem9uZSk7XG5cbiAgICAgIHRoaXMuX2NhbmNlbFRhc2taUyA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uQ2FuY2VsVGFzayA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUhLl9jYW5jZWxUYXNrWlMpO1xuICAgICAgdGhpcy5fY2FuY2VsVGFza0RsZ3QgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkNhbmNlbFRhc2sgPyBwYXJlbnREZWxlZ2F0ZSEgOiBwYXJlbnREZWxlZ2F0ZSEuX2NhbmNlbFRhc2tEbGd0KTtcbiAgICAgIHRoaXMuX2NhbmNlbFRhc2tDdXJyWm9uZSA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uQ2FuY2VsVGFzayA/IHRoaXMuem9uZSA6IHBhcmVudERlbGVnYXRlIS56b25lKTtcblxuICAgICAgdGhpcy5faGFzVGFza1pTID0gbnVsbDtcbiAgICAgIHRoaXMuX2hhc1Rhc2tEbGd0ID0gbnVsbDtcbiAgICAgIHRoaXMuX2hhc1Rhc2tEbGd0T3duZXIgPSBudWxsO1xuICAgICAgdGhpcy5faGFzVGFza0N1cnJab25lID0gbnVsbDtcblxuICAgICAgY29uc3Qgem9uZVNwZWNIYXNUYXNrID0gem9uZVNwZWMgJiYgem9uZVNwZWMub25IYXNUYXNrO1xuICAgICAgY29uc3QgcGFyZW50SGFzVGFzayA9IHBhcmVudERlbGVnYXRlICYmIHBhcmVudERlbGVnYXRlLl9oYXNUYXNrWlM7XG4gICAgICBpZiAoem9uZVNwZWNIYXNUYXNrIHx8IHBhcmVudEhhc1Rhc2spIHtcbiAgICAgICAgLy8gSWYgd2UgbmVlZCB0byByZXBvcnQgaGFzVGFzaywgdGhhbiB0aGlzIFpTIG5lZWRzIHRvIGRvIHJlZiBjb3VudGluZyBvbiB0YXNrcy4gSW4gc3VjaFxuICAgICAgICAvLyBhIGNhc2UgYWxsIHRhc2sgcmVsYXRlZCBpbnRlcmNlcHRvcnMgbXVzdCBnbyB0aHJvdWdoIHRoaXMgWkQuIFdlIGNhbid0IHNob3J0IGNpcmN1aXQgaXQuXG4gICAgICAgIHRoaXMuX2hhc1Rhc2taUyA9IHpvbmVTcGVjSGFzVGFzayA/IHpvbmVTcGVjIDogREVMRUdBVEVfWlM7XG4gICAgICAgIHRoaXMuX2hhc1Rhc2tEbGd0ID0gcGFyZW50RGVsZWdhdGU7XG4gICAgICAgIHRoaXMuX2hhc1Rhc2tEbGd0T3duZXIgPSB0aGlzO1xuICAgICAgICB0aGlzLl9oYXNUYXNrQ3VyclpvbmUgPSB6b25lO1xuICAgICAgICBpZiAoIXpvbmVTcGVjIS5vblNjaGVkdWxlVGFzaykge1xuICAgICAgICAgIHRoaXMuX3NjaGVkdWxlVGFza1pTID0gREVMRUdBVEVfWlM7XG4gICAgICAgICAgdGhpcy5fc2NoZWR1bGVUYXNrRGxndCA9IHBhcmVudERlbGVnYXRlITtcbiAgICAgICAgICB0aGlzLl9zY2hlZHVsZVRhc2tDdXJyWm9uZSA9IHRoaXMuem9uZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXpvbmVTcGVjIS5vbkludm9rZVRhc2spIHtcbiAgICAgICAgICB0aGlzLl9pbnZva2VUYXNrWlMgPSBERUxFR0FURV9aUztcbiAgICAgICAgICB0aGlzLl9pbnZva2VUYXNrRGxndCA9IHBhcmVudERlbGVnYXRlITtcbiAgICAgICAgICB0aGlzLl9pbnZva2VUYXNrQ3VyclpvbmUgPSB0aGlzLnpvbmU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF6b25lU3BlYyEub25DYW5jZWxUYXNrKSB7XG4gICAgICAgICAgdGhpcy5fY2FuY2VsVGFza1pTID0gREVMRUdBVEVfWlM7XG4gICAgICAgICAgdGhpcy5fY2FuY2VsVGFza0RsZ3QgPSBwYXJlbnREZWxlZ2F0ZSE7XG4gICAgICAgICAgdGhpcy5fY2FuY2VsVGFza0N1cnJab25lID0gdGhpcy56b25lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yayh0YXJnZXRab25lOiBab25lLCB6b25lU3BlYzogWm9uZVNwZWMpOiBBbWJpZW50Wm9uZSB7XG4gICAgICByZXR1cm4gdGhpcy5fZm9ya1pTID8gdGhpcy5fZm9ya1pTLm9uRm9yayEodGhpcy5fZm9ya0RsZ3QhLCB0aGlzLnpvbmUsIHRhcmdldFpvbmUsIHpvbmVTcGVjKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFpvbmUodGFyZ2V0Wm9uZSwgem9uZVNwZWMpO1xuICAgIH1cblxuICAgIGludGVyY2VwdCh0YXJnZXRab25lOiBab25lLCBjYWxsYmFjazogRnVuY3Rpb24sIHNvdXJjZTogc3RyaW5nKTogRnVuY3Rpb24ge1xuICAgICAgcmV0dXJuIHRoaXMuX2ludGVyY2VwdFpTID9cbiAgICAgICAgICB0aGlzLl9pbnRlcmNlcHRaUy5vbkludGVyY2VwdCFcbiAgICAgICAgICAodGhpcy5faW50ZXJjZXB0RGxndCEsIHRoaXMuX2ludGVyY2VwdEN1cnJab25lISwgdGFyZ2V0Wm9uZSwgY2FsbGJhY2ssIHNvdXJjZSkgOlxuICAgICAgICAgIGNhbGxiYWNrO1xuICAgIH1cblxuICAgIGludm9rZShcbiAgICAgICAgdGFyZ2V0Wm9uZTogWm9uZSwgY2FsbGJhY2s6IEZ1bmN0aW9uLCBhcHBseVRoaXM6IGFueSwgYXBwbHlBcmdzPzogYW55W10sXG4gICAgICAgIHNvdXJjZT86IHN0cmluZyk6IGFueSB7XG4gICAgICByZXR1cm4gdGhpcy5faW52b2tlWlMgPyB0aGlzLl9pbnZva2VaUy5vbkludm9rZSFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLl9pbnZva2VEbGd0ISwgdGhpcy5faW52b2tlQ3VyclpvbmUhLCB0YXJnZXRab25lLCBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseVRoaXMsIGFwcGx5QXJncywgc291cmNlKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShhcHBseVRoaXMsIGFwcGx5QXJncyk7XG4gICAgfVxuXG4gICAgaGFuZGxlRXJyb3IodGFyZ2V0Wm9uZTogWm9uZSwgZXJyb3I6IGFueSk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZUVycm9yWlMgP1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUVycm9yWlMub25IYW5kbGVFcnJvciFcbiAgICAgICAgICAodGhpcy5faGFuZGxlRXJyb3JEbGd0ISwgdGhpcy5faGFuZGxlRXJyb3JDdXJyWm9uZSEsIHRhcmdldFpvbmUsIGVycm9yKSA6XG4gICAgICAgICAgdHJ1ZTtcbiAgICB9XG5cbiAgICBzY2hlZHVsZVRhc2sodGFyZ2V0Wm9uZTogWm9uZSwgdGFzazogVGFzayk6IFRhc2sge1xuICAgICAgbGV0IHJldHVyblRhc2s6IFpvbmVUYXNrPGFueT4gPSB0YXNrIGFzIFpvbmVUYXNrPGFueT47XG4gICAgICBpZiAodGhpcy5fc2NoZWR1bGVUYXNrWlMpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc1Rhc2taUykge1xuICAgICAgICAgIHJldHVyblRhc2suX3pvbmVEZWxlZ2F0ZXMhLnB1c2godGhpcy5faGFzVGFza0RsZ3RPd25lciEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVyblRhc2sgPSB0aGlzLl9zY2hlZHVsZVRhc2taUy5vblNjaGVkdWxlVGFzayFcbiAgICAgICAgICAgICAgICAgICAgICh0aGlzLl9zY2hlZHVsZVRhc2tEbGd0ISwgdGhpcy5fc2NoZWR1bGVUYXNrQ3VyclpvbmUhLCB0YXJnZXRab25lLCB0YXNrKSBhc1xuICAgICAgICAgICAgWm9uZVRhc2s8YW55PjtcbiAgICAgICAgaWYgKCFyZXR1cm5UYXNrKSByZXR1cm5UYXNrID0gdGFzayBhcyBab25lVGFzazxhbnk+O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRhc2suc2NoZWR1bGVGbikge1xuICAgICAgICAgIHRhc2suc2NoZWR1bGVGbih0YXNrKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YXNrLnR5cGUgPT0gbWljcm9UYXNrKSB7XG4gICAgICAgICAgc2NoZWR1bGVNaWNyb1Rhc2soPE1pY3JvVGFzaz50YXNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rhc2sgaXMgbWlzc2luZyBzY2hlZHVsZUZuLicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0dXJuVGFzaztcbiAgICB9XG5cbiAgICBpbnZva2VUYXNrKHRhcmdldFpvbmU6IFpvbmUsIHRhc2s6IFRhc2ssIGFwcGx5VGhpczogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSk6IGFueSB7XG4gICAgICByZXR1cm4gdGhpcy5faW52b2tlVGFza1pTID8gdGhpcy5faW52b2tlVGFza1pTLm9uSW52b2tlVGFzayFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5faW52b2tlVGFza0RsZ3QhLCB0aGlzLl9pbnZva2VUYXNrQ3VyclpvbmUhLCB0YXJnZXRab25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLCBhcHBseVRoaXMsIGFwcGx5QXJncykgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suY2FsbGJhY2suYXBwbHkoYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuICAgIH1cblxuICAgIGNhbmNlbFRhc2sodGFyZ2V0Wm9uZTogWm9uZSwgdGFzazogVGFzayk6IGFueSB7XG4gICAgICBsZXQgdmFsdWU6IGFueTtcbiAgICAgIGlmICh0aGlzLl9jYW5jZWxUYXNrWlMpIHtcbiAgICAgICAgdmFsdWUgPSB0aGlzLl9jYW5jZWxUYXNrWlMub25DYW5jZWxUYXNrIVxuICAgICAgICAgICAgICAgICh0aGlzLl9jYW5jZWxUYXNrRGxndCEsIHRoaXMuX2NhbmNlbFRhc2tDdXJyWm9uZSEsIHRhcmdldFpvbmUsIHRhc2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0YXNrLmNhbmNlbEZuKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoJ1Rhc2sgaXMgbm90IGNhbmNlbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHRhc2suY2FuY2VsRm4odGFzayk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgaGFzVGFzayh0YXJnZXRab25lOiBab25lLCBpc0VtcHR5OiBIYXNUYXNrU3RhdGUpIHtcbiAgICAgIC8vIGhhc1Rhc2sgc2hvdWxkIG5vdCB0aHJvdyBlcnJvciBzbyBvdGhlciBab25lRGVsZWdhdGVcbiAgICAgIC8vIGNhbiBzdGlsbCB0cmlnZ2VyIGhhc1Rhc2sgY2FsbGJhY2tcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuX2hhc1Rhc2taUyAmJlxuICAgICAgICAgICAgdGhpcy5faGFzVGFza1pTLm9uSGFzVGFzayFcbiAgICAgICAgICAgICh0aGlzLl9oYXNUYXNrRGxndCEsIHRoaXMuX2hhc1Rhc2tDdXJyWm9uZSEsIHRhcmdldFpvbmUsIGlzRW1wdHkpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRXJyb3IodGFyZ2V0Wm9uZSwgZXJyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfdXBkYXRlVGFza0NvdW50KHR5cGU6IFRhc2tUeXBlLCBjb3VudDogbnVtYmVyKSB7XG4gICAgICBjb25zdCBjb3VudHMgPSB0aGlzLl90YXNrQ291bnRzO1xuICAgICAgY29uc3QgcHJldiA9IGNvdW50c1t0eXBlXTtcbiAgICAgIGNvbnN0IG5leHQgPSBjb3VudHNbdHlwZV0gPSBwcmV2ICsgY291bnQ7XG4gICAgICBpZiAobmV4dCA8IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb3JlIHRhc2tzIGV4ZWN1dGVkIHRoZW4gd2VyZSBzY2hlZHVsZWQuJyk7XG4gICAgICB9XG4gICAgICBpZiAocHJldiA9PSAwIHx8IG5leHQgPT0gMCkge1xuICAgICAgICBjb25zdCBpc0VtcHR5OiBIYXNUYXNrU3RhdGUgPSB7XG4gICAgICAgICAgbWljcm9UYXNrOiBjb3VudHNbJ21pY3JvVGFzayddID4gMCxcbiAgICAgICAgICBtYWNyb1Rhc2s6IGNvdW50c1snbWFjcm9UYXNrJ10gPiAwLFxuICAgICAgICAgIGV2ZW50VGFzazogY291bnRzWydldmVudFRhc2snXSA+IDAsXG4gICAgICAgICAgY2hhbmdlOiB0eXBlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFzVGFzayh0aGlzLnpvbmUsIGlzRW1wdHkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsYXNzIFpvbmVUYXNrPFQgZXh0ZW5kcyBUYXNrVHlwZT4gaW1wbGVtZW50cyBUYXNrIHtcbiAgICBwdWJsaWMgdHlwZTogVDtcbiAgICBwdWJsaWMgc291cmNlOiBzdHJpbmc7XG4gICAgcHVibGljIGludm9rZTogRnVuY3Rpb247XG4gICAgcHVibGljIGNhbGxiYWNrOiBGdW5jdGlvbjtcbiAgICBwdWJsaWMgZGF0YTogVGFza0RhdGF8dW5kZWZpbmVkO1xuICAgIHB1YmxpYyBzY2hlZHVsZUZuOiAoKHRhc2s6IFRhc2spID0+IHZvaWQpfHVuZGVmaW5lZDtcbiAgICBwdWJsaWMgY2FuY2VsRm46ICgodGFzazogVGFzaykgPT4gdm9pZCl8dW5kZWZpbmVkO1xuICAgIF96b25lOiBab25lfG51bGwgPSBudWxsO1xuICAgIHB1YmxpYyBydW5Db3VudDogbnVtYmVyID0gMDtcbiAgICBfem9uZURlbGVnYXRlczogWm9uZURlbGVnYXRlW118bnVsbCA9IG51bGw7XG4gICAgX3N0YXRlOiBUYXNrU3RhdGUgPSAnbm90U2NoZWR1bGVkJztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICB0eXBlOiBULCBzb3VyY2U6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uLCBvcHRpb25zOiBUYXNrRGF0YXx1bmRlZmluZWQsXG4gICAgICAgIHNjaGVkdWxlRm46ICgodGFzazogVGFzaykgPT4gdm9pZCl8dW5kZWZpbmVkLCBjYW5jZWxGbjogKCh0YXNrOiBUYXNrKSA9PiB2b2lkKXx1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuZGF0YSA9IG9wdGlvbnM7XG4gICAgICB0aGlzLnNjaGVkdWxlRm4gPSBzY2hlZHVsZUZuO1xuICAgICAgdGhpcy5jYW5jZWxGbiA9IGNhbmNlbEZuO1xuICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAvLyBUT0RPOiBASmlhTGlQYXNzaW9uIG9wdGlvbnMgc2hvdWxkIGhhdmUgaW50ZXJmYWNlXG4gICAgICBpZiAodHlwZSA9PT0gZXZlbnRUYXNrICYmIG9wdGlvbnMgJiYgKG9wdGlvbnMgYXMgYW55KS51c2VHKSB7XG4gICAgICAgIHRoaXMuaW52b2tlID0gWm9uZVRhc2suaW52b2tlVGFzaztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaW52b2tlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFpvbmVUYXNrLmludm9rZVRhc2suY2FsbChnbG9iYWwsIHNlbGYsIHRoaXMsIDxhbnk+YXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgaW52b2tlVGFzayh0YXNrOiBhbnksIHRhcmdldDogYW55LCBhcmdzOiBhbnkpOiBhbnkge1xuICAgICAgaWYgKCF0YXNrKSB7XG4gICAgICAgIHRhc2sgPSB0aGlzO1xuICAgICAgfVxuICAgICAgX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcysrO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGFzay5ydW5Db3VudCsrO1xuICAgICAgICByZXR1cm4gdGFzay56b25lLnJ1blRhc2sodGFzaywgdGFyZ2V0LCBhcmdzKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzID09IDEpIHtcbiAgICAgICAgICBkcmFpbk1pY3JvVGFza1F1ZXVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcy0tO1xuICAgICAgfVxuICAgIH1cblxuICAgIGdldCB6b25lKCk6IFpvbmUge1xuICAgICAgcmV0dXJuIHRoaXMuX3pvbmUhO1xuICAgIH1cblxuICAgIGdldCBzdGF0ZSgpOiBUYXNrU3RhdGUge1xuICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYW5jZWxTY2hlZHVsZVJlcXVlc3QoKSB7XG4gICAgICB0aGlzLl90cmFuc2l0aW9uVG8obm90U2NoZWR1bGVkLCBzY2hlZHVsaW5nKTtcbiAgICB9XG5cbiAgICBfdHJhbnNpdGlvblRvKHRvU3RhdGU6IFRhc2tTdGF0ZSwgZnJvbVN0YXRlMTogVGFza1N0YXRlLCBmcm9tU3RhdGUyPzogVGFza1N0YXRlKSB7XG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IGZyb21TdGF0ZTEgfHwgdGhpcy5fc3RhdGUgPT09IGZyb21TdGF0ZTIpIHtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSB0b1N0YXRlO1xuICAgICAgICBpZiAodG9TdGF0ZSA9PSBub3RTY2hlZHVsZWQpIHtcbiAgICAgICAgICB0aGlzLl96b25lRGVsZWdhdGVzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3RoaXMudHlwZX0gJyR7dGhpcy5zb3VyY2V9JzogY2FuIG5vdCB0cmFuc2l0aW9uIHRvICcke1xuICAgICAgICAgICAgdG9TdGF0ZX0nLCBleHBlY3Rpbmcgc3RhdGUgJyR7ZnJvbVN0YXRlMX0nJHtcbiAgICAgICAgICAgIGZyb21TdGF0ZTIgPyAnIG9yIFxcJycgKyBmcm9tU3RhdGUyICsgJ1xcJycgOiAnJ30sIHdhcyAnJHt0aGlzLl9zdGF0ZX0nLmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEgJiYgdHlwZW9mIHRoaXMuZGF0YS5oYW5kbGVJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5oYW5kbGVJZC50b1N0cmluZygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBhZGQgdG9KU09OIG1ldGhvZCB0byBwcmV2ZW50IGN5Y2xpYyBlcnJvciB3aGVuXG4gICAgLy8gY2FsbCBKU09OLnN0cmluZ2lmeSh6b25lVGFzaylcbiAgICBwdWJsaWMgdG9KU09OKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLnNvdXJjZSxcbiAgICAgICAgem9uZTogdGhpcy56b25lLm5hbWUsXG4gICAgICAgIHJ1bkNvdW50OiB0aGlzLnJ1bkNvdW50XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8vICBNSUNST1RBU0sgUVVFVUVcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBjb25zdCBzeW1ib2xTZXRUaW1lb3V0ID0gX19zeW1ib2xfXygnc2V0VGltZW91dCcpO1xuICBjb25zdCBzeW1ib2xQcm9taXNlID0gX19zeW1ib2xfXygnUHJvbWlzZScpO1xuICBjb25zdCBzeW1ib2xUaGVuID0gX19zeW1ib2xfXygndGhlbicpO1xuICBsZXQgX21pY3JvVGFza1F1ZXVlOiBUYXNrW10gPSBbXTtcbiAgbGV0IF9pc0RyYWluaW5nTWljcm90YXNrUXVldWU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgbGV0IG5hdGl2ZU1pY3JvVGFza1F1ZXVlUHJvbWlzZTogYW55O1xuXG4gIGZ1bmN0aW9uIHNjaGVkdWxlTWljcm9UYXNrKHRhc2s/OiBNaWNyb1Rhc2spIHtcbiAgICAvLyBpZiB3ZSBhcmUgbm90IHJ1bm5pbmcgaW4gYW55IHRhc2ssIGFuZCB0aGVyZSBoYXMgbm90IGJlZW4gYW55dGhpbmcgc2NoZWR1bGVkXG4gICAgLy8gd2UgbXVzdCBib290c3RyYXAgdGhlIGluaXRpYWwgdGFzayBjcmVhdGlvbiBieSBtYW51YWxseSBzY2hlZHVsaW5nIHRoZSBkcmFpblxuICAgIGlmIChfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzID09PSAwICYmIF9taWNyb1Rhc2tRdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFdlIGFyZSBub3QgcnVubmluZyBpbiBUYXNrLCBzbyB3ZSBuZWVkIHRvIGtpY2tzdGFydCB0aGUgbWljcm90YXNrIHF1ZXVlLlxuICAgICAgaWYgKCFuYXRpdmVNaWNyb1Rhc2tRdWV1ZVByb21pc2UpIHtcbiAgICAgICAgaWYgKGdsb2JhbFtzeW1ib2xQcm9taXNlXSkge1xuICAgICAgICAgIG5hdGl2ZU1pY3JvVGFza1F1ZXVlUHJvbWlzZSA9IGdsb2JhbFtzeW1ib2xQcm9taXNlXS5yZXNvbHZlKDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlKSB7XG4gICAgICAgIGxldCBuYXRpdmVUaGVuID0gbmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlW3N5bWJvbFRoZW5dO1xuICAgICAgICBpZiAoIW5hdGl2ZVRoZW4pIHtcbiAgICAgICAgICAvLyBuYXRpdmUgUHJvbWlzZSBpcyBub3QgcGF0Y2hhYmxlLCB3ZSBuZWVkIHRvIHVzZSBgdGhlbmAgZGlyZWN0bHlcbiAgICAgICAgICAvLyBpc3N1ZSAxMDc4XG4gICAgICAgICAgbmF0aXZlVGhlbiA9IG5hdGl2ZU1pY3JvVGFza1F1ZXVlUHJvbWlzZVsndGhlbiddO1xuICAgICAgICB9XG4gICAgICAgIG5hdGl2ZVRoZW4uY2FsbChuYXRpdmVNaWNyb1Rhc2tRdWV1ZVByb21pc2UsIGRyYWluTWljcm9UYXNrUXVldWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2xvYmFsW3N5bWJvbFNldFRpbWVvdXRdKGRyYWluTWljcm9UYXNrUXVldWUsIDApO1xuICAgICAgfVxuICAgIH1cbiAgICB0YXNrICYmIF9taWNyb1Rhc2tRdWV1ZS5wdXNoKHRhc2spO1xuICB9XG5cbiAgZnVuY3Rpb24gZHJhaW5NaWNyb1Rhc2tRdWV1ZSgpIHtcbiAgICBpZiAoIV9pc0RyYWluaW5nTWljcm90YXNrUXVldWUpIHtcbiAgICAgIF9pc0RyYWluaW5nTWljcm90YXNrUXVldWUgPSB0cnVlO1xuICAgICAgd2hpbGUgKF9taWNyb1Rhc2tRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcXVldWUgPSBfbWljcm9UYXNrUXVldWU7XG4gICAgICAgIF9taWNyb1Rhc2tRdWV1ZSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgdGFzayA9IHF1ZXVlW2ldO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0YXNrLnpvbmUucnVuVGFzayh0YXNrLCBudWxsLCBudWxsKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgX2FwaS5vblVuaGFuZGxlZEVycm9yKGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIF9hcGkubWljcm90YXNrRHJhaW5Eb25lKCk7XG4gICAgICBfaXNEcmFpbmluZ01pY3JvdGFza1F1ZXVlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLy8gIEJPT1RTVFJBUFxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuICBjb25zdCBOT19aT05FID0ge25hbWU6ICdOTyBaT05FJ307XG4gIGNvbnN0IG5vdFNjaGVkdWxlZDogJ25vdFNjaGVkdWxlZCcgPSAnbm90U2NoZWR1bGVkJywgc2NoZWR1bGluZzogJ3NjaGVkdWxpbmcnID0gJ3NjaGVkdWxpbmcnLFxuICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlZDogJ3NjaGVkdWxlZCcgPSAnc2NoZWR1bGVkJywgcnVubmluZzogJ3J1bm5pbmcnID0gJ3J1bm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbGluZzogJ2NhbmNlbGluZycgPSAnY2FuY2VsaW5nJywgdW5rbm93bjogJ3Vua25vd24nID0gJ3Vua25vd24nO1xuICBjb25zdCBtaWNyb1Rhc2s6ICdtaWNyb1Rhc2snID0gJ21pY3JvVGFzaycsIG1hY3JvVGFzazogJ21hY3JvVGFzaycgPSAnbWFjcm9UYXNrJyxcbiAgICAgICAgICAgICAgICAgICBldmVudFRhc2s6ICdldmVudFRhc2snID0gJ2V2ZW50VGFzayc7XG5cbiAgY29uc3QgcGF0Y2hlczoge1trZXk6IHN0cmluZ106IGFueX0gPSB7fTtcbiAgY29uc3QgX2FwaTogX1pvbmVQcml2YXRlID0ge1xuICAgIHN5bWJvbDogX19zeW1ib2xfXyxcbiAgICBjdXJyZW50Wm9uZUZyYW1lOiAoKSA9PiBfY3VycmVudFpvbmVGcmFtZSxcbiAgICBvblVuaGFuZGxlZEVycm9yOiBub29wLFxuICAgIG1pY3JvdGFza0RyYWluRG9uZTogbm9vcCxcbiAgICBzY2hlZHVsZU1pY3JvVGFzazogc2NoZWR1bGVNaWNyb1Rhc2ssXG4gICAgc2hvd1VuY2F1Z2h0RXJyb3I6ICgpID0+ICEoWm9uZSBhcyBhbnkpW19fc3ltYm9sX18oJ2lnbm9yZUNvbnNvbGVFcnJvclVuY2F1Z2h0RXJyb3InKV0sXG4gICAgcGF0Y2hFdmVudFRhcmdldDogKCkgPT4gW10sXG4gICAgcGF0Y2hPblByb3BlcnRpZXM6IG5vb3AsXG4gICAgcGF0Y2hNZXRob2Q6ICgpID0+IG5vb3AsXG4gICAgYmluZEFyZ3VtZW50czogKCkgPT4gW10sXG4gICAgcGF0Y2hUaGVuOiAoKSA9PiBub29wLFxuICAgIHNldE5hdGl2ZVByb21pc2U6IChOYXRpdmVQcm9taXNlOiBhbnkpID0+IHtcbiAgICAgIC8vIHNvbWV0aW1lcyBOYXRpdmVQcm9taXNlLnJlc29sdmUgc3RhdGljIGZ1bmN0aW9uXG4gICAgICAvLyBpcyBub3QgcmVhZHkgeWV0LCAoc3VjaCBhcyBjb3JlLWpzL2VzNi5wcm9taXNlKVxuICAgICAgLy8gc28gd2UgbmVlZCB0byBjaGVjayBoZXJlLlxuICAgICAgaWYgKE5hdGl2ZVByb21pc2UgJiYgdHlwZW9mIE5hdGl2ZVByb21pc2UucmVzb2x2ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBuYXRpdmVNaWNyb1Rhc2tRdWV1ZVByb21pc2UgPSBOYXRpdmVQcm9taXNlLnJlc29sdmUoMCk7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbiAgbGV0IF9jdXJyZW50Wm9uZUZyYW1lOiBfWm9uZUZyYW1lID0ge3BhcmVudDogbnVsbCwgem9uZTogbmV3IFpvbmUobnVsbCwgbnVsbCl9O1xuICBsZXQgX2N1cnJlbnRUYXNrOiBUYXNrfG51bGwgPSBudWxsO1xuICBsZXQgX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcyA9IDA7XG5cbiAgZnVuY3Rpb24gbm9vcCgpIHt9XG5cbiAgZnVuY3Rpb24gX19zeW1ib2xfXyhuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gJ19fem9uZV9zeW1ib2xfXycgKyBuYW1lO1xuICB9XG5cbiAgcGVyZm9ybWFuY2VNZWFzdXJlKCdab25lJywgJ1pvbmUnKTtcbiAgcmV0dXJuIGdsb2JhbFsnWm9uZSddID0gWm9uZTtcbn0pKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdyB8fCB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZiB8fCBnbG9iYWwpOyJdfQ==